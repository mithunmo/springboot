var basicConfig={debugMode:!1,writeLogToConsole:!1,disableRightClick:!1,enableSorting:!0,enableSSE:!0},appConfig={ver:3,ratyImgPath:"/images/raty_img",shoppingCartImgPath:"/images/shoppingcart.png",shoppingCartFullImgPath:"/images/shoppingcart_full.png",sidebarCloseDuration:5e3},idleTimerConfig={idleTime:1500,pollingTime:300,warningTime:300,idleTimeoutDebugMode:!1},globalVars={isWindowFocus:!1,hasClicked:0,prePortfolioName:"",cart:null,isChangedWithoutSubmit:!1,isSidebarOpened:!1,title:document.title,sidebarTimer:null,lockObject:{portfolio:0,collections:0},tabNamesTable:void 0},searchResult,searchResultProp={currentPage:0,totalPages:0,itemsPerPage:8,searchCriteria:null,sortOption:1,isNewRequest:!1,previousSelectedIndex:0},collectionsResult={data:null,imageList:null,visible:null},collectionsProp={currentPage:0,totalPages:0,itemsPerPage:8,portfolioId:-1,preloadPortfolioId:-1,forceToReload:!1},portfolioResult={data:null,imageList:null,visible:null},portfolioProp={currentPage:0,totalPages:0,itemsPerPage:8,portfolioId:-1,preloadPortfolioId:-1,forceToReload:!1},boardsResult={portfolioId:null,data:null,visible:null},boardProp={currentPage:0,totalPages:0,itemsPerPage:8,forceToReload:!1},layoutTemplate={emptyPortfolioMsg:'<div class="empty" style="width:320px;"><i></i><span><a href="javascript:void(0)" id="add_manage_portfolio" data-mode="c" style="color:#C30">Click here</a>&nbsp;to create your first portfolio!</span></div>',emptyBoardMsg:'<div class="empty"><i></i><span><a href="javascript:void(0)" id="add_manage_board" style="color:#C30">Click here</a>&nbsp;to add your first board!</span></div>',emptyPortfolioBoardMsg:'<div class="empty"><i></i><span><a href="javascript:void(0)" id="add_manage_page" style="color:#C30">Click here</a>&nbsp;to create your first page!</span></div>',reqPortfolioBoardMsg:'<div class="empty w opa"><i></i><a href="javascript:void(0);" class="close">CLOSE</a><span>You must have 3 published portfolio images to complete this segment of your profile and become visible to buyers.</span></div>',invisibleDesignerMsg:'<div class="empty w opa"><i></i><a href="javascript:void(0);" class="close">CLOSE</a><span>Please complete <a class="act" href="#portfolio_page_0_1">your portfolio</a> to become visible to buyers. Thank you.</span></div>',loadingMsg:'<div class="loadingSpinner"><span><img src="/images/spinner.gif" /></span></div>',loadingPortfolioMsg:'<div class="loadingSpinner"><span><img src="/images/spinner.gif" /><br />Loading Portfolio Items...</span></div>',basicConsoleFrame:'<div class="contentFrame"><div class="content" id="basicContent"><div class="loadingSpinner"><span><img src="/images/spinner.gif" /></span></div></div></div>',basicConsoleFrameWithHeader:'<div class="contentFrame" id="basicFrame"><div class="content-function"></div><div class="content with-header"><div class="loadingSpinner"><span><img src="/images/spinner.gif" /></span></div></div></div>',errorStyle:"color:#FF0000",optionDefaultMsg:'<option value="-1">-Please select one option-</option>',optionDefaultMsgWithDontCare:'<option value="-1">-Please select one option-</option><option value="-1">-Ignore-</option>',optionDefaultMsgWithDisabledAttr:'<option value="-1" disabled="disabled">-Please select one option-</option>',optionLoadingMsg:'<option value="-1" disabled="disabled">Loading...</option>',optionDefaultCategory:'<option value="-1">-Please select Division above-</option>',optionDefaultProduct:'<option value="-1">-Please select Category above-</option>',optionDefaultProductWithDontCare:'<option value="-1">-Please select Category above-</option><option value="-1">-Ignore-</option>',optionDefaultProductType:'<option value="-1" disabled="disabled">-Please select Product above-</option>',optionDefaultProductTypeWithDontCare:'<option value="-1" disabled="disabled">-Please select Product above-</option><option value="-1">-Ignore-</option>',optionEmpty:'<option value="-1" disabled="disabled">--Empty--</option>',optionEmptyWithDisabledAttr:'<option value="-1" disabled="disabled">--Empty--</option>',emptyPage:'<div class="empty"><i></i><span>Empty Page<br />Please Select Another Page</span></div>',loadingPopup:'<span style="color:blue;">Please wait....<span><br /><img src="/images/spinner_small.gif" style="margin-top:30px;"/>',sidebarLoading:'<div class="sidebar-loading"/>',downloadHint:'<div class="download-hint">Your download will begin shortly.</div>'},messagesProp={confirmation_continue:" Would you like to continue?",save_create_pboard_confirmation:"Clicking OK will save this page to your portfolio, but will NOT be reviewed by a FFG Administrator.",publish_create_pboard_confirmation:"Clicking OK will save this page to your Portfolio, and will be reviewed by a FFG Administrator.",save_create_board_confirmation:'This board will <span style="color:#F00">NOT</span> be published to the Marketplace.<br/>Would you like to continue?<br/>If you would like your board to be visible in the Marketplace, you must select "Save & Publish."',publish_create_board_confirmation:"Clicking Ok will publish this board to the Marketplace.",number_only:"Credits can only be entered as whole numbers. Be sure not to include any decimals or other characters in this field."},sseUtility={source:null,eventAlertsTS:"",eventMessagesTS:"",pollingMode:!1},tooltipConfig={position:{target:"mouse",my:"Top Center",at:"Bottom Center",adjust:{screen:!0,mouse:!0,x:5,y:20}},style:{classes:"qtip-blue qtip-shadow",tip:!1}};$(document).on("click",".button, a",function(a){if("disabled"==$(this).attr("disabled")||"true"==$(this).attr("disabled")||"true"==$(this).attr("button-disabled"))logging("disable button event hooked!"),a.stopImmediatePropagation()});$(document).ready(function(){initSSE();$(window).height();logging("main running.."+appConfig.ver);logging("Browser Version:"+window.navigator.userAgent);initIdleTimeoutPlugin();$(".cloud-zoom").livequery(function(){$(this).CloudZoom()});$(".text-wrapper,.item-label,.detail .board_name,.item-function .board_name,.messageBoardId,.shoppingCartBoardId,.drawer_boardId,.checkoutBoardId,.messageDetailBoardId,.detail .name,.designWallBoardId,#designWallTiles .touchArea,.designerAccountBoardId,.boards_suggestion_boardId,.gridBoardId,span[title],.show-qtip").livequery(function(){$(this).qtip(tooltipConfig)});$(document).on("click",".qtip",function(){$(this).css("display","none")});basicConfig.disableRightClick&&$(document).bind("contextmenu",function(a){"contextMenu"!=a.target.id&&($("#contextMenu").css({top:a.clientY,left:a.clientX}),$("#contextMenu").show());return!1});$(window).bind("click",function(a){"contextMenu"!=a.target.id&&$("#contextMenu").hide()});$(window).bind("load",function(){logging("load","#F00");checkSession()});$(window).bind("focus",function(){globalVars.isWindowFocus||(logging("focus","#F00"),checkSession());globalVars.isWindowFocus=!0});$(window).bind("blur",function(){globalVars.isWindowFocus=!1});$(window).bind("beforeunload",function(){logging("trigger beforeunload","#F00");$("input").blur();$("textarea").blur();$($("#tabs li")[$("#tabs").tabs("option","selected")]).text();if(globalVars.isChangedWithoutSubmit||isChangedWithoutSubmitOnPopup)return logging(globalVars.isChangedWithoutSubmit+" ; "+isChangedWithoutSubmitOnPopup),"Do you want to leave the page without saving"});$(document).on("change","#form_create_board input",function(){globalVars.isChangedWithoutSubmit=!0});$(document).on("change","#form_edit_profile input, #form_edit_profile select",function(){globalVars.isChangedWithoutSubmit=!0});$(document).on("change","#form_create_portfolio input",function(){globalVars.isChangedWithoutSubmit=!0});$(document).on("change","#messageContent",function(){globalVars.isChangedWithoutSubmit=!0});$(document).on("change","#replyForm input",function(){globalVars.isChangedWithoutSubmit=!0});$(document).on("change",".popup input[type=text]",function(){isChangedWithoutSubmitOnPopup=!0});$(document).on("change",".popup textarea",function(){isChangedWithoutSubmitOnPopup=!0});$(document).on("click",".cloud-zoom",function(a){a.preventDefault()});$("#title").data("mode","max");resize();$("#tabs").tabs({spinner:"Loading..",fx:{opacity:"toggle",duration:"fast"},select:function(a,b){$("#profileScore").qtip("hide");removeTabsFocusClass("tab_manage_portfolio");removeTabsFocusClass("tab_manage_collections");removeTabsFocusClass("tab_home");selectTabHeader("tab_rating","hide");if(globalVars.isChangedWithoutSubmit)a.preventDefault(),showConfirmation("You are about to leave the page with unsaved data, Would you like to continue?","Confirmation","changedWithoutSave",{onOk:function(){closePopupMsg();globalVars.isChangedWithoutSubmit=!1;$("#tabs").tabs("select",b.index)}});else{checkSession();var e=b.tab.hash,f={"#tab_home":function(){$(e).html(layoutTemplate.basicConsoleFrame);location.hash="#home"},"#tab_home_edit_mode":function(){$(e).html(layoutTemplate.basicConsoleFrame);selectTabHeader("tab_home");$("#tab_home_edit_mode").html(layoutTemplate.basicConsoleFrame)},"#tab_search_criteria":function(){location.hash="#search_criteria";if(""==$("#tab_search_criteria").html())$(e).html(layoutTemplate.basicConsoleFrame),logging("LOAD SEARCH CRITERIA"+getIdByName("tab_search_criteria"),"#F00");else{logging("enable cache","#F00");var a=$("#tabs").data("tabs").anchors[1];$(a).data("cache.tabs",!0)}},"#tab_activity":function(){$(e).html(layoutTemplate.basicConsoleFrame);location.hash="#activity"},"#tab_design_wall":function(){location.hash="#design_wall_0_3_-1";$("#tab_design_wall").html(layoutTemplate.basicConsoleFrame)},"#tab_alerts":function(){$("#tab_alerts").html(layoutTemplate.basicConsoleFrame);location.hash="#alerts";$("#tabs").tabs("load",getIdByName("tab_alerts"))},"#tab_messages":function(){logging("show message loading..","#F00");$("#tab_messages").html(layoutTemplate.basicConsoleFrame);location.hash="#messages_page_1"},"#tab_manage_portfolio":function(){$("#tab_manage_portfolio").html(layoutTemplate.basicConsoleFrameWithHeader);navigate($(".li-portfolio"),!0)},"#tab_manage_collections":function(){$("#tab_manage_collections").html(layoutTemplate.basicConsoleFrameWithHeader)},"#tab_create_portfolio":function(){selectTabHeader("tab_manage_portfolio");$("#tab_create_portfolio").html(layoutTemplate.basicConsoleFrame)},"#tab_create_collection":function(){selectTabHeader("tab_manage_collections");$("#tab_create_collection").html(layoutTemplate.basicConsoleFrame)},"#tab_search_result":function(){syncMarket()},"#tab_manage_board":function(){$("#tab_manage_board").html(layoutTemplate.basicConsoleFrame);"c"==$(b.tab).attr("data-mode").toLowerCase()?selectTabHeader("tab_manage_collections"):selectTabHeader("tab_manage_portfolio")},"#tab_create_board":function(){$("#tab_create_board").html(layoutTemplate.basicConsoleFrame);"c"==$(b.tab).attr("data-mode").toLowerCase()?selectTabHeader("tab_manage_collections"):selectTabHeader("tab_manage_portfolio")},"#tab_account":function(){location.hash="#designer_account_0_5_-1";$("#tab_account").html(layoutTemplate.basicConsoleFrame)},"#tab_shopping_cart":function(){$("#tab_shopping_cart").html(layoutTemplate.basicConsoleFrame)},"#tab_rating":function(){$("#tab_rating").html(layoutTemplate.basicConsoleFrame)}};logging("SELECT tabName="+e);globalVars.hasClicked++;1<=globalVars.hasClicked&&closeSidebar();if("function"===typeof f[e])f[e]();else logging("Undefined tab name")}},load:function(a,b){var e=b.tab.hash,f={"#tab_search_criteria":function(){searchCriteriaTabHandler()},"#tab_search_result":function(){logging("show search result")},"#tab_design_wall":function(){initTiles({id:"#designWallTiles",xSpace:150,ySpace:20},function(){$("#design_wall_scrollbar").tinyscrollbar_update("relative")},0)},"#tab_account":function(){initTiles({id:"#accountTiles",xSpace:150,ySpace:20},function(){$("#account_scrollbar").tinyscrollbar_update("relative")},0)},"#tab_messages":function(){void 0!=$("#messages_scrollbar")&&($("#messages_scrollbar").tinyscrollbar({scrollChanged:function(a){-510<a.position().top?$("#messages .messages-header").fadeOut():$("#messages .messages-header").fadeIn()}}),initTiles({},function(){$("#messages_scrollbar").tinyscrollbar_update("relative")},0))},"#tab_activity_designer":function(){logging("activity designer tab");init_raty_activity();initChart(chartPath+"/7");disableChartLink("#chart_week")},"#tab_activity_company":function(){logging("activity designer tab");init_raty_activity();initChart(chartPath+"/7");disableChartLink("#chart_week")},"#tab_activity":function(){init_raty_activity();initChart(chartPath+"/7");disableChartLink("#chart_week")},"#tab_rating_designer":initRaty,"#tab_rating_company":initRaty,"#tab_rating":initRaty,"#tab_manage_portfolio":function(){2<=globalVars.lockObject.portfolio+1?void 0==$(b.tab).attr("data-portfolio-id")?-1==location.hash.search("#portfolio_page")?location.hash="#portfolio_page_0_1":getPortfolioItemsByPage(portfolioProp.currentPage,!0,function(){globalVars.lockObject.portfolio=0},{container:"#tab_manage_portfolio",mask:"#portfolio_mask",url:getNewPortfolioItemsPath,pageProp:portfolioProp,data:portfolioResult,paginHandler:void 0,paginContainer:"#manage_portfolio_pagin",paginPrefix:"#portfolio_page",renderMode:"p"}):(globalVars.lockObject.portfolio=0,triggerHash("#pboard_page_"+$(b.tab).attr("data-portfolio-id")+"_0_1")):globalVars.lockObject.portfolio++},"#tab_manage_collections":function(){2<=globalVars.lockObject.collections+1?(logging("acquire 2 locks in load"),-1==location.hash.search("#collections_page")?location.hash="#collections_page_0_1":getPortfolioItemsByPage(portfolioProp.currentPage,!0,function(){logging("release mutex lock in load");globalVars.lockObject.collections=0},{paginPrefix:"#collections_page"})):(logging("collections give lock in load"),globalVars.lockObject.collections++)},"#tab_manage_board":function(){getBoardsByPage(boardsResult.portfolioId,boardProp.currentPage,boardProp.forceToReload,$(b.tab).attr("data-mode"))},"#tab_create_board":function(){logging("load create board tab");void 0==$("#portfolioId").attr("edit-mode")||!1==$("#portfolioId").attr("edit-mode")?$("#portfolioId").trigger("change"):$(".sale-type-credit").trigger("keyup");categoryMSInit()},"#tab_create_collection":function(){"true"!=$("#form_division").attr("edit-mode")&&getCategoryList($("#form_division").val(),{haveDontCareTag:!1})},"#tab_create_portfolio":function(){"true"!=$("#form_division").attr("edit-mode")&&getCategoryList($("#form_division").val(),{haveDontCareTag:!1})},"#tab_home_edit_mode":function(){editProfileTabHandler($(b.tab))},"#tab_home":function(){$("#skill_scrollbar").tinyscrollbar();$("#lang_scrollbar").tinyscrollbar();$("#about_you_scrollbar").tinyscrollbar();$("#misc_scrollbar").tinyscrollbar();$("#adoc_scrollbar").tinyscrollbar()},"#tab_alerts":function(){$("#alert_scrollbar").tinyscrollbar()}};if("function"===typeof f[e])f[e]();else logging("Undefined tab name")},show:function(a,b){var e=b.tab.hash,f={"#tab_search_criteria":function(){searchCriteriaTabHandler()},"#tab_activity":function(){logging("set raty value");init_raty_activity()},"#tab_manage_portfolio":function(){2<=globalVars.lockObject.portfolio+1?void 0==$(b.tab).attr("data-portfolio-id")?-1==location.hash.search("#portfolio_page")?location.hash="#portfolio_page_0_1":getPortfolioItemsByPage(portfolioProp.currentPage,!0,function(){globalVars.lockObject.portfolio=0},{container:"#tab_manage_portfolio",mask:"#portfolio_mask",url:getNewPortfolioItemsPath,pageProp:portfolioProp,data:portfolioResult,paginHandler:void 0,paginContainer:"#manage_portfolio_pagin",paginPrefix:"#portfolio_page",renderMode:"p"}):(globalVars.lockObject.portfolio=0,triggerHash("#pboard_page_"+$(b.tab).attr("data-portfolio-id")+"_0_1")):globalVars.lockObject.portfolio++;logging('<span style="color:#FF0000">content=>'+$("#portfolio_mask .data").html()+"</span>")},"#tab_manage_collections":function(){2<=globalVars.lockObject.collections+1?(logging("acquire 2 locks in show"),-1==location.hash.search("#collections_page")?location.hash="#collections_page_0_1":getPortfolioItemsByPage(portfolioProp.currentPage,!0,function(){logging("release mutex lock in show");globalVars.lockObject.collections=0},{paginPrefix:"#collections_page"})):(logging("collections give lock in show"),globalVars.lockObject.collections++)},"#tab_manage_board":function(){logging("Show Manage Boards=>"+portfolioProp.portfolioId)},"#tab_create_board":function(){logging("SHOW CREATE BOARD");categoryMSInit()},"#tab_create_portfolio":function(){},"#tab_search_result":function(){logging("sync shopping cart and market.");syncMarket()},"#tab_messages":function(){void 0!=$("#messages_scrollbar")&&($("#messages_scrollbar").tinyscrollbar({scrollChanged:function(a){-510<a.position().top?$("#messages .messages-header").fadeOut():$("#messages .messages-header").fadeIn()}}),initTiles({},function(){$("#messages_scrollbar").tinyscrollbar_update("relative")},0))},"#tab_home":function(){$("#skill_scrollbar").tinyscrollbar();$("#lang_scrollbar").tinyscrollbar();$("#about_you_scrollbar").tinyscrollbar();$("#misc_scrollbar").tinyscrollbar();$("#adoc_scrollbar").tinyscrollbar()},"#tab_home_edit_mode":function(){editProfileTabHandler($(b.tab))},"#tab_shopping_cart":function(){$("#checkout_scrollbar").tinyscrollbar()},"#tab_rating":function(){removeTabsFocusClass("tab_rating","hide")},"#tab_alerts":function(){$("#alert_scrollbar").tinyscrollbar()}};"function"===typeof f[e]?(logging("Execute "+f[e]+" handler"),f[e]()):logging("Undefined tab name handler")}});-1!=getIdByName("tab_search_result")&&$("#tabs").tabs("disable","tab_search_result");""==location.hash&&(getCart(),$("#tabs").tabs("select","tab_messages"));$(document).on("click keydown","#submit_search_criteria",function(){var a=$("#form_search_criteria").serialize(),a=a+"&timestamp="+$.now();getSearchResult(a,0,{onLoad:function(){$("#searchCriteriaLoadingPanel").fadeIn(0)},onSuccess:function(){searchResultProp.searchCriteria=encodeURIComponent(a);searchResultProp.isNewRequest=!0;location.hash="#search_page_0_2/"+encodeURIComponent(a)},onEmptyResult:function(){buildPopupMsg({content:"Your search did not return any results.<br/>Please redefine search criteria.",showOk:!0,title:"No search result"})},onError:function(a){buildPopupMsg({content:a.errorDescription,showOk:!0,title:"Error"})}})});$(document).on("click","#link_save_search_criteria",function(){closeSidebar();buildPopup({url:saveSearchCriteriaPath})});$(document).on("change","#form_open_saved_searches",function(){""!=this.value&&logging("select searches=>"+this.value)});$(document).on("change","#form_division_search_criteria",function(a){$("#form_product").html(layoutTemplate.optionDefaultProduct);$("#form_product_type").html(layoutTemplate.optionDefaultProductType);getCategoryList(a.target.value,{haveDontCareTag:!1})});$(document).on("change","#form_category",function(a){getProductList(a.target.value,{haveDontCareTag:!1})});$(document).on("change","#form_product",function(a){var b=$("#form_division_search_criteria").val(),e=$("#form_category").val();a=a.target.value;getProductTypeList(b,e,a,{haveDontCareTag:!1,data:"level1="+b+"&level2="+e+"&productTags="+encodeURIComponent(a),rememberOldValue:!1})});$(document).on("click","#clear_search_criteria",function(){$("#form_search_criteria")[0].reset();$("#form_skills").val("");$("#form_spl").val("");$("#form_exp").val("");$("#form_languages").val("");$("#form_skills,#form_languages,#form_spl,#form_exp").multipleSelect("refresh");$("#form_division_search_criteria").trigger("change")});$(document).on("click","#back_search_criteria",function(){logging("back");$("#tabs").tabs("enable","tab_search_criteria");$("#tabs").tabs("select","tab_search_criteria");$("#tabs").tabs("disable","tab_search_result")});$(document).on("click",".add_to_cart",function(a){moveToCart(a.currentTarget.id)});$(document).on("click","#add_to_cart",function(){closeSidebar();buildPopup({url:addToCartPath},function(){$(".popup .entity").tinyscrollbar()})});$(document).on("click","#empty_search_ok",function(){logging("back");$("#tabs").tabs("enable","tab_search_criteria");$("#tabs").tabs("select","tab_search_criteria");$("#tabs").tabs("disable","tab_search_result")});$(document).on("click",".nailBoardLink",function(){logging("boardLink clicked","#0F0");logging("hash=>"+location.hash,"#0F0");logging("data=>"+$(this).attr("data"),"#0F0");var a=$(this).attr("data");triggerHash("#search_page_"+searchResultProp.currentPage+"_"+searchResultProp.sortOption+"/"+searchResultProp.searchCriteria+"/#nail_"+a)});$(document).on("mouseenter","#content .item",function(){$(this).addClass("shadow")});$(document).on("mouseleave","#content .item",function(){$(this).removeClass("shadow")});$(document).on("mouseenter",".touchbar",function(){$(this).addClass("appear");$(this).removeClass("disappear");$(this).animate({opacity:.4},0)});$(document).on("mouseleave",".touchbar",function(){$(this).addClass("disappear");$(this).removeClass("appear");$(this).animate({opacity:0},0)});$(document).on("click","#search_carouselNext",function(){logging("next");logging("Current page=>"+searchResultProp.currentPage,"#00F");searchResultProp.currentPage++;searchResultProp.currentPage>=searchResultProp.totalPages&&(searchResultProp.currentPage=0);location.hash="#search_page_"+searchResultProp.currentPage+"_"+$("#sortSearchResult").val()+"/"+searchResultProp.searchCriteria});$(document).on("click","#search_carouselPrev",function(){logging("prev");logging("Current page=>"+searchResultProp.currentPage,"#00F");searchResultProp.currentPage--;0>searchResultProp.currentPage&&(searchResultProp.currentPage=searchResultProp.totalPages-1);location.hash="#search_page_"+searchResultProp.currentPage+"_"+$("#sortSearchResult").val()+"/"+searchResultProp.searchCriteria});$(document).on("change","#sortSearchResult",function(){logging("sort search result=>"+this.value);location.hash="#search_page_"+searchResultProp.currentPage+"_"+this.value+"/"+searchResultProp.searchCriteria});$(window).hashchange(function(){hashChange()});$(window).hashchange();$(window).resize(function(){resize();globalVars.isSidebarOpened&&$("#sidebar_scrollbar").tinyscrollbar_update()});$(document).on("click","#sidebarToggle",function(){!1==globalVars.isSidebarOpened?openSidebar():closeSidebar()});$(document).on("mouseenter","#sidebarToggle",function(){$("#sidebarToggle").toggleClass("selected")});$(document).on("mouseleave","#sidebarToggle",function(){$("#sidebarToggle").toggleClass("selected")});$(document).on("mouseenter","#sidebar",function(){globalVars.isSidebarOpened&&clearTimeout(globalVars.sidebarTimer)});$(document).on("mouseleave","#sidebar",function(){globalVars.isSidebarOpened&&(globalVars.sidebarTimer=setTimeout(function(){closeSidebar()},appConfig.sidebarCloseDuration))});$(document).on("click","#sidebar_alerts",function(){logging("alerts");triggerHash("#alerts")});$(document).on("click","#sidebar_messages",function(){logging("messages");triggerHash("#messages_page_1")});$(document).on("click",".drawer_boardId",function(){logging("board id=>"+$(this).attr("data"));showWindow($(this).attr("data"))});$(document).on("click","#prevItem",function(){logging($("#prevItem").attr("href"));location.hash=$("#prevItem").attr("href")});$(document).on("click","#nextItem",function(){logging($("#nextItem").attr("href"));location.hash=$("#nextItem").attr("href")});$(document).on("click","#referralButton",function(){logging("referral button click");closeSidebar();buildPopup({url:referralPath})});$(document).on("click","#update_membership",function(){logging("update membership")});$(document).on("click","#update_new",function(a){logging("update new image");closeSidebar();buildUploadPopup({url:uploadPicturesPath,mode:"LOGO",filetype:"ai",previewArea:"#previewImage",onUploadSuccess:function(b){logging("USER LOGO UPLOAD FINISHED=>"+a.filename_400);-1!=b.filestatus&&(globalVars.isChangedWithoutSubmit=!0,$("#form_logo_image_url").val("/400x400/"+b.filename_400),$("#previewImage").html('<i></i><img src="/400x400/'+b.filename_400+'" />'))}})});$(document).on("click","#manage_referrals",function(){logging("manage referrals");closeSidebar();buildPopup({url:manageReferralsPath},function(){$(".popup .entity").tinyscrollbar()})});$(document).on("click","#change_password",function(){buildPopup({url:changePasswordPath})});$(document).on("click","#submitChangePassword",function(){submitChangePasswordForm()});$(document).on("keydown","input[type=password]",function(a){if(32==a.which)return!1});$(document).on("keyup","#newPwd",function(){$("#result").html(checkStrength($("#newPwd").val()))});$(document).on("click","#view_terms",function(){buildPopup({url:viewTermsPath},function(){$("#termScrollbar").tinyscrollbar();$(".anchor").each(function(a){$(".rightArea .block:nth-child("+(a+1)+")").animate({top:$(this).position().top})})})});$(document).on("change","#website",function(){/^http:\/\//.test(this.value)||(this.value="http://"+this.value);/^https:\/\//.test(this.value)||(this.value="https://"+this.value)});$(document).on("change","#form_country",function(){238!=$(this).val()?($("#form_state").attr("disabled","disabled"),$("#form_state").parent().addClass("inactive")):($("#form_state").removeAttr("disabled"),$("#form_state").parent().removeClass("inactive"))});$(document).on("click","#edit_profile_company",function(){logging("show edit mode");$("#tabs").tabs("select","tab_home_edit_mode")});$(document).on("click","#save_company",function(){doSaveCompany()});$(document).on("click","#cancel_company",function(){logging("cancel company");$("#tabs").tabs("select","tab_home")});$(document).on("click","#edit_profile_designer",function(){$("#tabs").tabs("select","tab_designer_home_edit_mode")});$(document).on("click","#save_designer",function(){doSaveDesigner()});$(document).on("click","#cancel_designer",function(){logging("cancel designer");$("#tabs").tabs("select","tab_home")});$(document).on("click","#upload_doc",function(){buildUploadPopup({url:uploadPicturesPath,mode:"files",filetype:"files",previewArea:"",onUploadSuccess:function(a){$("#file_result").html('<div class="added-file">'+a.original_filename+'<span class="added-file-delete" data="1"></span></div>');$("#adoc_oname").val(a.original_filename);$("#adoc_type").val(a.filename_ext);$("#adoc_iname").val(a.filename)}})});$(document).on("click",".added-file-delete",function(){$("#file_result").html("").removeClass("added-file");$("#adoc_oname").val("");$("#adoc_type").val("");$("#adoc_iname").val("")});$(document).on("keyup change","#form_edit_profile input, #form_edit_profile select, #form_edit_profile textarea, #form_logo_image_url",function(){profileScore()});$("#profileScore").livequery(function(){$(this).qtip({position:{my:"right center",at:"center left",adjust:{screen:!0,mouse:!1}},content:{text:$("#qtipDataCarrier").html()},style:{classes:"qtip-light qtip-shadow"},show:{event:"click focus"},hide:{event:""}})});$(document).on("click",".profile-progress-why",function(){buildPopup({url:whyCompleteProfilePath,onClose:function(){$("#profileScore").qtip("show")}})});$(document).on("click",".ms-add-other-button",function(){addOtherToMS($(this))});$(document).on("change","#form_education, #form_specialty, #form_expertise",function(){var a=$(this);"-2"==a.val()?(a.next().removeClass("hide"),a.next().removeAttr("disabled").focus()):(a.next().addClass("hide"),a.next().attr("disabled","disabled"))});$(document).on("change","#select_sort_design_wall",function(a){logging("SORT=>"+a.currentTarget.value);location.hash="#design_wall_0_"+a.currentTarget.value+"_1"});$(document).on("click",".userinfo",function(){logging("click user id=>"+encodeURIComponent($(this).attr("data")));closeSidebar();buildPopup({url:userInfoPath+"?profileUserName="+encodeURIComponent($(this).attr("data"))+"&profileUserId="},function(){$(".popup .entity").tinyscrollbar()})});$(document).on("click",".designWallBoardId",function(){logging("click board id=>"+$(this).attr("data"),"#FF0");showWindow($(this).attr("data"))});$(document).on("click","#designWallTiles .Tile .touchArea",function(){showWindow($(this).attr("data"))});$(document).on("mouseenter","#designWallTiles .Tile",function(){$(this).addClass("hover")});$(document).on("mouseleave","#designWallTiles .Tile",function(){$(this).removeClass("hover")});$(document).on("click","#designWallTiles .Tiles-next",function(){nextTile({id:"#designWallTiles"})});$(document).on("click","#designWallTiles .Tiles-pre",function(){prevTile({id:"#designWallTiles"})});$(document).on("click",".download-button",function(){0>=$(".downloadHint").length?$("body").append(layoutTemplate.downloadHint):$(".downloadHint").fadeIn(0);setTimeout(function(){$(".download-hint").fadeOut(1e3)},3e3)});$(document).on("change","#select_sort_account",function(){logging("SORT=>"+$(this).val());var a=$(this).val();location.hash="#designer_account_0_"+a+"_1"});$(document).on("click",".designerAccountBoardId",function(){logging("click board id=>"+$(this).attr("data"),"#FF0");showWindow($(this).attr("data"))});$(document).on("click",".designerAccountUserId",function(){logging("click user id=>"+encodeURIComponent($(this).attr("data")));closeSidebar();buildPopup({url:userInfoPath+"?profileUserName=&profileUserId="+encodeURIComponent($(this).attr("data"))},function(){$(".popup .entity").tinyscrollbar()})});$(document).on("click","#accountTiles .Tile .touchArea",function(){showWindow($(this).attr("data"))});$(document).on("mouseenter","#accountTiles .Tile",function(){$(this).addClass("hover")});$(document).on("mouseleave","#accountTiles .Tile",function(){$(this).removeClass("hover")});$(document).on("click","#accountTiles .Tiles-next",function(){nextTile({id:"#accountTiles"})});$(document).on("click","#accountTiles .Tiles-pre",function(){prevTile({id:"#accountTiles"})});$(document).on("click","#submit_rating",function(){logging("submit rating designer");var a=$("#form_rating").serialize();$.ajax({url:ratingPath,type:"POST",data:a,beforeSend:function(){logging("Show Loading message");buildPopupMsg({content:'<span style="color:blue;">Please wait...<span><br /><img src="/images/spinner_small.gif" style="margin-top:30px;"/>',title:"Please Wait",showOk:!1,closeByOverlay:!1,effect:!1})},success:function(a){a.hasError?buildPopupMsg({content:a.error,showOk:!0}):buildPopupMsg({content:"Thank you for your rating.",title:"Rate successfully",showOk:!0,onOk:function(){closePopupMsg();triggerHash("#messages_page_1")},onClose:function(){triggerHash("#messages_page_1")}})},error:function(){buildPopupMsg({content:"Submit error, please try again.",showOk:!0})}})});$(document).on("click","#cancel_rating",function(){logging("cancel rating designer");$("#tabs").tabs("select","tab_alerts")});$(document).on("click",".backHistory",function(){history.back()});$(document).on("click",".ratingUserInfo",function(){buildPopup({url:userInfoPath+"?profileUserName=&profileUserId="+encodeURIComponent($(this).attr("data"))},function(){$(".popup .entity").tinyscrollbar()})});$(document).on("click",".ratingBoardInfo",function(){showWindow($(this).attr("data"))});var a="ASC",b="ASC";$(document).on("click","#messages_all",function(){"ASC"==a?($("#messages_all_arrow").addClass("upArrow"),a="DSC",logging("all messages DSC")):($("#messages_all_arrow").removeClass("upArrow"),a="ASC",logging("all messages ASC"))});$(document).on("click","#messages_newest",function(){"ASC"==b?($("#messages_newest_arrow").addClass("upArrow"),b="DSC",logging("newest messages DSC")):($("#messages_newest_arrow").removeClass("upArrow"),b="ASC",logging("newest messages ASC"))});$(document).on("click",".messageBoardId",function(){logging("board id=>"+$(this).attr("data"));showWindow($(this).attr("data"))});$(document).on("click",".messages_fromUserId",function(){logging("from user id=>"+$(this).attr("data")+" ; path=>"+userInfoPath+"?profileUserName=&profileUserId="+$(this).attr("data"));closeSidebar();buildPopup({url:userInfoPath+"?profileUserName=&profileUserId="+$(this).attr("data")},function(){$(".popup .entity").tinyscrollbar()
})});$(document).on("click","#messageTiles .Tile .touchArea",function(){triggerHash("#message_detail_"+$(this).attr("data"))});$(document).on("mouseenter","#messageTiles .Tile",function(){$(this).addClass("hover")});$(document).on("mouseleave","#messageTiles .Tile",function(){$(this).removeClass("hover")});$(document).on("click","#messageTiles .Tiles-next",function(){nextTile({})});$(document).on("click","#messageTiles .Tiles-pre",function(){prevTile({})});$(document).on("click","#send_reply",function(){sendMessageInMessageDetail()});$(document).on("click","#back_to_messages",function(){globalVars.isChangedWithoutSubmit?showConfirmation("You are about to leave the page with unsaved data, Would you like to continue?","Confirmation","changedWithoutSave",{onOk:function(){closePopupMsg();globalVars.isChangedWithoutSubmit=!1;location.hash="#messages_page_1";$("#tab_messages").html(layoutTemplate.basicConsoleFrame)}}):(location.hash="#messages_page_1",$("#tab_messages").html(layoutTemplate.basicConsoleFrame))});$(document).on("click","#messages_select_all",function(){$(".form_message_check").attr("checked","checked")});$(document).on("click","#messages_select_none",function(){$(".form_message_check").removeAttr("checked")});$(document).on("click",".messageDetailBoardId",function(){logging("board id=>"+$(this).attr("data"));showWindow($(this).attr("data"))});$(document).on("click",".messageDetailDesignerId",function(){logging("user id=>"+$(this).attr("data"));closeSidebar();buildPopup({url:userInfoPath+"?profileUserName=&profileUserId="+$(this).attr("data")},function(){$(".popup .entity").tinyscrollbar()})});$(document).on("click","#buttonShowMore",function(){logging("Show more messages","#FF0");$("#buttonShowMore").fadeOut(function(){$("#message_detail .message_content .hidden").removeClass("hidden");wrapMessageDetail(3);$("#message_content_scrollbar").tinyscrollbar_update("relative");$("#buttonShowMore").remove()})});$(document).on("keyup","#messageContent",function(){var a=$("#messageContent").val().length;$("#leftWords").html(1e3-a)});$(document).on("click",".readMore",function(){$(this).prev().animate({height:$(this).prev().children(".context").height()+5},function(){$("#message_content_scrollbar").tinyscrollbar_update("relative")});$(this).removeClass("readMore");$(this).addClass("hideContext").children("a").html("Hide")});$(document).on("click",".hideContext",function(){$(this).prev().animate({height:72},function(){$("#message_content_scrollbar").tinyscrollbar_update("relative")});$(this).removeClass("hideContext");$(this).addClass("readMore").children("a").html("Read more...")});$(document).on("click","#expandAll",function(){if(0<$("#buttonShowMore").length)$("#buttonShowMore").fadeOut(10,function(){$("#message_detail .message_content .hidden").removeClass("hidden");wrapMessageDetail(3);$("#message_content_scrollbar").tinyscrollbar_update("relative");for(var a=$(".readMore").toArray(),b=0;b<a.length;b++)$(a[b]).trigger("click");$("#buttonShowMore").remove()});else for(var a=$(".readMore").toArray(),b=0;b<a.length;b++)$(a[b]).trigger("click");$("#expandAll").attr("id","collapseAll");$("#collapseAll").html("Collapse All")});$(document).on("click","#collapseAll",function(){for(var a=$(".hideContext").toArray(),b=0;b<a.length;b++)$(a[b]).trigger("click");$("#collapseAll").attr("id","expandAll");$("#expandAll").html("Expand All")});$(document).on("click","#upload_ai",function(){logging("upload ai");var a=$(this).attr("data-mode").toLowerCase(),b="#create_board_review";"p"==a&&(b="");closeSidebar();buildUploadPopup({url:uploadPicturesPath,mode:"BOARD",filetype:"ai",previewArea:b,event:"upload_finished_board",onClose:function(){},onUploadSuccess:function(b){logging("upload_finished_board=>"+b.filename);-1!=b.filestatus&&(globalVars.isChangedWithoutSubmit=!0,$("#form_board_image_url").val(b.filename),$("#form_board_image_type").val(b.filename_ext),$("#form_board_image_urL_file").val(b.filename_400),$("#form_board_image_urL_thumb").val(b.filename_100),$("#form_board_image_urL_main").val(b.filename_original),"p"==a&&$("#create_board_review").html('<i></i><img src="/400x400/'+b.filename_400+'" />'))}})});$(document).on("click","#create_board_review",function(){logging("Get enlarge image");""!=$("#form_board_image_urL_main").val()&&showEnlargeImage($("#form_board_image_urL_main").val())});$(document).on("click","#new_portfolio",function(){logging("new portfolio");logging("CREATE PORTFOLIO=>"+$("#form_new_portfolio").val());$("#tabs").tabs("select","tab_create_portfolio");globalVars.prePortfolioName=$("#form_new_portfolio").val()});$(document).on("click",'#saleTypeTable input[type="radio"]',function(a){a=a.currentTarget.id.split("_");clearSaleTypeTable();var b=$("#"+a[1]+"_"+a[2]+" .sale-type-credit-static").html();$("#"+a[1]+"_"+a[2]).html('<input name="saletype_'+a[2]+'_cost" type="text" id="form_saletype_'+a[2]+'_cost" class="cost sale-type-credit no-dec" value="'+b+'" maxlength="3"/>&nbsp;=&nbsp;$&nbsp;<span class="sale-type-conversion" data-row="'+a[2]+'">0</span>')});$(document).on("click","#create_board_calculate",function(){calculate()});$(document).on("click","#create_board_clear",function(){clear()});$(document).on("change",".cost",function(){calculate()});$(document).on("click","#save_create_board",function(a){var b=createBoardInputChecking(a);0==b.length?showConfirmation(messagesProp.save_create_board_confirmation,"Confirmation","save_create_board",{onOk:function(){unbindPopupMsgEvent();logging("Confirmation result=>"+a.trigger);logging("save create board");$("#form_publish_to_mp").val("0");createBoard(!1)}}):buildPopupMsg({content:"Below information is mandatory, we have highlighted the missing data:<br/>"+b.join("<br/>"),showOk:!0})});$(document).on("click","#publish_create_board",function(a){var b=createBoardInputChecking(a);0==b.length?showConfirmation(messagesProp.publish_create_board_confirmation+messagesProp.confirmation_continue,"Confirmation","publish_create_board",{onOk:function(){unbindPopupMsgEvent();logging("Confirmation result=>"+a.trigger);logging("publish board");$("#form_publish_to_mp").val("1");createBoard(!0)}}):buildPopupMsg({content:"Below information is mandatory, we have highlighted the missing data:<br/>"+b.join("<br/>"),showOk:!0})});$(document).on("click","#save_create_pboard",function(a){var b=createPBoardInputChecking(a);0==b.length?showConfirmation(messagesProp.save_create_pboard_confirmation+"<br/>"+messagesProp.confirmation_continue,"Confirmation","save_create_board",{onOk:function(){unbindPopupMsgEvent();logging("Confirmation result=>"+a.trigger);logging("save create board");$("#form_publish_to_mp").val("0");createBoard(!1,createPBoardPath,"p")}}):buildPopupMsg({content:"Below information is mandatory, we have highlighted the missing data:<br/>"+b.join("<br/>"),showOk:!0})});$(document).on("click","#publish_create_pboard",function(a){var b=createPBoardInputChecking(a);0==b.length?showConfirmation(messagesProp.publish_create_pboard_confirmation+"<br/>"+messagesProp.confirmation_continue,"Confirmation","publish_create_board",{onOk:function(){unbindPopupMsgEvent();logging("Confirmation result=>"+a.trigger);logging("publish board");$("#form_publish_to_mp").val("2");createBoard(!0,createPBoardPath,"p")}}):buildPopupMsg({content:"Below information is mandatory, we have highlighted the missing data:<br/>"+b.join("<br/>"),showOk:!0})});$(document).on("click","#back_to_collections",function(){logging("cancel create board");globalVars.isChangedWithoutSubmit?showConfirmation("You are about to leave the page with unsaved data, Would you like to continue?","Confirmation","changedWithoutSaveOnCreateBoard",{onOk:function(){closePopupMsg();globalVars.isChangedWithoutSubmit=!1;triggerHash("#collections_page_"+portfolioProp.currentPage+"_1")}}):triggerHash("#collections_page_"+portfolioProp.currentPage+"_1")});$(document).on("click","#back_to_portfolio",function(){logging("cancel create board");globalVars.isChangedWithoutSubmit?showConfirmation("You are about to leave the page with unsaved data, Would you like to continue?","Confirmation","changedWithoutSaveOnCreateBoard",{onOk:function(){closePopupMsg();globalVars.isChangedWithoutSubmit=!1;triggerHash("#portfolio_page_"+portfolioProp.currentPage+"_1")}}):triggerHash("#portfolio_page_"+portfolioProp.currentPage+"_1")});$(document).on("click","#back_to_boards",function(){logging("cancel create board");var a=$(this).attr("data-portfolio");globalVars.isChangedWithoutSubmit?showConfirmation("You are about to leave the page with unsaved data, Would you like to continue?","Confirmation","changedWithoutSaveOnCreateBoard",{onOk:function(){closePopupMsg();globalVars.isChangedWithoutSubmit=!1;triggerHash("#board_page_"+a+"_"+boardProp.currentPage+"_1")}}):triggerHash("#board_page_"+a+"_"+boardProp.currentPage+"_1")});$(document).on("click","#back_to_pboards",function(){logging("cancel create board");var a=$(this).attr("data-portfolio");globalVars.isChangedWithoutSubmit?showConfirmation("You are about to leave the page with unsaved data, Would you like to continue?","Confirmation","changedWithoutSaveOnCreateBoard",{onOk:function(){closePopupMsg();globalVars.isChangedWithoutSubmit=!1;triggerHash("#pboard_page_"+a+"_"+boardProp.currentPage+"_1")}}):triggerHash("#pboard_page_"+a+"_"+boardProp.currentPage+"_1")});$(document).on("change","#portfolioId",function(a){logging("portfolio id change=>"+a.target.value);$("#product").html("");$("#productType").html("");logging("AJAX url=>"+productListByPortfolioPath+"/"+a.target.value);$.ajax({url:productListByPortfolioPath+"/"+a.target.value,type:"GET",beforeSend:function(){$("#product + .mselect").html("Loading...")},success:function(a){var b="";0>=a.list.length&&(b+=layoutTemplate.optionEmpty);for(var c=0;c<a.list.length;c++)b+='<option value="'+a.list[c].name+'">'+a.list[c].name+"</option>";$("#product").html(b);$("#productType").html(layoutTemplate.optionEmpty);refershMultiselect("#product");refershMultiselect("#productType")}})});$(document).on("click","#showCommission",function(){logging("show commission");showCommission()});$(document).on("click","#price_guideline_link",function(){logging("show price guide line");closeSidebar();buildPopup({url:showPriceGuidelinePath},function(){$("#termScrollbar").tinyscrollbar()})});$(document).on("change",'#expDays input[name="expirationDays"]',function(){$.ajax({url:computeBoardExpDatePath+"?days="+this.value,type:"GET",beforeSend:function(){$("#current_exp_days span").html("Computing..")},success:function(a){$("#current_exp_days span").html(a.expirationDate)}})});$(document).on("keyup",".sale-type-credit",function(){convertCreditToUsd($(this))});$(document).on("click","#save_create_portfolio",function(){logging("save create portfolio");createPortfolio($(this).attr("edit-mode"),$(this).attr("data-mode").toLowerCase())});$(document).on("click","#cancel_create_portfolio",function(){logging("cancel create portfolio");$("#tabs").tabs("select","tab_manage_collections")});$(document).on("click","#add_new_board",function(){"p"==$(this).attr("data-mode")?location.hash="#create_board":"c"==$(this).attr("data-mode")?location.hash="#create_board":logging("data mode does not specified")});$(document).on("change","#form_division",function(a){logging("division change=>"+a.target.value);getCategoryList(a.target.value,{haveDontCareTag:!1})});$(document).on("click",".delete-portfolio-image",function(){var a=$(this).attr("role");1==$(".active_status[role="+a+"]").val()?($(".active_status[role="+a+"]").val(0),$(this).prop("checked",!0)):($(".active_status[role="+a+"]").val(1),$(this).prop("checked",!1))});$(document).on("click","#chart_today",function(){logging("show today");initChart(chartPath+"/1");disableChartLink("#chart_today")});$(document).on("click","#chart_week",function(){logging("show week");initChart(chartPath+"/7");disableChartLink("#chart_week")});$(document).on("click","#chart_month",function(){logging("show month");initChart(chartPath+"/30");disableChartLink("#chart_month")});$(document).on("click",".gridBoardId",function(){logging("board id=>"+$(this).attr("data"));showWindow($(this).attr("data"))});$(document).on("click",".gridDesignerName",function(){logging("click user id=>"+encodeURIComponent($(this).attr("data")));closeSidebar();buildPopup({url:userInfoPath+"?profileUserName=&profileUserId="+encodeURIComponent($(this).attr("data"))},function(){$(".popup .entity").tinyscrollbar()})});$(document).on("jqplotDataClick","#activity_chart",function(a,b,e,f){logging(a+";"+b+";"+e);logging(f)});$(document).on("click","#clear_manage_portfolio",function(){$("input").removeAttr("checked")});$(document).on("click","#add_manage_portfolio",function(){logging("add portfolio");"p"==$(this).attr("data-mode")?($("#tabs").tabs("url",getIdByName("tab_create_portfolio"),manageNewPortfolioPath),$("#tabs").tabs("select","tab_create_portfolio")):"c"==$(this).attr("data-mode")?($("#tabs").tabs("url",getIdByName("tab_create_collection"),managePortfolioPath),$("#tabs").tabs("select","tab_create_collection")):logging("data-mode does not specified")});$(document).on("click","#delete_manage_portfolio",function(){logging("delete portfolio");deletePortfolio()});$(document).on("click","#manage_portfolio .item a",function(){"c"==$(this).attr("data-mode").toLowerCase()?location.hash="#board_page_"+$(this).attr("data")+"_0_1":"p"==$(this).attr("data-mode").toLowerCase()?location.hash="#pboard_page_"+$(this).attr("data")+"_0_1":logging("unspecified data mode")});$(document).on("mouseenter","#manage_portfolio a",function(){$(this).children("div").eq(0).addClass("shadow")});$(document).on("mouseleave","#manage_portfolio a",function(){$(this).children("div").eq(0).removeClass("shadow")});$(document).on("mouseenter","#manage_portfolio",function(){$("#manage_portfolio_frame .touchbar").addClass("appear");$("#manage_portfolio_frame .touchbar").removeClass("disappear");$("#manage_portfolio_frame .touchbar").animate({opacity:.4},"fast")});$(document).on("mouseleave","#manage_portfolio",function(){$("#manage_portfolio_frame .touchbar").addClass("disappear");$("#manage_portfolio_frame .touchbar").removeClass("appear");$("#manage_portfolio_frame .touchbar").animate({opacity:0},"fast")});$(document).on("click","#collections_carouselPrev",function(){logging("portfolio prev");portfolioProp.currentPage--;0>portfolioProp.currentPage&&(portfolioProp.currentPage=portfolioProp.totalPages-1);triggerHash("#collections_page_"+portfolioProp.currentPage+"_0")});$(document).on("click","#collections_carouselNext",function(){logging("portfolio next");portfolioProp.currentPage++;portfolioProp.currentPage>=portfolioProp.totalPages&&(portfolioProp.currentPage=0);triggerHash("#collections_page_"+portfolioProp.currentPage+"_0")});$(document).on("click","#portfolio_carouselPrev",function(){logging("portfolio prev");portfolioProp.currentPage--;0>portfolioProp.currentPage&&(portfolioProp.currentPage=portfolioProp.totalPages-1);triggerHash("#portfolio_page_"+portfolioProp.currentPage+"_0")});$(document).on("click","#portfolio_carouselNext",function(){logging("portfolio next");portfolioProp.currentPage++;portfolioProp.currentPage>=portfolioProp.totalPages&&(portfolioProp.currentPage=0);triggerHash("#portfolio_page_"+portfolioProp.currentPage+"_0")});$(document).on("click",".delete_portfolio",function(){logging("delete portfolio=>"+parseInt($(this).attr("data")));var a=parseInt($(this).attr("data")),b=$(this).attr("data-mode").toLowerCase();"c"==b?showConfirmation("The collection is going to be deleted. Would you like to Coninue?","Confirmation","delete_portfolio",{onOk:function(){unbindPopupMsgEvent();deletePortfolio(a,"collections_page")},onCancel:function(){logging("cancel")}}):"p"==b&&showConfirmation("The portfolio is going to be deleted. Would you like to Coninue?","Confirmation","delete_portfolio",{onOk:function(){unbindPopupMsgEvent();deletePortfolio(a,"portfolio_page")},onCancel:function(){logging("cancel")}})});$(document).on("click","#show_all_portfolios",function(){logging("Show all portfolio","#F90");$("#tabs").tabs("select","tab_manage_collections")});$(document).on("change","#collection_catalog",function(a){logging("change location=>"+a.currentTarget.value);location.hash="#board_page_"+a.currentTarget.value+"_0"});$(document).on("change","#portfolio_catalog",function(a){logging("change location=>"+a.currentTarget.value);location.hash="#pboard_page_"+a.currentTarget.value+"_0"});$(document).on("click","#publish_manage_board",function(){logging("publish board")});$(document).on("click","#add_manage_board",function(){logging("add new board under portfolio =>"+$("#collection_catalog").val());location.hash="#create_board_"+$("#collection_catalog").val()});$(document).on("click","#add_manage_page",function(){logging("add new board under portfolio =>"+$("#portfolio_catalog").val());location.hash="#create_pboard_"+$("#portfolio_catalog").val()});$(document).on("click","#delete_manage_board",function(){logging("delete selected board");deleteBoard()});$(document).on("click","#clear_manage_board",function(){$("#form_boards")[0].reset()});$(document).on("mouseenter","#manage_board .item",function(){$(this).addClass("shadow")});$(document).on("mouseleave","#manage_board .item",function(){$(this).removeClass("shadow")});$(document).on("click","#board_carouselPrev",function(){prevBoardPage()});$(document).on("click","#board_carouselNext",function(){nextBoardPage()});$(document).on("click","#pboard_carouselPrev",function(){prevBoardPage("pboard_page")});$(document).on("click","#pboard_carouselNext",function(){nextBoardPage("pboard_page")});$(document).on("refresh_board","body",function(a,b,e){logging("REFRESH BOARD BY EVENT");refreshBoards(b,e)});$(document).on("click",".designerBoardLink",function(){logging("boardLink clicked","#0FF");logging("hash=>"+location.hash,"#0FF");logging("data=>"+$(this).attr("data"),"#0FF");var a=$(this).attr("data");location.hash=="#board_item_"+a?(logging("trigger hash change"),$(window).hashchange()):location.hash="board_item_"+a});$(document).on("click",".delete_board",function(a){logging("delete board=>"+parseInt($(this).attr("data")));var b=$(this).attr("data"),e=$(this).attr("data-mode"),f="The board is going to be deleted. Would you like to continue?";"p"==e.toLowerCase()&&(f="The page is going to be deleted. Would you like to coninue?");showConfirmation(f,"Confirmation","delete_board",{onOk:function(){unbindPopupMsgEvent();logging("Confirmation result=>"+a.trigger);deleteBoard(b,e)}})});$(document).on("click",".togglePubstatus_board",function(a){logging("toggle board status to public=>"+$(this).attr("data"));var b=$(this).attr("data");showConfirmation('Your board is going to be <span style="color:#C30;">Published</span>. Continue ?',"Confirmation","togglePubstatus_board",{onOk:function(){unbindPopupMsgEvent();logging("Confirmation result=>"+a.trigger);ToggleStatusBoard(b)}})});$(document).on("click",".toggleHidstatus_board",function(a){logging("toggle board status to hidden=>"+$(this).attr("data"));var b=$(this).attr("data");showConfirmation('Your board is going to be <span style="color:#C30;">Unpublished</span>. Continue ?',"Confirmation","toggleHidstatus_board",{onOk:function(){unbindPopupMsgEvent();logging("Confirmation result=>"+a.trigger);ToggleStatusBoard(b)}})});$(document).on("click",".edit a",function(){editBoard($(this).attr("data"),$(this).attr("data-mode"))});$(document).on("click","#back_to_search_result",function(){logging("back to results");location.href=searchViewerPath});$(document).on("click","#shopping_cart_update",function(){logging("shopping cart update");$("#form_shopping_cart").serialize();logging("FORM DATA=>"+$("#form_shopping_cart").serialize());$.ajax({url:deleteMultiItemsPath,type:"POST",data:$("#form_shopping_cart").serialize(),success:function(a){logging("DELETE SUCCESS");globalVars.cart=a;checkShoppingCart(a.count);$("#tabs").tabs("load",getIdByName("tab_shopping_cart"))}})});$(document).on("click","#shopping_cart_terms",function(){closeSidebar();displayLatestTermAndConditions(CustomerSaleTermsPath)});$(document).on("click","#terms_ok",function(){logging("terms_ok");$("#form_checkOutTAndC").attr("checked","checked");"checked"==$("#terms_agree").attr("checked")?($('input[name="termsId"]').val(),closePopup(),$("#form_checkOutTAndC").attr("checked","checked")):"checked"==$("#terms_decline").attr("checked")&&(closePopup(),$("#form_checkOutTAndC").removeAttr("checked"))});$(document).on("click","#shopping_cart_checkout",function(){logging("check out")});$(document).on("submit","#form_shoppingcart_checkout",function(){logging("form_shoppingcart_checkout");if("checked"!=$("#form_checkOutTAndC").attr("checked"))return buildPopupMsg({content:"Please Accept the Sales Terms and conditions before proceeding to checkout. Thanks",showOk:!0}),!1;$("#shopping_cart_checkout").prop("disabled",!0);$("#form_shoppingcart_checkout").prop("disabled",!0);logging("checkout","#F00");$("#paynowMask").css("z-index","10")});$(document).on("click",".checkoutBoardId",function(){logging("board id=>"+$(this).attr("data"));showWindow($(this).attr("data"))});$(document).on("click",".checkoutDesignerId",function(){logging("designer id=>"+$(this).attr("data"));closeSidebar();buildPopup({url:userInfoPath+"?profileUserName=&profileUserId="+$(this).attr("data")},function(){$(".popup .entity").tinyscrollbar()})});$(document).on("click","#checkoutError",function(){buildPopupMsg({content:"Your transaction amount has to be less than $10,000.00, please remove some items or please contact us for further help. Thank You.",showOk:!0,onOk:function(){closePopupMsg()}})});$(document).on("click","#shopping_cart .checkbox input[type=checkbox]",function(){$("#shopping_cart_update").stop(!0,!0);$("#shopping_cart_update").addClass("gray",400).removeClass("gray",400).addClass("gray",400).removeClass("gray",400).addClass("gray",400).removeClass("gray",400)});$(document).on("click","#back_to_search_results",function(){logging("back to search results");closePopup()});$(document).on("click","#to_checkout",function(){logging("to checkout");closePopup();triggerHash("#shopping_cart")});$(document).on("click",".shoppingCartBoardId",function(){$(".qtip.qtip-active").css("display","none");logging("board id=>"+$(this).attr("data"));showWindow($(this).attr("data"))});$(document).on("click",".shoppingCartDesignerId",function(){logging("designer id=>"+$(this).attr("data"));closeSidebar();buildPopup({url:userInfoPath+"?profileUserName=&profileUserId="+$(this).attr("data")},function(){$(".popup .entity").tinyscrollbar()})});$(document).on("click","#add_to_shopping_cart",function(){logging("add to cart","#00F");var a=$(this).attr("data");addToCart(a,function(){$("#add_to_shopping_cart").remove()})});$(document).on("click","#remove_from_shopping_cart",function(){logging("remove from cart","#00F");removeFromCart($(this).attr("data"))});$(document).on("click","#form_send_comment",function(){logging("send message");sendMessage()});$(document).on("click",".boards_suggestion_boardId",function(){logging("show board=>"+$(this).attr("data"));triggerHash("#board_item_"+$(this).attr("data"))});$(document).on("click",".enlargeImage",function(){showEnlargeImage($(this))});$(document).on("keydown","#form_comment_messageBody",function(a){(13==a.which||8==a.which)&&$("#board_detail_scrollbar").tinyscrollbar_update("relative")});$(document).on("click",".board-gallery-item",function(){$("#board_detail .leftArea .pic .main-image-wrapper").html();void 0!=$(this).attr("image-width")?$(".enlargeImage").attr("image-width",$(this).attr("image-width")):$(".enlargeImage").removeAttr("image-width");void 0!=$(this).attr("image-height")?$(".enlargeImage").attr("image-height",$(this).attr("image-height")):$(".enlargeImage").removeAttr("image-height");if("true"==$(this).attr("image-actual-size")){var a='<img src="/400x400/'+$(this).attr("image-data1")+'" />';$("#board_detail .leftArea .pic .main-image-wrapper").html(a);$(".enlargeImage").css("display","none");$("#board_detail .leftArea-hint").html("(Actual size)")}else a='<a href="/bigimage/'+$(this).attr("image-data")+'" class ="cloud-zoom" id="zoom1" rel="zoomWidth:450, softFocus: false"><img src="/400x400/'+$(this).attr("image-data1")+'" /></a>',$("#board_detail .leftArea .pic .main-image-wrapper").html(a),$("#board_detail .leftArea-hint").html("(Rollover image to zoom detail)"),1>$("#board_detail .enlargeImage").length&&$("#board_detail .leftArea .pic").append('<span class="enlargeOption"><a class="enlargeImage" image-data="">[+] Enlarge</a></span>'),$(".enlargeImage").css("display","block"),$(".enlargeImage").attr("image-data",$(this).attr("image-data"))});$(document).on("click","#referral_submit",function(){logging($("#form_referral").serialize());logging("referral submit");$.ajax({url:submitReferralPath,type:"POST",dataType:"json",data:$("#form_referral").serialize(),beforeSend:function(){$("#addReferralResult").css("color","blue").html("Processing...");$("#referral_submit").attr("disabled","disabled")},error:function(){$("#addReferralResult").css("color","red").html("Process error, please submit again. Thank you.");setTimeout(function(){$("#addReferralResult").html("")},5e3);$("#referral_submit").removeAttr("disabled")},success:function(a){$("#referral_submit").removeAttr("disabled");logging("Send referral data success");"SUCCESS"==a[0]?($("#addReferralResult").css("color","blue"),$("#addReferralResult").html(a[1]),$("#form_referral")[0].reset(),isChangedWithoutSubmitOnPopup=!1):($("#addReferralResult").css("color","red"),$("#addReferralResult").html(a[1]))}})});$(document).on("click",".edit_referral",function(a){logging("edit referral=>"+a.currentTarget.id);temp=a.currentTarget.id.split("_");tableId=temp[2];$("#referral_firstname_"+tableId).html('<input type="text" name="firstName" maxlength="30" value="'+$("#referral_firstname_"+tableId).html()+'"></input>');$("#referral_lastname_"+tableId).html('<input type="text" name="lastName" maxlength="30" value="'+$("#referral_lastname_"+tableId).html()+'"></input>');$("#referral_phone_"+tableId).html('<input type="text" name="phone" maxlength="20" value="'+$("#referral_phone_"+tableId).html()+'"></input>');$("#referral_email_"+tableId).html('<input type="text" name="email" maxlength="50" value="'+$("#referral_email_"+tableId).html()+'"></input>');a='<a class="send_referral" id="send_referral_'+tableId+'">Update and Send</a>';$("#referral_action_"+tableId).html(a+"<br />&nbsp;")});$(document).on("click",".update_referral",function(a){doUpdateReferral(a)});$(document).on("click",".resend_noti",function(a){logging("resend referral email=>"+a.currentTarget.id,"#00F");temp=a.currentTarget.id.split("_");tableId=parseInt(temp[2]);$.ajax({url:resendReferralNotiPath+"/"+tableId,type:"POST",beforeSend:function(){var a='<a href="javascript:void(0)" class="resend_noti" id="resend_referral_'+tableId+'">Resend</a><img src="/images/spinner_small.gif" style="width:12px; height:12px;"/>',b='<a href="javascript:void(0)" class="edit_referral" id="edit_referral_'+tableId+'">Edit</a>';$("#referral_action_"+tableId).html(a+"<br />"+b)},success:function(a){var b='<a href="javascript:void(0)" class="resend_noti" id="resend_referral_'+tableId+'">Resend</a>',c='<a href="javascript:void(0)" class="edit_referral" id="edit_referral_'+tableId+'">Edit</a>';$("#referral_action_"+tableId).html(b+"<br />"+c);!1==a.hasError?($("#referral_firstname_"+tableId).html(a.result.firstName),$("#referral_lastname_"+tableId).html(a.result.lastName),$("#referral_phone_"+tableId).html(a.result.phone),$("#referral_email_"+tableId).html(a.result.email),$("#referral_status_"+tableId).html(a.result.status),$("#referral_datesent_"+tableId).html(a.result.dateSentString),$("#manageReferralTable tr:nth-child("+(tableId+1)+") td").stop(!0,!0),$("#manageReferralTable tr:nth-child("+(tableId+1)+") td").each(function(a){$(this).delay(50*a).addClass("blink",200).removeClass("blink",600)})):buildPopupMsg({content:"Resend Failure.<br /> Please click resend again. Thank you.",showOk:!0,title:"Resend Error"})}})});$(document).on("click",".send_referral",function(a){doUpdateReferral(a)});$(document).on("terms_agree","#popupContainer",function(){logging("terms agree")});$(document).on("terms_decline","#popupContainer",function(){logging("terms decline")});$(document).on("click","#remove_from_cart_bybid",function(){logging("remove_from_cart_bybid"+$(this).attr("data"));delete_from_cart_by_board_id($(this).attr("data"))});$(document).on("click","#feedbackButton",function(){buildPopupMsg({title:"Your feedback is valuable!",content:'<div style="color:#C30;">Dear users, your feedback is valuable to our product and helps us improve the features.<br /> Please send your thoughts and concerns to <a href="mailto://'+staticTextPack.feedbackEmailAddr+'">'+staticTextPack.feedbackEmailAddr+"</a><br />Thank you.</div>",showOk:!0,onOk:function(){closePopupMsg()}})});$(document).on("click","#logout",function(){logging("LOGOUT");logout()});$(document).on("click","#notifPopupClose",function(){$("#notifPopup").fadeOut();document.title=globalVars.title});$(document).on("click","#phone",function(){buildPopupMsg({content:'<img src="/images/splash/contact_info.png"/>',title:"CONTACT INFO",showOk:!0,closeByOverlay:!0,effect:!0})});$(document).on("click",".empty.w .close",function(){$(this).parent().css("display","none");navigate($(".li-portfolio"),!0)});$(document).on("click",".nav",function(){triggerHash("#portfolio_page_0_1")})});function initRaty(){logging("init raty");$(".readonly").toArray();$(".rating").raty({path:appConfig.ratyImgPath,cancel:!0,space:!0,width:"150px",click:function(a){var b=$(this).attr("id");$("#"+b+"_value").html(a);$("[name="+b+"]").val(a)}});$(".readonly").raty({path:appConfig.ratyImgPath,cancel:!0,space:!0,width:"155px",readOnly:!0});$(".partial_rating").raty({path:appConfig.ratyImgPath,cancel:!0,space:!0,width:"150px",click:function(a){var b=$(this).attr("id");logging("raty item=>"+b);$("#"+b+"_value").html(a);$("[name="+b+"]").val(a);a=b.split("_");for(var b=$("#group_"+a[1]+" .item").size()-1,c=0,d=0,d=1;d<=b;d++)c=""==$("#"+a[0]+"_"+a[1]+"_"+d+"_q_value").html()?c+0:c+parseInt($("#"+a[0]+"_"+a[1]+"_"+d+"_q_value").html()),c=""==$("#"+a[0]+"_"+a[1]+"_"+d+"_p_value").html()?c+0:c+parseInt($("#"+a[0]+"_"+a[1]+"_"+d+"_p_value").html()),c=""==$("#"+a[0]+"_"+a[1]+"_"+d+"_r_value").html()?c+0:c+parseInt($("#"+a[0]+"_"+a[1]+"_"+d+"_r_value").html()),c=""==$("#"+a[0]+"_"+a[1]+"_"+d+"_c_value").html()?c+0:c+parseInt($("#"+a[0]+"_"+a[1]+"_"+d+"_c_value").html());d=(c/(4*b)).toFixed(1);$("#rate_"+a[1]+"_overall").html(d);$("#rate_"+a[1]).raty({path:appConfig.ratyImgPath,space:!0,width:"155px",readOnly:!0,half:!0,score:d});$("[name=rate_"+a[1]+"]").val(d)}})}function hashChange(){var a="#"+$.url().fsegment(1);if(-1!=a.search("#messages_page")){logging("Trigger Hash Change: messages page");var b=a.split("_"),c=b[2];logging("reload message page=>"+c);b=getIdByName("tab_messages");-1!=b?($("#tabs").tabs("url",b,messagesPagePath+"/"+c),logging("SELECT MESSAGES"),$("#tab_messages").html(layoutTemplate.basicConsoleFrame),$("#tabs").tabs("select",b),$("#tabs").tabs("load",b)):showConfirmation("You will leave admin console and redirect to messages tab in user console. Would you like to continue?","Confirmation","leaveAdminConsole",{onOk:function(){location.href=homepage+"#messages_page_1"}})}else if(-1!=a.search("#message_detail")){logging("Trigger Hash Change: message detail");var b=a.split("_"),c=b[2],d=b[3],e=b[4];logging("load message detail id=>"+c);b=getIdByName("tab_messages");$("#tabs").tabs("url",b,messageDetailPath+"/"+c+"/"+d+"/"+e);logging("SELECT MESSAGES");$("#tab_messages").html(layoutTemplate.basicConsoleFrame);$("#tabs").tabs("select",b);$("#tabs").tabs("load",b)}else if(-1!=a.search("#search_page")){var b=a.split("_"),f=b[2],g=b[3],j,b=!1;$("#sortSearchResult").val(g);void 0!=$.url().fsegment(2)&&(searchResultProp.searchCriteria!=$.url().fsegment(2)&&(b=!0),searchResultProp.searchCriteria=$.url().fsegment(2));
void 0!=g&&(searchResultProp.sortOption=g);logging("load search page=>"+f);logging("sort option=>"+g);$("#tabs").tabs("enable","tab_search_result");$("#tabs").tabs("select","tab_search_result");$("#tabs").tabs("disable","tab_search_criteria");if(void 0==searchResult||b){var b=decodeURIComponent(searchResultProp.searchCriteria),h,l=function(){closePopupMsg();triggerHash("#search_criteria");clearTimeout(h)},k=function(){h=setTimeout(function(){closePopupMsg();triggerHash("#search_criteria")},5e3)};getSearchResult(b,0,{async:!0,onLoad:function(){$("#mask").html('<div class="data" data-page="0" data-sort-option="1">'+layoutTemplate.loadingMsg+"</div>")},onSuccess:function(){void 0!=g?sortSearchResult(g,!1):sortSearchResult(1,!1);j=getSearchResultByPage(f);searchResultProp.currentPage=f;searchResultPagin();$("#mask").append('<div class="nextdata" data-page="'+f+'" data-sort-option="'+g+'">'+j+"</div>");transit("#mask");syncMarket()},onEmptyResult:function(){buildPopupMsg({content:"Your search did not return any results.<br/>Please redefine search criteria.",showOk:!0,title:"No search result",onOk:l,onClose:l,onShow:k})},onError:function(){buildPopupMsg({content:result.errorDescription,showOk:!0,title:"Error",onOk:l,onClose:l,onShow:k})}})}else if(""!=j){void 0!=g?sortSearchResult(g,!1):sortSearchResult(1,!1);j=getSearchResultByPage(f);searchResultProp.currentPage=f;searchResultPagin();if(0>=$("#mask .nextdata[data-page="+f+"][data-sort-option="+g+"]").length||searchResultProp.isNewRequest)searchResultProp.isNewRequest=!1,$("#mask").append('<div class="nextdata" data-page="'+f+'" data-sort-option="'+g+'">'+j+"</div>"),transit("#mask");syncMarket()}}else-1!=a.search("#portfolio_page")?(c=getIdByName("tab_manage_portfolio"),b=a.split("_"),f=b[2],b=b[3],logging("load portfolios page=>"+f+" ; forceToLoad=>"+b),$("#tabs").tabs("option","selected")==c?($("#tabs").tabs("select","tab_manage_portfolio"),portfolioProp.currentPage=f,getPortfolioItemsByPage(f,b,function(){logging("release mutex lock in hashchange");globalVars.lockObject.portfolio=0},{container:"#tab_manage_portfolio",mask:"#portfolio_mask",url:getNewPortfolioItemsPath,pageProp:portfolioProp,data:portfolioResult,paginHandler:void 0,paginContainer:"#manage_portfolio_pagin",paginPrefix:"#portfolio_page",renderMode:"p"})):($("#tabs").tabs("select","tab_manage_portfolio"),portfolioProp.currentPage=f)):-1!=a.search("#collections_page")?(c=getIdByName("tab_manage_collections"),b=a.split("_"),f=b[2],b=b[3],logging("load portfolios page=>"+f+" ; forceToLoad=>"+b),$("#tabs").tabs("option","selected")==c?($("#tabs").tabs("select","tab_manage_collections"),portfolioProp.currentPage=f,getPortfolioItemsByPage(f,b,function(){logging("release mutex lock in hashchange");globalVars.lockObject.collections=0},{paginPrefix:"#collections_page",renderMode:"c"})):($("#tabs").tabs("select","tab_manage_collections"),portfolioProp.currentPage=f)):-1!=a.search("#board_page")?(c=getIdByName("tab_manage_board"),b=a.split("_"),d=b[2],f=b[3],b=b[4],boardProp.forceToReload=d===boardsResult.portfolioId&&!b?!1:!0,boardsResult.portfolioId=d,portfolioProp.portfolioId=d,portfolioProp.preloadPortfolioId=d,boardProp.currentPage=f,$("#tabs").tabs("url",c,boardPath+"/"+d),$('#tabs ul li a[title="tab_manage_board"]').attr("data-mode","c"),$("#tabs").tabs("option","selected")==c?$("#tabs").tabs("load",c):$("#tabs").tabs("select",c)):-1!=a.search("#pboard_page")?(c=getIdByName("tab_manage_board"),b=a.split("_"),d=b[2],f=b[3],b=b[4],boardProp.forceToReload=d===boardsResult.portfolioId&&!b?!1:!0,boardsResult.portfolioId=d,portfolioProp.portfolioId=d,portfolioProp.preloadPortfolioId=d,boardProp.currentPage=f,$("#tabs").tabs("url",c,pBoardPath+"/"+d),$('#tabs ul li a[title="tab_manage_board"]').attr("data-mode","p"),$("#tabs").tabs("option","selected")==c?$("#tabs").tabs("load",c):$("#tabs").tabs("select",c)):-1!=a.search("#create_board")?boardHashChangeHandler(a,createBoardPath,createBoardWithPortfolioPath,"c"):-1!=a.search("#create_pboard")?boardHashChangeHandler(a,createPBoardPath,createPBoardWithPortfolioPath,"p"):-1!=a.search("#edit_board")?(b=a.split("_"),b=b[2],logging("edit board=>"+b),$('#tabs ul li a[title="tab_create_board"]').attr("data-mode","c"),$("#tabs").tabs("url",getIdByName("tab_create_board"),createBoardPath+"/"+b),$("#tabs").tabs("select","tab_create_board")):-1!=a.search("#edit_pboard")?(b=a.split("_"),b=b[2],logging("edit board=>"+b),$('#tabs ul li a[title="tab_create_board"]').attr("data-mode","p"),$("#tabs").tabs("url",getIdByName("tab_create_board"),createPBoardPath+"/"+b),$("#tabs").tabs("select","tab_create_board")):-1!=a.search("#rating")?(b=a.split("_"),b=$.url().fsegment(2),d=$.url().fsegment(3),logging("rating=>"+c),$("#tabs").tabs("url",getIdByName("tab_rating"),ratingPath+"/"+b+"/"+d),$("#tabs").tabs("select","tab_rating")):-1!=a.search("#design_wall")?(logging("PARSING HASH="+a),b=a.split("_"),c=b[2],d=b[3],b=b[4],e=getIdByName("tab_design_wall"),logging("PAGE_DESIGN WALL"+e),logging("URL="+appPath+"console/design_wall/"+c+"/"+d+"/"+b),$("#tabs").tabs("url",e,designWallPath+"/"+c+"/"+d+"/"+b),logging("SELECT DESIGN WALL"),$("#tabs").tabs("select",e),$("#tabs").tabs("load",e)):-1!=a.search("#designer_account")?(logging("PARSING HASH="+a),b=a.split("_"),c=b[2],d=b[3],b=b[4],e=getIdByName("tab_account"),logging("URL="+designerAccountPath+"/"+c+"/"+d+"/"+b),$("#tabs").tabs("url",e,designerAccountPath+"/"+c+"/"+d+"/"+b),logging("SELECT DESIGNER ACCOUNT"),$("#tabs").tabs("select",e),$("#tabs").tabs("load",e)):-1!=a.search("#search_criteria")?($("#tabs").tabs("enable","tab_search_criteria"),$("#tabs").tabs("select","tab_search_criteria"),$("#tabs").tabs("disable","tab_search_result")):-1!=a.search("#alerts")?(b=getIdByName("tab_alerts"),-1!=b?($("#tabs").tabs("select",b),$("#tabs").tabs("load",b)):showConfirmation("You will leave admin console and redirect to alerts tab in user console. Would you like to continue?","Confirmation","leaveAdminConsole",{onOk:function(){location.href=homepage+"#alerts"}})):-1!=a.search("#shopping_cart")?(b=getIdByName("tab_shopping_cart"),$("#tabs").tabs("option","selected")==b?$("#tabs").tabs("load",b):$("#tabs").tabs("select","tab_shopping_cart"),"88888"==$.url().fsegment(2)&&buildPopupMsg({content:"Your transaction amount has to be less than $10,000.00, please remove some items or please contact us for further help. Thank You.",showOk:!0,onOk:function(){closePopupMsg()}})):-1!=a.search("#home")?$("#tabs").tabs("select","tab_home"):-1!=a.search("#edit_company_profile")?$("#tabs").tabs("select","tab_home_edit_mode"):-1!=a.search("#edit_designer_profile")?$("#tabs").tabs("select","tab_home_edit_mode"):-1!=a.search("#activity")?$("#tabs").tabs("select","tab_activity"):-1!=a.search("#edit_portfolio")?(b=$.url().fsegment(2),$("#tabs").tabs("url",getIdByName("tab_create_portfolio"),manageNewPortfolioPath+"/"+b),$("#tabs").tabs("select","tab_create_portfolio")):-1!=a.search("#edit_collection")?(b=$.url().fsegment(2),$("#tabs").tabs("url",getIdByName("tab_create_collection"),managePortfolioPath+"/"+b),$("#tabs").tabs("select","tab_create_collection")):logging("close=>"+a);b="#"+$.url().attr("fragment");-1!=b.search("#nail")?(a=b.match("#nail[_\\d+]*"),void 0==searchResult&&$.ajax({url:searchResultPath,type:"POST",async:!1,beforeSend:function(){logging("loading")},error:function(){logging("syncing search result failed")},success:function(a){searchResult=a.searchResults;searchResultProp.totalPages=Math.ceil(searchResult.length/searchResultProp.itemsPerPage)}}),b=a[0].split("_"),c=b[1],a=!0,logging("show board item=>"+c),0<$("#board_detail").length&&(a=!1),closeSidebar(),showWindow(c,a,getItemIndexFromObjectContainer(searchResult,c))):-1!=b.search("#board_item")?(b=a.split("_"),c=b[2],a=!0,logging("show board item=>"+c),0<$("#board_detail").length&&(a=!1),closeSidebar(),showWindow(c,a,getItemIndexFromObjectContainer(searchResult,c))):closePopup()}function getIdByName(a,b){if(b){var c=$("#tabs").children("ul").children("li"),d=[];if(void 0==globalVars.tabNamesTable){for(var e=0;e<c.length;e++)d.push($(c[e]).children(".li-tab").attr("title"));globalVars.tabNamesTable=d}else d=globalVars.tabNamesTable;for(e=0;e<d.length;e++)if(d[e]==a)return e}else{c=$("#tabs").children("div");for(e=0;e<c.length;e++)if(c[e].id==a)return e}return-1}function disableChartLink(a){$("#chart_today").attr("href",chartPath+"/1");$("#chart_week").attr("href",chartPath+"/7");$("#chart_month").attr("href",chartPath+"/30");$("#chart_today").attr("style","text-decoration:underline;");$("#chart_week").attr("style","text-decoration:underlin;");$("#chart_month").attr("style","text-decoration:underlin;");$(a).removeAttr("href");$(a).attr("style","text-decoration:none;")}function initChart(a){logging("INIT CHART=>"+a);$.ajax({url:a,type:"GET",dataType:"json",beforeSend:function(){$("#activity_company_grid").stop(!0,!0);$("#activity_designer_grid").stop(!0,!0);$("#activity_company_grid").fadeOut();$("#activity_designer_grid").fadeOut();logging("Chart Loading");$("#activity_chart").html('<div style="margin-left:47%; margin-top:14%"><span style="text-align: center;"><img src="/images/spinner_med_wbg.gif" /></span></div>')},success:function(a){logging("chart success");if(!a.hasError){var c=jQuery.parseJSON(a.data),d=jQuery.parseJSON(a.ticks),e=jQuery.parseJSON(a.pointLabels);plotGraph(c,d,e);"company"==a.userType?fillCompanyGrid(a.activityGrid):fillDesignerGrid(a.activityGrid);$("#lblBoardCount").html(a.boardCount)}}})}function fillDesignerGrid(a){for(var b=[],c="odd",d=0,e=a.length;d<e;d++){var f=htmlEntities(a[d].boardName),g=htmlEntities(a[d].portfolioname),c=1==d%2?"odd":"even";a[d].showImage?b.push('<tr class="'+c+'"><td class="td1"><a href="javascript:void(0)" class="gridBoardId" data="'+a[d].boardId+'" title="'+f+'"> <img src="/100x100/'+a[d].boardImageUrl+'"/></a></td>'):b.push('<tr class="'+c+'"><td class="td1"><a href="javascript:void(0)" class="gridBoardId" data="'+a[d].boardId+'" title="'+f+'"> <img src="/images/forbidden.jpg"/></a></td>');b.push('<td class="td2">	 <a href="javascript:void(0)" class="gridBoardId" data="'+a[d].boardId+'" title="'+f+'"><span>'+f+'</span></a></td><td class="td3">'+a[d].season+'</td><td class="td4"><span title="'+g+'">'+g+'</span></td><td class="td5">'+a[d].noofHits+'</td><td class="td6">$'+a[d].price+"</td></tr>")}$("#activity_designer_grid").html("");$("#activity_designer_grid").html(b.join(""));0>=a.length&&$("#activity_designer_grid").html('<tr><td class="empty-grid">Empty</td></tr>');$("#activity_designer_grid").fadeIn();$("#grid_scrollbar").tinyscrollbar_update()}function fillCompanyGrid(a){for(var b=[],c="odd",d=0,e=a.length;d<e;d++){var f=htmlEntities(a[d].boardName),c=1==d%2?"odd":"even";a[d].showImage?(b.push('<tr class="'),b.push(c),b.push('"><td class="td1">'),b.push('<a href="javascript:void(0)" class="gridBoardId" data='),b.push(a[d].boardId),b.push(' title="'+f+'"> <img src="/100x100/'),b.push(a[d].boardImageUrl),b.push('"/></a></td>')):(b.push('<tr class="'),b.push(c),b.push('"><td class="td1">'),b.push('<a href="javascript:void(0)" class="gridBoardId" data='),b.push(a[d].boardId),void 0==a[d].typeCode?b.push(' title="'+f+'"> <img src="/images/forbidden.jpg"/></a></td>'):"board.unpublished"==a[d].typeCode?b.push(' title="'+f+'"> <img src="/images/processing.jpg"/></a></td>'):b.push(' title="'+f+'"> <img src="/images/forbidden.jpg"/></a></td>'));b.push('<td class="td2">');b.push('<a href="javascript:void(0)" class="gridBoardId" data=');b.push(a[d].boardId);b.push(' title="'+f+'">');b.push("<span>"+f+"</span>");b.push("</a></td>");b.push('<td class="td3">');b.push(a[d].season);b.push("</td>");b.push('<td class="td4">');b.push('<a href="javascript:void(0)" class="gridDesignerName" data=');b.push(a[d].designerId);b.push(">");b.push(a[d].designerName);b.push("</a></td>");b.push('<td class="td5"><img class="credit-unit" src="/images/creditunit.png" alt="FFG Credit" />&nbsp;');b.push(convertPriceToCredit(a[d].price));b.push("</td>");b.push('<td class="td6">');b.push(a[d].strDateViewed);b.push("</td></tr>")}$("#activity_company_grid").html("");$("#activity_company_grid").html(b.join(""));0>=a.length&&$("#activity_company_grid").html('<tr><td style="height:250px; width:100%; text-align:center; font-size:2em">Empty</td></tr>');$("#activity_company_grid").fadeIn(1e3);$("#grid_scrollbar").tinyscrollbar_update()}function plotGraph(a,b,c){$("#activity_chart").data("firstDate",b[0]);b[0][0].split("/");$.jqplot("activity_chart",a,{title:"Viewed Boards",axesDefaults:{tickRenderer:$.jqplot.CanvasAxisTickRenderer,tickOptions:{fontSize:"10pt"}},axes:{xaxis:{renderer:$.jqplot.CategoryAxisRenderer,ticks:b},yaxis:{min:0,pad:1.5,tickOptions:{formatString:"%d"}}},seriesDefaults:{showMarker:!0,markerOptions:{style:"filledSquare",size:4,color:"blue"},pointLabels:{show:!0,labels:c}},highlighter:{show:!0,sizeAdjust:9.5}}).replot()}function syncMarket(){logging("ITEM TOTAL=>"+$(".form_add_to_cart").size(),"#F00");if(void 0!=globalVars.cart)for(var a=0;a<$(".form_add_to_cart").size();a++){var b=$(".form_add_to_cart").get(a).name,b=b.split("_"),b=b[4];if(void 0!=globalVars.cart||null!=globalVars.cart)-1!=$.inArray(parseInt(b),globalVars.cart.boardIdList)?($(".form_add_to_cart").get(a).value=!0,$("#add_board_"+b).addClass("added_to_cart")):($(".form_add_to_cart").get(a).value=!1,$("#add_board_"+b).removeClass("added_to_cart"))}else logging("cart empty","#F00")}function getCart(){$.ajax({url:getCartItemPath,type:"POST",error:function(){logging("get cart error")},success:function(a){globalVars.cart=a;checkShoppingCart(a.count)}})}function checkShoppingCart(a){logging("COUNT=>"+a);0<a?$("#cart_icon .cart_icon").attr("src",appConfig.shoppingCartFullImgPath):$("#cart_icon .cart_icon").attr("src",appConfig.shoppingCartImgPath);$("#lblitemCount").html(a)}function moveToCart(a,b){void 0==b&&(b=!0);var c=a.split("_")[2],d=$("[name=form_add_to_cart_"+c+"]").val();"false"==d?$.ajax({url:addItemPath,type:"POST",data:"boardId="+c+"&boardprice=100&percentage0.1",beforeSend:function(){$("#board_"+c+"+.processingMask").show()},error:function(){$("#board_"+c+"+.processingMask").hide()},success:function(a){$("#board_"+c+"+.processingMask").hide();b&&effect_addToCart(c);d="true"==d?!1:!0;$("[name=form_add_to_cart_"+c+"]").val(d);checkShoppingCart(a.count);globalVars.cart=a}}):$.ajax({url:deleteItemPath,type:"POST",data:"boardId="+c+"&boardprice=100&percentage0.1",beforeSend:function(){$("#board_"+c+"+.processingMask").show()},error:function(){$("#board_"+c+"+.processingMask").hide()},success:function(a){$("#board_"+c+"+.processingMask").hide();effect_backToMarket(c);d="true"==d?!1:!0;$("[name=form_add_to_cart_"+c+"]").val(d);checkShoppingCart(a.count);globalVars.cart=a}})}function delete_from_cart_by_board_id(a){$.ajax({url:deleteItemPath,type:"POST",data:"boardId="+a+"&boardprice=100&percentage0.1",beforeSend:function(){$("#item_id_"+a+" .processingMask").show()},error:function(){$("#item_id_"+a+" .processingMask").hide()},success:function(b){$("#item_id_"+a+" .processingMask").hide();closePopupMsg();logging("delete_from_cart_by_board_id success");checkShoppingCart(b.count);globalVars.cart=b;$("#item_id_"+a).remove();$("#total_price").html("$"+b.total);syncMarket();$("#tabs").tabs("load",getIdByName("tab_shopping_cart"));0<b.count?$("#popup_checkout_button").html('<a href="javascript:void(0)" id="to_checkout"><div class="button orangeButton" id="button_checkout">Checkout</div></a>'):$("#popup_checkout_button").html("");$("#cart_scrollbar").tinyscrollbar_update("relative")}})}function effect_addToCart(a){var b=$("#add_to_cart").offset();logging("cart:"+b.top+":"+b.left);var c="stuff_"+a+"_0";$("body").append('<div class="stuff" id="'+c+'"></div>');$("#"+c).css({opacity:1,width:200,height:200});$("#"+c).html($("#board_"+a).html());var d=$("#board_"+a).offset();logging("cart:"+d.top+":"+d.left);$("#"+c).css(d);$("#"+c).css("display","block");$("#body").css("cursor","progress");$(".add_to_cart").css("cursor","progress");$("#"+c+" img").animate({width:"toggle",height:"toggle"},1800,"swing");$("#"+c).animate({top:b.top+8,left:b.left-90},1500,"swing",function(){$("#"+c).remove();$("#add_board_"+a).toggleClass("added_to_cart");$("#body").css("cursor","default");$(".add_to_cart").css("cursor","pointer")})}function effect_backToMarket(a){var b=$("#add_to_cart").offset();b.top+=8;b.left+=50;logging("cart:"+b.top+":"+b.left);var c="stuff_"+a+"_1";$("body").append('<div class="stuff" id="'+c+'"></div>');$("#"+c).css({opacity:1});$("#"+c).html($("#board_"+a).html());$("#"+c+" img").css({width:0,height:0});$("#"+c).css("display","block");var d=$("#board_"+a).offset();logging("cart:"+d.top+":"+d.left);$("#"+c).css(b);$("#body").css("cursor","progress");$(".add_to_cart").css("cursor","progress");$("#"+c+" img").animate({width:200,height:200},1500,"swing");$("#"+c).animate({top:d.top,left:d.left},1500,"swing",function(){$("#"+c).remove();$("#add_board_"+a).toggleClass("added_to_cart");$("#body").css("cursor","default");$(".add_to_cart").css("cursor","pointer")})}function addToCart(a,b){$.ajax({url:addItemPath,type:"POST",data:"boardId="+a,beforeSend:function(){buildPopupMsg({content:layoutTemplate.loadingPopup,title:"Loading",showOk:!1,closeByOverlay:!1,effect:!1})},error:function(){buildPopupMsg({content:"Please try again. Thank you.",title:"Error",showOk:!0,closeByOverlay:!1,effect:!1})},success:function(a){checkShoppingCart(a.count);globalVars.cart=a;buildPopupMsg({content:"Added to cart successfully<br />(This popup will be closed automatically in 5 seconds)",showOk:!0,title:"Add to cart",showOverlay:!0,onShow:function(){setTimeout(function(){closePopupMsg()},5e3)}});"function"===typeof b&&b();syncMarket();$("#tabs").tabs("load",getIdByName("tab_shopping_cart"))}})}function removeFromCart(a){$.ajax({url:deleteItemPath,type:"POST",data:"boardId="+a,success:function(b){checkShoppingCart(b.count);globalVars.cart=b;buildPopupMsg({content:"Remove from cart successfully",showOk:!0,title:"Remove from cart",showOverlay:!0});showWindow(a,!1);syncMarket();$("#tabs").tabs("load",getIdByName("tab_shopping_cart"))}})}function showCommission(){for(var a=$("#saleTypeTable tbody").children("tr").length-1,b="-1.0",c=1;c<=a;c++)"checked"==$("#form_saletype_"+c).attr("checked")&&((b=$("#form_saletype_"+c+"_cost").val())||(b="-1.0"));closeSidebar();buildPopup({url:showCommissionPath+"/"+b})}function createBoard(a,b,c){void 0==a&&(a=!1);void 0==b&&(b=createBoardPath);void 0==c&&(c="c");calculate();a=$("#saleTypeTable tbody").children("tr").length-1;var d="-1.0",e="board_page";"p"==c.toLowerCase()&&(e="pboard_page");for(var f=1;f<=a;f++)"checked"==$("#form_saletype_"+f).attr("checked")&&((d=$("#form_saletype_"+f+"_cost").val())||(d="-1.0"));$.ajax({url:b,type:"POST",data:$("#form_create_board").serialize()+"&price="+d,beforeSend:function(){buildPopupMsg({content:'<span style="color:blue;">Please wait...<span><br /><img src="/images/spinner_small.gif" style="margin-top:30px;"/>',title:"Please Wait",showOk:!1,closeByOverlay:!1,effect:!1})},error:function(){logging("--createBoard() => Creating board error when calling ajax");closePopupMsg()},success:function(a){logging("BOARD RESULT");logging(a);if(a.hasError){var b=[];$(".label").removeAttr("style");for(var d=0;d<a.errors.length;d++)b.push(a.errors[d].defaultMessage),logging("Error field=>"+a.errors[d].field);$("#overlay").fadeOut("fast");a=0>=a.errors.length?a.errorDescription:b.join("<br/>");buildPopupMsg({content:a,showOk:!0})}else{globalVars.isChangedWithoutSubmit=!1;if("create"==a.type){var f;a="Create board";b="Board created successfully<br />(This popup will be closed automatically in 5 seconds)";"p"==c.toLowerCase()&&(a="Create page",b="Page created successfully<br />(This popup will be closed automatically in 5 seconds)")}else a="Update board",b="Update board successfully<br />(This popup will be closed automatically in 5 seconds)","p"==c.toLowerCase()&&(a="Update page",b="Update page successfully<br />(This popup will be closed automatically in 5 seconds)");buildPopupMsg({content:b,showOk:!0,title:a,onShow:function(){f=setTimeout(function(){closePopupMsg();triggerHash("#"+e+"_"+$("#form_create_board #portfolioId").val()+"_0_1")},5e3)},onClose:function(){triggerHash("#"+e+"_"+$("#form_create_board #portfolioId").val()+"_0_1");clearTimeout(f)},onOk:function(){closePopupMsg();triggerHash("#"+e+"_"+$("#form_create_board #portfolioId").val()+"_0_1");clearTimeout(f)}})}}})}function calculate(){for(var a=$("#saleTypeTable tbody").children("tr"),b=1;b<=a.length-1;b++)if("checked"==$("#form_saletype_"+b).attr("checked")){var c=$("#form_saletype_"+b+"_cost").val(),d=parseFloat($("#f4g_rate").val()),c=c*(1-d);$("#saletype_"+b+"_final").html(c.toFixed(2));$("#form_final_price").val(c)}}function clear(){var a=$("#portfolioId").val();logging("CLEAR FORM");$("#product").val("");$("#product option").removeAttr("selected");$("#productType").val("");$("#productType option").removeAttr("selected");$("#create_board_review").html("");$("#form_board_image_url").val("");$("#saleTypeTable tbody").children("tr");for(var b=1;4>=b;b++)0<$("#form_saletype_"+b+"_cost").length?$("#form_saletype_"+b+"_cost").val("0"):$("#form_saletype_"+b).html("0"),$("#saletype_"+b+"_final").html("0");$("#form_final_price").val("0");$("#form_create_board")[0].reset();$("#portfolioId").val(a);$("#portfolioId").trigger("change");$("#product").trigger("change");$("#product").multipleSelect("refresh");$("#productType").multipleSelect("refresh")}function clearSaleTypeTable(){for(var a=$("#saleTypeTable tbody").children("tr").length-1,b=1;b<=a;b++)$("#saletype_"+b).html('<span class="sale-type-credit-static">0</span>&nbsp;=&nbsp;<span class="sale-type-conversion" data-row="'+b+'">$ 0</span>'),$("#saletype_"+b+"_final").html("0");$("#form_final_price").val("0")}function getBoardsByPortfolioId(a){logging("Get Boards By=>"+a);$.ajax({url:getBoardsByPortfolioIdPath+"/"+a,type:"POST",beforeSend:function(){$("#board_mask").html('<div class="data">'+layoutTemplate.loadingMsg+"</div>")},success:function(b){logging("Get boards data","#F00");boardsResult.data=b.results;boardProp.totalPages=Math.ceil(b.results.length/boardProp.itemsPerPage);logging("Total board pages=>"+boardProp.totalPages);boardProp.currentPage=0;location.hash="#board_page_"+a+"_0"}})}function getBoardsByPage(a,b,c,d){var e=[];void 0==d&&(d="c");if(null==boardsResult.data||!0===c||void 0===c)$.ajax({url:getBoardsByPortfolioIdPath+"/"+a,type:"POST",beforeSend:function(){$("#board_mask").html('<div class="data">'+layoutTemplate.loadingMsg+"</div>")},success:function(c){logging("Get boards data successfully=>"+a+" ; "+b,"#F00");boardsResult.data=c.results;boardsResult.visible=c.isVisibleDesigner;boardProp.totalPages=Math.ceil(c.results.length/boardProp.itemsPerPage);logging("Total board pages=>"+boardProp.totalPages);getBoardsByPage(a,b,!1,d)}});else{b=parseInt(b);for(c=b*boardProp.itemsPerPage;c<(b+1)*boardProp.itemsPerPage;c++){var f=boardsResult.data[c];if(void 0!=f){var g=htmlEntities(f.name),j=f.name;26<j.length&&(j=j.substring(0,25)+" ...");var j=htmlEntities(j),h=[];h.push('<div class="item '+d+'">');h.push('<div class="item-function">');"c"==d.toLowerCase()?(h.push('<div class="edit"><a data="'+f.boardId+'" data-mode="'+d+'">Edit</a></div>'),h.push('<div class="delete_board" data="'+f.boardId+'" data-mode="'+d+'"><img src="/images/recycle_bin.png" /></div>'),h.push('<div class="status"> '+f.boardStatus+"</div>"),"Expired"!=f.boardStatus&&("Unpublished"==f.boardStatus?h.push('<div class="toggleStatus togglePubstatus_board" data="'+f.boardId+'"><img src="/images/order.png" /></div>'):h.push('<div class="toggleStatus toggleHidstatus_board" data="'+f.boardId+'"><img src="/images/order.png" /></div>'))):(h.push('<div class="board_name" title="'+g+'">'+j+"</div>"),h.push('<div class="delete_board" data="'+f.boardId+'" data-mode="'+d+'"><img src="/images/recycle_bin.png" /></div>'),h.push('<div class="edit"><a data="'+f.boardId+'" data-mode="'+d+'">Update</a></div>'));h.push("</div>");if("c"==d.toLowerCase())h.push('<a href="#board_item_'+f.boardId+'" id="board_'+f.boardId+'" class="designerBoardLink" data="'+f.boardId+'" data-mode="'+d+'">'),h.push('<div class="board"><i></i>');else switch(h.push('<a href="javascript:void(0);" class="enlargeImage" id="board_'+f.boardId+'" image-data="'+f.boardImages[f.boardImages.length-1].mainImageUrl+'" data="'+f.boardId+'" data-mode="'+d+'">'),h.push('<div class="board"><i></i>'),f.publishToMP){case 0:2==f.lastupdateby?h.push('<div class="imgFlag lt rj">Resubmit</div>'):h.push('<div class="imgFlag lt pr">Private</div>');break;case 1:h.push('<div class="imgFlag rt pb">Published</div>');break;case 2:h.push('<div class="imgFlag lt rv">Reviewing</div><div class="imgFlag rt rj">Not Published Yet</div>')}0<f.boardImages.length&&h.push('<img src="/400x400/'+f.boardImages[f.boardImages.length-1].fileName+'" />');h.push("</div>");h.push("</a>");h.push('<div class="detail">');"c"==d.toLowerCase()&&(void 0==creditConversionToUsd&&(creditConversionToUsd=25),h.push('<div class="board_name" title="'+g+'">'+j+"</div>"),h.push('<div class="price">'+f.boardPrice+" FFG credits<span>$&nbsp;"+f.boardPrice*creditConversionToUsd+"</span></div>"));h.push("</div>");h.push("</div>");e.push(h.join(""))}}0>=e.length?"c"==d.toLowerCase()?$("#board_mask").append('<div class="nextdata">'+layoutTemplate.emptyBoardMsg+"</div>"):$("#board_mask").append('<div class="nextdata"></div>'):$("#board_mask").append('<div class="nextdata">'+e.join("")+"</div>");"p"==d.toLowerCase()?($("#add_manage_page").removeAttr("button-disabled").removeClass("show-qtip").removeAttr("title"),boardsResult.visible||$("#board_mask .nextdata").append(layoutTemplate.reqPortfolioBoardMsg),8<=boardsResult.data.length&&(e=$("#add_manage_page").attr("data-title"),$("#add_manage_page").attr("button-disabled","true").attr("title",e).addClass("show-qtip")),boardsPagin("pboard_page")):(boardsResult.visible||(navigate($(".li-portfolio")),$("#board_mask .nextdata").append(layoutTemplate.invisibleDesignerMsg)),boardsPagin());transit("#board_mask")}}function boardsPagin(a){void 0==a&&(a="board_page");logging("Refresh boards pagin","#0F0");var b="";logging("cpage=>"+boardProp.currentPage);b="";boardProp.currentPage=parseInt(boardProp.currentPage);b=0==boardProp.currentPage?b+"1&nbsp;":b+('<a href="#'+a+"_"+portfolioProp.portfolioId+'_0">1</a>&nbsp;');2<boardProp.totalPages&&(3<=boardProp.currentPage&&(b+="...&nbsp;"),2<=boardProp.currentPage&&(b+='<a href="#'+a+"_"+portfolioProp.portfolioId+"_"+(boardProp.currentPage-1)+'">'+boardProp.currentPage+"</a>&nbsp;"),0!=boardProp.currentPage&&boardProp.currentPage!=boardProp.totalPages-1&&(b+=boardProp.currentPage+1+"&nbsp;"),3<=boardProp.totalPages-boardProp.currentPage&&(b+='<a href="#'+a+"_"+portfolioProp.portfolioId+"_"+(boardProp.currentPage+1)+'">'+(boardProp.currentPage+2)+"</a>&nbsp;"),4<=boardProp.totalPages-boardProp.currentPage&&(b+="...&nbsp;"));2<=boardProp.totalPages&&(b=boardProp.currentPage==boardProp.totalPages-1?b+(boardProp.totalPages+"&nbsp;"):b+('<a href="#'+a+"_"+portfolioProp.portfolioId+"_"+(boardProp.totalPages-1)+'">'+boardProp.totalPages+"</a>&nbsp;"));$("#manage_board_pagin").html("Pages:&nbsp;"+b)}function prevBoardPage(a){void 0==a&&(a="board_page");logging("board prev");logging(portfolioProp);boardProp.currentPage--;0>boardProp.currentPage&&(boardProp.currentPage=boardProp.totalPages-1);location.hash="#"+a+"_"+portfolioProp.preloadPortfolioId+"_"+boardProp.currentPage}function nextBoardPage(a){void 0==a&&(a="board_page");logging("board next");logging(portfolioProp);boardProp.currentPage++;boardProp.currentPage>=boardProp.totalPages&&(boardProp.currentPage=0);location.hash="#"+a+"_"+portfolioProp.preloadPortfolioId+"_"+boardProp.currentPage}function refreshBoards(a,b){void 0==b&&(b="c");"c"==b.toLowerCase()?triggerHash("#board_page_"+portfolioProp.portfolioId+"_"+boardProp.currentPage+"_1"):triggerHash("#pboard_page_"+portfolioProp.portfolioId+"_"+boardProp.currentPage+"_1")}function checkFileTypeAndSaleType(){var a=$('#saleTypeTable input[type="radio"]:checked').attr("code"),b=$("#form_board_image_type").val();if("ai"==b){if("JG"==a)return buildPopupMsg({content:"The file you uploaded is AI(PDF), please select the appropriate option for FILE TYPES + AVAILABLE OPTIONS. Thank you.",showOk:!0,title:"File Type Inconsistent",showOverlay:!0}),!1}else if("jpg"==b&&"JG"!=a)return buildPopupMsg({content:"The file you uploaded is JPG, please select the appropriate option for FILE TYPES + AVAILABLE OPTIONS. Thank you.",showOk:!0,title:"File Type Inconsistent",showOverlay:!0}),!1;return!0}function getCategoryList(a,b){b=$.extend({},{target:"#form_category",triggerChangeTarget:!0,haveDontCareTag:!1},b);-1==a?($("#form_category").html(layoutTemplate.optionDefaultCategory),$(b.target).trigger("change")):$.ajax({cache:!1,url:categoryListPath+"/"+a,type:"GET",timeout:5e3,beforeSend:function(){$("#form_category").html(layoutTemplate.optionLoadingMsg)},error:function(a,b,e){logging("Error=>"+a+";"+b+";"+e);$("#form_category").html(layoutTemplate.optionEmpty)},success:function(a){logging("GET CATEGORY=>"+a.list.length);var d;if(0>=a.list.length)d=layoutTemplate.optionEmpty;else{d=b.haveDontCareTag?layoutTemplate.optionDefaultMsgWithDontCare:layoutTemplate.optionDefaultMsg;for(var e=0;e<a.list.length;e++)d+="<option value="+a.list[e].categoryId+">"+a.list[e].name+"</option>"}$("#form_category").html(d);b.triggerChangeTarget&&$(b.target).trigger("change")},complete:function(a,b){logging("AJAX Complete=>"+a+":"+b)}})}function getProductList(a,b){b=$.extend({},{target:"#form_product",triggerChangeTarget:!0,haveDontCareTag:!1},b);-1==a?($("#form_product").html(layoutTemplate.optionDefaultProduct),$(b.target).trigger("change")):$.ajax({cache:!1,url:productListPath+"/"+a,type:"GET",timeout:5e3,beforeSend:function(){$("#form_product").html(layoutTemplate.optionLoadingMsg)},error:function(a,b,e){logging("Error=>"+a+";"+b+";"+e);$("#form_product").html("")},success:function(a){logging("GET LEVEL=>"+a.list.length);var d;if(0>=a.list.length)d=layoutTemplate.optionEmpty;else{d=b.haveDontCareTag?layoutTemplate.optionDefaultProductWithDontCare:layoutTemplate.optionDefaultMsg;for(var e=0;e<a.list.length;e++)d+='<option value="'+a.list[e].name+'">'+a.list[e].name+"</option>"}$("#form_product").html(d);b.triggerChangeTarget&&$(b.target).trigger("change")},complete:function(a,b){logging("AJAX Complete=>"+a+":"+b)}})}function getProductTypeList(a,b,c,d){a={target:"#form_product",container:"#form_product_type",triggerChangeTarget:!0,haveDontCareTag:!1,onLoad:$.noop,onError:$.noop,onSuccess:$.noop,data:"level1="+a+"&level2="+b+"&productTags="+encodeURIComponent(c),rememberOldValue:!1};d=$.extend({},a,d);var e;d.rememberOldValue&&(e=$(d.container).val());-1==c?($(d.container).html(layoutTemplate.optionDefaultProductType),refershMultiselect(d.container)):$.ajax({cache:!1,url:productTypeListPath,type:"GET",data:d.data,timeout:5e3,beforeSend:function(){d.onLoad();$(d.container).html(layoutTemplate.optionLoadingMsg);$(d.container+" + .mselect").html("Loading...")},error:function(a,b,c){logging("Error=>"+a+";"+b+";"+c);d.onError();$(d.container).html("")},success:function(a){logging("GET LEVEL=>"+a.list.length);var b;if(0>=a.list.length)b=layoutTemplate.optionEmptyWithDisabledAttr;else{b=d.haveDontCareTag?layoutTemplate.optionDefaultProductTypeWithDontCare:layoutTemplate.optionDefaultMsgWithDisabledAttr;for(var c=0;c<a.list.length;c++)b+='<option value="'+a.list[c].name+'">'+a.list[c].name+"</option>"}$(d.container).html(b);d.rememberOldValue&&$(d.container).val(e);refershMultiselect(d.container);d.onSuccess()},complete:function(a,b){logging("AJAX Complete=>"+a+":"+b)}})}function initSeasonsList(a){logging("season Path=>"+seasonYearListPath);$("#season").html("Loading Data, Please wait...");$.ajax({url:seasonYearListPath+"/"+a,type:"GET",success:function(a){a=processJSONObject(a);
$("#season").tree({data:a,autoOpen:!1,dragAndDrop:!1});a=new Date;a=a.getFullYear();a=$("#season").tree("getNodeById",a);$("#season").tree("openNode",a)}})}function getSearchResult(a,b,c){c=$.extend({},{async:!0,onLoad:$.noop,onSuccess:$.noop,onEmptyResult:$.noop,onError:$.noop},c);logging("submit");a=a.replace("&division=-1","");a=a.replace("&category=-1","");a=a.replace("&product=-1","");a=a.replace("&productType=-1","");logging("search form=>"+a);$.ajax({url:searchResultPath,data:a,type:"GET",async:c.async,beforeSend:function(){c.onLoad()},success:function(a){$("#searchCriteriaLoadingPanel").fadeOut(0);if(!1==a.hasError)if(0==a.results.length)c.onEmptyResult();else searchResult=a.results,searchResultProp.totalPages=Math.ceil(a.results.length/searchResultProp.itemsPerPage),logging("TOTAL SEARCH ITEMS=>"+a.results.length),logging("Current Page=>"+searchResultProp.currentPage+" ; Total Pages=>"+searchResultProp.totalPages),logging("Show item from "+0*searchResultProp.itemsPerPage+" to "+((searchResultProp.currentPage+1)*searchResultProp.itemsPerPage-1)),c.onSuccess();else c.onError(a)}})}function getSearchResultByPage(a){var b=[];if(void 0!=searchResult)for(var c=a*searchResultProp.itemsPerPage;c<(a+1)*searchResultProp.itemsPerPage;c++){var d=searchResult[c];if(void 0!=d){var e=htmlEntities(d.name),f=d.name;40<f.length&&(f=f.substring(0,39)+" ...");f=htmlEntities(f);b.push('<div class="item">');b.push('<div class="item-function">');b.push('<div class="edit"><div id="add_board_'+d.boardId+'" class="add_to_cart"></div><input class="form_add_to_cart" name="form_add_to_cart_'+d.boardId+'" type="hidden" value="false"/></div>');b.push('<div class="item-label" title="'+e+'"><div class="board-name">'+f+"</div>");b.push('<div class="board-price">Price&nbsp;<img class="credit-unit" src="/images/creditunit.png" alt="FFG Credit" />&nbsp;'+convertPriceToCredit(d.salePrice)+"</div>");b.push("</div></div>");b.push('<a id="board_'+d.boardId+'" class="nailBoardLink" data="'+d.boardId+'">');b.push('<div class="board"><i></i>');b.push('<img src="/400x400/'+d.tileImageUrl+'" />');b.push("</div>");b.push('</a><div class="processingMask"/>');b.push('<div class="detail">');b.push('<div class="board_name">'+f+"</div>");b.push('<div class="price">Price&nbsp;<img class="credit-unit" src="/images/creditunit.png" alt="FFG Credit"/>&nbsp;'+convertPriceToCredit(d.salePrice)+"</div>");b.push("</div>");b.push("</div>")}}return b.join("")}function searchResultPagin(){logging("Refresh search result pagin","#0F0");logging("cpage=>"+searchResultProp.currentPage);var a="";searchResultProp.currentPage=parseInt(searchResultProp.currentPage);a=0==searchResultProp.currentPage?a+"1&nbsp;":a+'<a href="#search_page_0_${sortOption}/${searchCriteria}">1</a>&nbsp;';2<searchResultProp.totalPages&&(3<=searchResultProp.currentPage&&(a+="...&nbsp;"),2<=searchResultProp.currentPage&&(a+='<a href="#search_page_'+(searchResultProp.currentPage-1)+'_${sortOption}/${searchCriteria}">'+searchResultProp.currentPage+"</a>&nbsp;"),0!=searchResultProp.currentPage&&searchResultProp.currentPage!=searchResultProp.totalPages-1&&(a+=searchResultProp.currentPage+1+"&nbsp;"),3<=searchResultProp.totalPages-searchResultProp.currentPage&&(a+='<a href="#search_page_'+(searchResultProp.currentPage+1)+'_${sortOption}/${searchCriteria}">'+(searchResultProp.currentPage+2)+"</a>&nbsp;"),4<=searchResultProp.totalPages-searchResultProp.currentPage&&(a+="...&nbsp;"));2<=searchResultProp.totalPages&&(a=searchResultProp.currentPage==searchResultProp.totalPages-1?a+(searchResultProp.totalPages+"&nbsp;"):a+('<a href="#search_page_'+(searchResultProp.totalPages-1)+'_${sortOption}/${searchCriteria}">'+searchResultProp.totalPages+"</a>&nbsp;"));a=a.replace(/\$\{searchCriteria\}/g,searchResultProp.searchCriteria);a=a.replace(/\$\{sortOption\}/g,$("#sortSearchResult").val());$("#searchResultPagin .pages").html('<span style="font-weight: bold;">Pages:&nbsp;</span>'+a)}function sortSearchResult(a,b){if(basicConfig.enableSorting){switch(a){case"1":logging("Sort by date ASC");searchResult.sort(function(a,b){return b.date>a.date?-1:b.date==a.date?b.boardId>a.boardId?1:-1:1});break;case"2":logging("Sort by date DESC");searchResult.sort(function(a,b){return b.date>a.date?1:b.date==a.date?b.boardId>a.boardId?1:-1:-1});break;case"3":logging("Sort by Designer ASC");searchResult.sort(function(a,b){return b.designerName.toUpperCase()>a.designerName.toUpperCase()?-1:b.designerName.toUpperCase()==a.designerName.toUpperCase()?b.boardId>a.boardId?1:-1:1});break;case"4":logging("Sort by Designer DESC");searchResult.sort(function(a,b){return b.designerName.toUpperCase()>a.designerName.toUpperCase()?1:b.designerName.toUpperCase()==a.designerName.toUpperCase()?b.boardId>a.boardId?1:-1:-1});break;case"5":logging("Sort by Board Name ASC");searchResult.sort(function(a,b){return b.name.toUpperCase()>a.name.toUpperCase()?-1:b.name.toUpperCase()==a.name.toUpperCase()?b.boardId>a.boardId?1:-1:1});break;case"6":logging("Sort by Board Name DESC");searchResult.sort(function(a,b){return b.name.toUpperCase()>a.name.toUpperCase()?1:b.name.toUpperCase()==a.name.toUpperCase()?b.boardId>a.boardId?1:-1:-1});break;default:logging("Sorting what?")}searchResultPagin();if(b||void 0==b)$("#mask").append('<div class="nextdata" data-page="0" data-sort-option="'+a+'">'+getSearchResultByPage(0)+"</div>"),transit("#mask");syncMarket()}}function createPortfolio(a,b){void 0==b&&(b="c");var c=CheckCreatePortfolioInput(),d=createPortfolioPath,e=$("#form_create_portfolio").serialize();"true"==a?("c"==b.toLowerCase()?d=editPortfolioPath:"p"==b.toLowerCase()?d=editNewPortfolioPath:logging("unspecified data mode"),a=!0):("c"==b.toLowerCase()?d=createPortfolioPath:"p"==b.toLowerCase()?d=createNewPortfolioPath:logging("unspecified data mode"),a=!1);"c"==b.toLowerCase()&&(e=$("#form_create_collection").serialize());0==c.length?$.ajax({url:d,type:"POST",data:e,beforeSend:function(){buildPopupMsg({content:layoutTemplate.loadingPopup,title:"Loading",showOk:!1,closeByOverlay:!1,effect:!1})},success:function(c){logging("ERROR=>"+c.hasError);if(c.hasError){var d=[];$(".label").removeAttr("style");for(var e=0;e<c.errors.length;e++)d.push(c.errors[e].defaultMessage),logging("Error field=>"+c.errors[e].field);$("#overlay").fadeOut("fast");buildPopupMsg({content:"Please enter data in the mandatory fields displayed in the list:<br/>"+d.join("<br/>"),showOk:!0})}else{var h,d="Added successfully<br />(This window will be closed automatically in 5 seconds)";a&&(d="Updated successfully");buildPopupMsg({content:d,showOk:!0,title:"Result",onShow:function(){a||(h=window.setTimeout(function(){closePopupMsg();triggerHash("#board_page_"+c.portfolioId+"_0_1")},5e3))},onOk:function(){closePopupMsg();a||(clearTimeout(h),triggerHash("#board_page_"+c.portfolioId+"_0_1"))},onClose:function(){closePopupMsg();a||(clearTimeout(h),triggerHash("#board_page_"+c.portfolioId+"_0_1"))}});if(a)for(e=1;e<=$(".active_status").length;e++)0==$(".active_status[role="+e+"]").val()&&$(".sample-item-preview[role="+e+"]").html("");else{"c"==b.toLowerCase()?$("#form_create_collection")[0].reset():$("#form_create_portfolio")[0].reset();for(d=1;d<=$(".sample-item-upload").length;d++)$('.sample-item-preview[role="'+d+'"]').html(""),$(".portfolio_image_id[role='"+d+"']").val(""),$(".filestatus[role='"+d+"']").val(-1),$(".filename[role='"+d+"']").val(""),$(".filename_ext[role='"+d+"']").val(""),$(".filename_100[role='"+d+"']").val(""),$(".filename_400[role='"+d+"']").val(""),$(".filename_original[role='"+d+"']").val("")}globalVars.isChangedWithoutSubmit=!1}}}):buildPopupMsg({content:"Below information is mandatory, we have highlighted the missing data:<br/>"+c.join("<br/>"),showOk:!0})}function getPortfolioItems(a,b,c){void 0==a&&(a=0);var d;c=$.extend({},{container:"#tab_manage_collections",mask:"#portfolio_mask",url:getPortfolioItemsPath,pageProp:portfolioProp,data:portfolioResult,paginHandler:void 0,paginContainer:"#manage_portfolio_pagin",paginPrefix:"#portfolio_page",renderMode:"c"},c);d=c.container+" "+c.mask;$.ajax({async:!0,url:c.url,type:"GET",timeout:1e4,beforeSend:function(){logging("beforeSend: get portfolio items");1>$(d).length?(logging("can not insert loading panel"),$("#basicFrame .content.with-header").html('<div id="portfolio_mask"></div>')):logging("beforeSend: insert loading panel");$(d).html('<div class="data">'+layoutTemplate.loadingPortfolioMsg+"</div>")},error:function(a,c,d){logging("Get portfolio items error"+d);"function"===typeof b&&b()},success:function(e){e.hasError?logging("GET portfolio error"):(logging("GET portfolio successfully"),portfolioResult.data=e.results,portfolioResult.visible=e.isVisibleDesigner,portfolioProp.totalPages=Math.ceil(e.results.length/portfolioProp.itemsPerPage),logging("TOTAL Portfolio items=>"+e.results.length),0<e.results.length?(logging("Total Pages=>"+portfolioProp.totalPages),getPortfolioItemsByPage(a,!1,b,c)):($(c.container+" #add_new_board").css("display","none"),$(d).append('<div class="nextdata">'+layoutTemplate.emptyPortfolioMsg+"</div>"),transit(d),"function"===typeof b&&b()))},complete:function(){logging("Get portfolio items complete")}})}function getPortfolioItemsByPage(a,b,c,d){var e=[],f;d=$.extend({},{container:"#tab_manage_collections",mask:"#portfolio_mask",url:getPortfolioItemsPath,pageProp:portfolioProp,data:portfolioResult,paginHandler:void 0,paginContainer:"#manage_portfolio_pagin",paginPrefix:"#portfolio_page",renderMode:"c"},d);f=d.container+" "+d.mask;logging("portfolio items per page=>"+portfolioProp.itemsPerPage);logging("SHOW portfolio item from "+a*portfolioProp.itemsPerPage+" to "+(a+1)*portfolioProp.itemsPerPage);if(null!=portfolioResult.data&&(!1==b||void 0==b)){if(0<portfolioResult.data.length)if(portfolioProp.totalPages<=a)e.push(layoutTemplate.emptyPage);else{$(d.container+" #add_new_board").css("display","inline");a=parseInt(a);for(b=a*portfolioProp.itemsPerPage;b<(a+1)*portfolioProp.itemsPerPage;b++){var g=[],j=portfolioResult.data[b];if(void 0!=j){var h=htmlEntities(j.name),l=j.name,k=[];41<l.length&&(l=l.substring(0,40)+" ...");for(var l=htmlEntities(l),p=j.boards,m=0;m<j.portfolioImages.length;m++)1==j.portfolioImages[m].activeStatus&&k.push(j.portfolioImages[m].thumbnailUrl);for(var m=k.length,n=0;n<4-m;n++)void 0!=p[n]&&0<p[n].boardImages.length?"c"==d.renderMode.toLowerCase()?k.push(p[n].boardImages[0].thumbnailUrl):k.push(p[n].boardImages[0].fileName):k.push("");g.push('<div class="item '+d.renderMode+'">');g.push('<a href="javascript:void(0);" id="portfolio_'+j.portfolioId+'" data="'+j.portfolioId+'" data-mode="'+d.renderMode+'">');g.push('<div class="portfolio">');"c"==d.renderMode.toLowerCase()?(g.push("<table>"),g.push("<tr>"),""!=k[0]?g.push("<td><img src=/100x100/"+k[0]+"></td>"):g.push('<td class="emptyCell"></td>'),""!=k[1]?g.push("<td><img src=/100x100/"+k[1]+"></td>"):g.push('<td class="emptyCell"></td>'),g.push("</tr>"),g.push("<tr>"),""!=k[2]?g.push("<td><img src=/100x100/"+k[2]+"></td>"):g.push('<td class="emptyCell"></td>'),""!=k[3]?g.push("<td><img src=/100x100/"+k[3]+"></td>"):g.push('<td class="emptyCell"></td>'),g.push("<tr>"),g.push("</table>")):""!=k[0]&&g.push('<img src="/400x400/'+k[0]+'"/>');g.push("</div>");g.push("</a>");g.push('<div class="detail">');g.push('<div class="name" title="'+h+'">'+l+"</div>");g.push('<div class="checkbox delete_portfolio" data-mode="'+d.renderMode+'" data="'+j.portfolioId+'"><img src="/images/recycle_bin.png" /></div>');g.push("</div>");g.push("</div>")}g=g.join("");e.push(g)}}else e.push(layoutTemplate.emptyPortfolioMsg);void 0==d.paginHandler?portfolioPagin(d.container+" "+d.paginContainer,d.paginPrefix):d.paginHandler(d.container+" "+d.paginContainer,d.paginPrefix);$(f).append('<div class="nextdata">'+e.join("")+"</div>");portfolioResult.visible||(navigate($(".li-portfolio")),$(f+" .nextdata").append(layoutTemplate.invisibleDesignerMsg));transit(f);"function"===typeof c&&c()}else logging("Reload the portfolio items=>"+a),getPortfolioItems(a,c,d)}function portfolioPagin(a,b){void 0==a&&(a="#manage_portfolio_pagin");void 0==b&&(b="#portfolio_page");logging("Refresh portfolio pagin","#0F0");logging("cpage=>"+portfolioProp.currentPage);var c="";portfolioProp.currentPage=parseInt(portfolioProp.currentPage);c=0==portfolioProp.currentPage?c+"1&nbsp;":c+('<a href="'+b+'_0_0">1</a>&nbsp;');2<portfolioProp.totalPages&&(3<=portfolioProp.currentPage&&(c+="...&nbsp;"),2<=portfolioProp.currentPage&&(c+='<a href="'+b+"_"+(portfolioProp.currentPage-1)+'_0">'+portfolioProp.currentPage+"</a>&nbsp;"),0!=portfolioProp.currentPage&&portfolioProp.currentPage!=portfolioProp.totalPages-1&&(c+=portfolioProp.currentPage+1+"&nbsp;"),3<=portfolioProp.totalPages-portfolioProp.currentPage&&(c+='<a href="'+b+"_"+(portfolioProp.currentPage+1)+'_0">'+(portfolioProp.currentPage+2)+"</a>&nbsp;"),4<=portfolioProp.totalPages-portfolioProp.currentPage&&(c+="...&nbsp;"));2<=portfolioProp.totalPages&&(c=portfolioProp.currentPage==portfolioProp.totalPages-1?c+(portfolioProp.totalPages+"&nbsp;"):c+('<a href="#'+b+"_"+(portfolioProp.totalPages-1)+'_0">'+portfolioProp.totalPages+"</a>&nbsp;"));$(a).html("Pages:&nbsp;"+c)}function initIdleTimeoutPlugin(){logging("Init idle timeout plugin");$.idleTimeout("#session_expire","#continueSession",{idleAfter:idleTimerConfig.idleTime,pollingInterval:idleTimerConfig.pollingTime,keepAliveURL:keepSessionAlivePath+"?v="+(new Date).getTime(),serverResponseEquals:"OK",warningLength:idleTimerConfig.warningTime,failedRequests:5,AJAXTimeout:2500,debugMode:idleTimerConfig.idleTimeoutDebugMode,onTimeout:function(){isChangedWithoutSubmitOnPopup=globalVars.isChangedWithoutSubmit=!1;window.location=logoutPath},onIdle:function(){$.browser.msie&&"8.0"==$.browser.version&&$("#session_overlay").css("filter","alpha(opacity=70)");$("#session_overlay").fadeIn("fast");showPopup({container:"#session_expire"})},onCountdown:function(a){$("#dialog-countdown").html(a)},onResume:function(){logging("On Resume");isChangedWithoutSubmitOnPopup=!1;closePopup("#session_expire","#session_overlay",!1)},onAbort:function(){logging("idle timer send request abort","#F00");window.location="/"},onRedirect:function(){logging("idle timer redirect to login","#F00");window.location="/"}})}function logout(){$.idleTimeout.options.onTimeout.call(this)}function init_raty_activity(){for(var a=$("#ratingDetails .readonly").toArray(),b=0;b<a.length;b++)logging("SET RATY"+$("#"+a[b].id+"_value").html()),$("#"+a[b].id).raty({path:appConfig.ratyImgPath,space:!0,width:"100px",readOnly:!0,score:$("#"+a[b].id+"_value").html()})}function transit(a,b){b=$.extend({},{page:0},b);var c=$(a).children("div");globalVars.inTransit=!globalVars.inTransit;c.eq(0).animate({left:-900},"normal","swing");c.eq(1).animate({left:0},"normal","swing",function(){globalVars.inTransit=!globalVars.inTransit});c.eq(0).remove()}function openSidebar(a){globalVars.isSidebarOpened||$("#sidebar").animate({width:350},"normal",function(){$("#sidebarToggle .arrow img").attr("src","/images/arrow_right.png");loadSidebarContent(a)})}function closeSidebar(){globalVars.isSidebarOpened&&($("#sidebarContent").fadeOut("fast",function(){$("#sidebar").animate({width:50},"normal",function(){$("#sidebarToggle .arrow img").attr("src","/images/arrow_left.png")})}),globalVars.isSidebarOpened=!1)}function loadSidebarContent(a){$.ajax({url:sidebarPath,beforeSend:function(){globalVars.isSidebarOpened=!0;logging("send sidebar content req");$("#sidebarContent").html(layoutTemplate.sidebarLoading)},success:function(b){logging("load sidebar content success");$("#sidebarContent").html(b);$("#sidebar_scrollbar").tinyscrollbar();$("#sidebar_avg_rating").raty({path:appConfig.ratyImgPath,cancel:!0,space:!0,width:"50px",readOnly:!0,score:function(){return $(this).attr("data-score")}});$("#sidebarContent").fadeIn("fast",function(){$("#sidebar_scrollbar").tinyscrollbar_update();logging("init scroll bar","#F00")});$("#sidebar_scrollbar").tinyscrollbar_update();"function"===typeof a&&a()}})}function showWindow(a,b,c){void 0==b&&(b=!0);closeSidebar();buildPopup({url:boardDetailPath+"/"+a,showPopup:b,onLoad:function(){$("#board_detail .loadingSpinner").fadeIn(500)},onClose:function(){$(document).off("click","#board-gallery .control-prev");$(document).off("click","#board-gallery .control-next")}},function(){$("#board_detail_scrollbar").tinyscrollbar();$(".input textarea").autosize(void 0,function(){$("#board_detail_scrollbar").tinyscrollbar_update()});b||$("#board_detail .loadingSpinner").show().fadeOut(300);$(".qtip.qtip-active").css("display","none");if(void 0!=c&&void 0!=searchResult){var a=!0;-1==c?(c=searchResultProp.previousSelectedIndex,a=!1):searchResultProp.previousSelectedIndex=c;var e=(c+1)%searchResult.length,f=(c-1+searchResult.length)%searchResult.length;$("#popup_board_detail .leftArea .prev-board").attr("data",searchResult[f].boardId);$("#popup_board_detail .leftArea .next-board").attr("data",searchResult[e].boardId);e=searchResult.length;5<e&&(e=5);f=Math.floor(e/2);$(".navi-gallery-img.highlight").removeClass("highlight");for(var g=0;g<e;g++){var j=(c+(g-f)+searchResult.length)%searchResult.length;j==c&&a?$(".navi-gallery").append('<span class="navi-gallery-img highlight"><a class="nailBoardLink" data="'+searchResult[j].boardId+'" title="'+htmlEntities(searchResult[j].name)+'"><img src="/100x100/'+searchResult[j].thumbnailUrl+'"/></a></span>'):$(".navi-gallery").append('<span class="navi-gallery-img"><a class="nailBoardLink" data="'+searchResult[j].boardId+'" title="'+htmlEntities(searchResult[j].name)+'"><img src="/100x100/'+searchResult[j].thumbnailUrl+'"/></a></span>')}b?$("#navigator").show("blind",{},500,function(){$("#board_detail_scrollbar").height($("#popup_board_detail").height());$("#board_detail_scrollbar").tinyscrollbar_update()}):($("#navigator").show().css("display","block"),$("#board_detail_scrollbar").height($("#popup_board_detail").height()),$("#board_detail_scrollbar").tinyscrollbar_update());$(".navi-gallery-img a").qtip(tooltipConfig)}$(document).off("click","#board-gallery .control-prev");$(document).off("click","#board-gallery .control-next");$(document).on("click","#board-gallery .control-prev",function(){galleryController("prev")});$(document).on("click","#board-gallery .control-next",function(){galleryController("next")})})}function galleryInit(){var a={wrapperWidth:$("#board-gallery .board-gallery-wrapper").width(),viewerWidth:$("#board-gallery .board-gallery-wrapper ul").width(),itemWidth:$("#board-gallery .board-gallery-wrapper ul li").width()};a.transitionWidth=a.itemWidth*Math.floor(a.wrapperWidth/a.itemWidth);return a}function galleryController(a){var b;void 0==$("#board-gallery").data("galleryAttr")?($("#board-gallery").data("galleryAttr",galleryInit()),b=$("#board-gallery").data("galleryAttr"),$("#board-gallery").data("inTransit",!1)):b=$("#board-gallery").data("galleryAttr");var c=$("#board-gallery .board-gallery-wrapper ul").position();"prev"==a?0>c.left&&!1==$("#board-gallery").data("inTransit")&&($("#board-gallery .board-gallery-wrapper ul").animate({left:"+="+b.transitionWidth},function(){$("#board-gallery").data("inTransit",!1)}),$("#board-gallery").data("inTransit",!0)):c.left-b.transitionWidth>0-b.viewerWidth&&!1==$("#board-gallery").data("inTransit")&&($("#board-gallery .board-gallery-wrapper ul").animate({left:"-="+b.transitionWidth},function(){$("#board-gallery").data("inTransit",!1)}),$("#board-gallery").data("inTransit",!0))}function showEnlargeImage(a){logging("Types of object=>"+typeof a);var b,c,d,e=screen.width,f=screen.height;"object"===typeof a&&(void 0!=a.attr("image-width")||void 0!=a.attr("image-height"))?(logging("Enlarge image=>"+a.attr("image-width")+";"+a.attr("image-height")+";"+a.attr("image-data"),"#F00"),b=a.attr("image-data"),c=parseInt(a.attr("image-width")),c+=20,d=parseInt(a.attr("image-height")),d+=20,c>=.9*e&&(c=.9*e),d>=.85*f&&(d=.85*f),window.open(imageViewerPath+"?img="+b,"_blank","width="+c+",height="+d+",scrollbars=yes,toolbar=no,location=0")):(b="object"===typeof a?a.attr("image-data"):a,$.ajax({url:imageSizeRetrieverPath+"?img="+b,beforeSend:function(){},error:function(){},success:function(a){c=parseInt(a.imageWidth);d=parseInt(a.imageHeight);c+=20;d+=20;c>=.9*e&&(c=.9*e);d>=.85*f&&(d=.85*f);window.open(imageViewerPath+"?img="+b,"_blank","width="+c+",height="+d+",scrollbars=yes,toolbar=no,location=0")},complete:function(a,b){logging("popup complete"+a+";"+b)}}))}function initTiles(a,b,c){a=$.extend({},{id:"#messageTiles",xSpace:200,ySpace:30,showInitEffect:!0,initEffectSpeed:1e3},a);$(a.id).height(0);$(a.id).data("startIndex",c);$(a.id).data("x-space",a.xSpace);$(a.id).data("y-space",a.ySpace);$(a.id+" .Tile").each(function(b){$(this).css({top:b*a.ySpace,left:b*a.xSpace,"z-index":-(b-$(a.id+" .Tile").length)})});a.showInitEffect?$(a.id).animate({height:530},a.initEffectSpeed,"easeInOutQuad",function(){"function"===typeof b&&b()}):"function"===typeof b&&b()}function nextTile(a){a=$.extend({},{id:"#messageTiles"},a);var b=$(a.id).data("xSpace"),c=$(a.id).data("ySpace"),d=$(a.id).data("startIndex");if(d<$(a.id+" .Tile").length-1){var e=$(a.id).data("startIndex")+1;$(a.id).data("startIndex",e);$(a.id+" .Tile").each(function(e){e=e<d?$(a.id+" .Tile").length-(d-e):e-d;$(this).delay(50*e).animate({left:"-="+b+"px",top:"-="+c+"px"})});$($(a.id+" .Tile")[d]).fadeOut(100)}}function prevTile(a){a=$.extend({},{id:"#messageTiles"},a);var b=$(a.id).data("xSpace"),c=$(a.id).data("ySpace");if(0<$(a.id).data("startIndex")){var d=$(a.id).data("startIndex")-1;$(a.id).data("startIndex",d);$($(a.id+" .Tile")[d]).fadeIn(100);$(a.id+" .Tile").animate({left:"+="+b+"px",top:"+="+c+"px"})}}function sendMessage(a){var b=$("#form_comment_messageBody").val(),b=b.replace(" ","");logging("MSG=>"+b.replace(" ",""));""!=b?"checked"==$("#popupCommProtocol").attr("checked")||!0==a?(logging("MESSAGE DATA=>"+$("#form_comment").serialize()),$("#commentBody").val(toHtmlFormat($("#form_comment_messageBody").val())),$.ajax({url:sendMessagePath,type:"POST",data:$("#form_comment").serialize(),beforeSend:function(){$("#send_status").html("Sending...")},success:function(a){a.hasError?$("#send_status").html("Error, please resend again"):(isChangedWithoutSubmitOnPopup=!1,$("#send_status").html("Sent successfully"),$("#form_comment_messageBody").val(""),$("#popupCommProtocol").removeAttr("checked"))}})):showConfirmation($("#board_detail .comm-protocol-holder label").text(),"Confirmation","changedWithoutSave",{onOk:function(){closePopupMsg();sendMessage(!0)}}):logging("empty message")}function sendMessageInMessageDetail(a){var b=$("#messageContent").val(),b=b.replace(" ","");logging("MSG=>"+b.replace(" ",""));""!=b&&("checked"==$("#commProtocol").attr("checked")||!0==a?(logging("REPLY MESSAGE DATA=>"+$("#replyForm").serialize()),$("#messageBody").val(toHtmlFormat($("#messageContent").val())),a=$("#replyForm").serialize(),logging("Data=>"+a),$.ajax({url:sendMessagePath,type:"POST",data:a,beforeSend:function(){$("#sendMessage").html('<span style="color:#0000CC">Sending...</span>')},success:function(a){a.hasError?(buildPopupMsg({content:"Error, please resend again",showOk:!0,title:"Error"}),$("#sendMessage").html('<a id="send_reply">Send</a>')):($("#send_status").html("Sent successfully"),a=getIdByName("tab_messages"),globalVars.isChangedWithoutSubmit=!1,$("#tabs").tabs("load",a))}})):showConfirmation($("#message_detail .comm-protocol-holder label").text(),"Confirmation","changedWithoutSave",{onOk:function(){closePopupMsg();sendMessageInMessageDetail(!0)}}))}function toHtmlFormat(a){var b="",b=a.replace(/\n/g,"<br/>");return b=b.replace(/\s/g,"&nbsp;")}function wrapMessageDetail(a){void 0==a&&(a=0);for(var b=$(".viewarea").toArray();a<b.length;a++)72<$($(b[a]).children(".context")).height()&&$(b[a]).after('<div class="readMore"><a href="javascript:void(0)">Read more...</a></div>');$("#message_content_scrollbar").tinyscrollbar_update("relative")}function displayLatestTermAndConditions(a){$.ajax({url:a,type:"GET",beforeSend:function(){logging("loading "+a);$.browser.msie&&("8.0"==$.browser.version||"7.0"==$.browser.version)&&$("#overlay").css("filter","alpha(opacity=70)");$("#overlay").fadeIn("fast")},error:function(){$("#overlay").fadeOut("fast")},success:function(a){if(!a||!a.hasError)$("#popupContainer").html(a),showPopup({},function(){$(".anchor").each(function(){void 0!=$(this).attr("data")&&$("#block_"+$(this).attr("data")).animate({top:$(this).position().top})})})},complete:function(){$("#termScrollbar").tinyscrollbar()}})}function processJSONObject(a){a=eval(a);void 0==a[a.length-1]&&a.pop();for(var b=0;b<a.length;b++)void 0==a[b].children[a[b].children.length-1]&&a[b].children.pop();return a}function resize(){if(0<$("#tabs").length){x=$("#tabs").offset();var a=x.top+$("#tabs").height();logging("size of tabs=>"+x.top+" : tabs=>"+$("#tabs").height());$("#footer").animate({top:a},"fast")}}function logging(a,b){void 0==b&&(b="#000");basicConfig.debugMode&&($("#debug").css("display","block"),(void 0==a||""==a)&&$("#debug").append("Undefined or blank <br />"),$("#debug").append('<span style="color:'+b+'">'+a+"</span><br />"),basicConfig.writeLogToConsole&&console.log(a),$("#debug").scrollTop($("#debug")[0].scrollHeight))}function doSaveDesigner(){var a=CheckDesignerInput(),b;b=$('#form_education option[data-is-others="true"]:selected');for(var c=$('#form_specialty option[data-is-others="true"]:selected'),d=$('#form_expertise option[data-is-others="true"]:selected'),e=[],f=0;f<b.length;f++)$(b[f]).val(0),e.push("otherEducation="+encodeURI($(b[f]).attr("data-text")));for(f=0;f<c.length;f++)$(c[f]).val(0),e.push("otherSpecialty="+encodeURI($(c[f]).attr("data-text")));for(f=0;f<d.length;f++)$(d[f]).val(0),e.push("otherExpertise="+encodeURI($(d[f]).attr("data-text")));b=$("#form_edit_profile").serialize()+"&"+e.join("&");0==a.length?(logging("save designer"),logging("FORM DATA=>"+$("#form_edit_profile").serialize()),a=$("#form_edit_profile").attr("action"),$.ajax({url:a,type:"POST",data:b,beforeSend:function(){$("#home_designer_edit .loadingSpinner").removeClass("disable");$("#save_designer").attr("disabled","disabled");$("#cancel_designer").attr("disabled","disabled")},success:function(a){$("#home_designer_edit .loadingSpinner").addClass("disable");$("#save_designer").removeAttr("disabled");$("#cancel_designer").removeAttr("disabled");logging(a.hasError+a.errorCode+a.errorDescription);if(!1==a.hasError){var b;globalVars.isChangedWithoutSubmit=!1;$("#userFirstName").html(a.userFirstName);$("#userLastName").html(a.userLastName);$(".bannerLogo").html('<i></i><img src="'+a.userLogo+'" />');buildPopupMsg({content:"Updated Successfully<br />(This popup will be close automatically in 5 seconds)",showOk:!0,title:"Update Profile",onShow:function(){b=setTimeout(function(){closePopupMsg();triggerHash("#home");!0==a.ucAccessChanged&&location.reload()},5e3)},onClose:function(){triggerHash("#home");!0==a.ucAccessChanged&&location.reload();clearTimeout(b);$("#profileScore").qtip("hide")},onOk:function(){closePopupMsg();triggerHash("#home");!0==a.ucAccessChanged&&location.reload();clearTimeout(b);$("#profileScore").qtip("hide")}})}else{var c=[];$(".label").removeAttr("style");for(var d=0;d<a.errors.length;d++)c.push(a.errors[d].defaultMessage),logging("Error field=>"+a.errors[d].field);$("#overlay").fadeOut("fast");buildPopupMsg({content:"Please enter data in the mandatory fields displayed in the list:<br/>"+c.join("<br/>"),showOk:!0})}}})):buildPopupMsg({content:"Below information is mandatory, we have highlighted the missing data:<br/>"+a.join("<br/>"),showOk:!0})}function CheckDesignerInput(){var a=[],a=CheckforNull("#firstName",a,"#label_first_name","Please enter First Name");return a=CheckforNull("#lastName",a,"#label_last_name","Please enter Last Name")}function doSaveCompany(){var a=CheckCompanyInput();0==a.length?(logging("save company"),logging("FORM DATA=>"+$("#form_edit_profile").serialize()),a=$("#form_edit_profile").attr("action"),$.ajax({url:a,type:"POST",data:$("#form_edit_profile").serialize(),beforeSend:function(){$("#home_edit .loadingSpinner").removeClass("disable");$("#save_company").attr("disabled","disabled");$("#cancel_company").attr("disabled","disabled")},success:function(a){$("#home_edit .loadingSpinner").addClass("disable");$("#save_company").removeAttr("disabled");$("#cancel_company").removeAttr("disabled");logging(a);logging(a.hasError+a.errorCode+a.errorDescription);if(!1==a.hasError){var c;globalVars.isChangedWithoutSubmit=!1;$("#userFirstName").html(a.userFirstName);$("#userLastName").html(a.userLastName);$(".bannerLogo").html('<i></i><img src="'+a.userLogo+'" />');buildPopupMsg({content:"Update Successfully<br />(This popup will be closed automatically in 5 seconds)",showOk:!0,title:"Update Profile",onShow:function(){c=setTimeout(function(){closePopupMsg();location.assign(homepage+"#home")},5e3)},onClose:function(){location.assign(homepage+"#home");clearTimeout(c)},onOk:function(){closePopupMsg();location.assign(homepage+"#home");clearTimeout(c)}})}else{var d=[];$(".label").removeAttr("style");for(var e=0;e<a.errors.length;e++)d.push(a.errors[e].defaultMessage),logging("Error field=>"+a.errors[e].field);$("#overlay").fadeOut("fast");buildPopupMsg({content:"Please enter data in the mandatory fields displayed in the list:<br/>"+d.join("<br/>"),showOk:!0})}}})):buildPopupMsg({content:"Below information is mandatory, we have highlighted the missing data:<br/>"+a.join("<br/>"),showOk:!0})}function CheckCompanyInput(){var a=[],a=CheckforNull("#first_name",a,"#label_first_name","Please enter First Name"),a=CheckforNull("#last_name",a,"#label_last_name","Please enter Last Name"),a=CheckforNull("#company_name",a,"#label_company_name","Please enter Company Name"),a=CheckforNull("#address1",a,"#label_address_1","Please enter Street Address 1"),a=CheckforNull("#city",a,"#label_city","Please enter City"),a=CheckforNull("#zip",a,"#label_zipcode","Please enter Zip Code"),a=CheckforNull("#form_state",a,"#label_state","Please enter State"),a=CheckforNull("#form_country",a,"#label_country","Please enter Country"),a=CheckforNullandPhoneNumber("#cellPhone",a,"#label_cell_phone","Cell Phone Number"),a=CheckforNullandPhoneNumber("#phone_no",a,"#label_phone","Work Phone Number");return a=CheckforNull("#website",a,"#label_website","Please enter Website")}function CheckCreatePortfolioInput(){var a=[],a=CheckforNull("#form_name_of_portfolio",a,"#label_portfolio_name","Please enter Portfolio Name"),a=CheckforNull("#form_description_of_portfolio",a,"#label_portfolio_description","Please enter Portfolio Description"),a=CheckforNegative("#form_division",a,"#label_division","Please enter Division");return a=CheckforNegative("#form_category",a,"#label_category","Please enter Category")}function doUpdateReferral(a){var b=CheckUpdateReferralInput(a);0==b.length?(logging("update referral=>"+a.currentTarget.id),temp=a.currentTarget.id.split("_"),tableId=parseInt(temp[2]),$("#form_referral_id").val(tableId),$("#form_referral_firstname").val($("#referral_firstname_"+tableId+" input").val()),$("#form_referral_lastname").val($("#referral_lastname_"+tableId+" input").val()),$("#form_referral_phone").val($("#referral_phone_"+tableId+" input").val()),$("#form_referral_email").val($("#referral_email_"+tableId+" input").val()),logging($("#form_referral").serialize()),$.ajax({url:updateReferralPath+"/0/"+tableId,type:"POST",data:$("#form_referral").serialize(),beforeSend:function(){var a='<a class="send_referral" id="send_referral_'+tableId+'">Update and Send</a>';$("#referral_action_"+tableId).html(a+'<br />&nbsp;<img src="/images/spinner_small.gif" style="width:12px; height:12px;"/>')},success:function(a){logging("Send referral data success");logging("update referral result=>"+a,"#F00");if(a.hasError||null==a)logging("Update Referral Error","#F00"),buildPopupMsg({content:"Update Failure.<br /> Please click update again.",showOk:!0,title:"Update Referral Error"});
else{isChangedWithoutSubmitOnPopup=!1;logging("Result"+a.result.firstName,"#0F0");logging("Result"+a.result.lastName,"#0F0");logging("Result"+a.result.phone,"#0F0");logging("Result"+a.result.email,"#0F0");$("#referral_firstname_"+tableId).html(a.result.firstName);$("#referral_lastname_"+tableId).html(a.result.lastName);$("#referral_phone_"+tableId).html(a.result.phone);$("#referral_email_"+tableId).html(a.result.email);$("#referral_status_"+tableId).html(a.result.status);$("#referral_datesent_"+tableId).html(a.result.dateSentString);$("#manageReferralTable tr:nth-child("+(tableId+1)+") td").each(function(a){$(this).delay(50*a).addClass("blink",200).removeClass("blink",600)});a='<a href="javascript:void(0)" class="resend_noti" id="resend_referral_'+tableId+'">Resend</a>';var b='<a href="javascript:void(0)" class="edit_referral" id="edit_referral_'+tableId+'">Edit</a>';$("#referral_action_"+tableId).html(a+"<br />"+b)}}})):buildPopupMsg({content:"Below information is mandatory, we have highlighted the missing data:<br/>"+b.join("<br/>"),showOk:!0})}function CheckUpdateReferralInput(a){var b=[];temp=a.currentTarget.id.split("_");tableId=temp[2];""==$("#referral_firstname_"+tableId+" input").val()&&b.push("Please Enter First Name");""==$("#referral_lastname_"+tableId+" input").val()&&b.push("Please Enter Last Name");""==$("#referral_email_"+tableId+" input").val()&&b.push("Please Enter Email");return b}function doSendReferral(a){var b=CheckUpdateReferralInput(a);0==b.length?(logging("send referral=>"+a.currentTarget.id),logging("update referral=>"+a.currentTarget.id),temp=a.currentTarget.id.split("_"),tableId=temp[2],$("#form_referral_id").val(tableId),$("#form_referral_firstname").val($("#referral_firstname_"+tableId+" input").val()),$("#form_referral_lastname").val($("#referral_lastname_"+tableId+" input").val()),$("#form_referral_phone").val($("#referral_phone_"+tableId+" input").val()),$("#form_referral_email").val($("#referral_email_"+tableId+" input").val()),logging($("#form_referral").serialize()),$.ajax({url:updateReferralPath+"/1/"+tableId,type:"POST",data:$("#form_referral").serialize(),success:function(a){logging("Send referral data success");logging("update referral result=>"+a,"#F00");if(a.hasError||null==a)logging("Update Referral Error","#F00"),buildPopupMsg({content:"Update Failure.<br /> Please click update again.",showOk:!0,title:"Update Referral Error"});else{isChangedWithoutSubmitOnPopup=!1;logging("Result"+a.result.firstName,"#0F0");logging("Result"+a.result.lastName,"#0F0");logging("Result"+a.result.phone,"#0F0");logging("Result"+a.result.email,"#0F0");$("#referral_firstname_"+tableId).html(a.result.firstName);$("#referral_lastname_"+tableId).html(a.result.lastName);$("#referral_phone_"+tableId).html(a.result.phone);$("#referral_email_"+tableId).html(a.result.email);a='<a href="javascript:void(0)" class="resend_noti" id="resend_referral_'+tableId+'">Resend</a>';var b='<a href="javascript:void(0)" class="edit_referral" id="edit_referral_'+tableId+'">Edit</a>';$("#referral_action_"+tableId).html(a+"<br />"+b)}}})):buildPopupMsg({content:"Below information is mandatory, we have highlighted the missing data:<br/>"+b.join("<br/>"),showOk:!0})}function createBoardInputChecking(){void 0==minimunBoardPrice&&(minimunBoardPrice=50);void 0==maximunBoardPrice&&(maximunBoardPrice=1e4);var a=[],b=$("#saleTypeTable tbody").children("tr").length-1;$("#create_board .detail span,#create_board .detail label").removeAttr("style");$("#label_upload_image").html("");a=CheckforNull("#form_board_name",a,"#label_board_name","Please enter Board Name");a=CheckforNull("#form_board_description",a,"#label_description","Please enter Board Description");a=CheckforNull("#portfolioId",a,"#label_portfolio","Please Select a portfolio or create a new portfolio");a=CheckforNull("#product",a,"#label_product","Please enter Product");a=CheckforNull("#productType",a,"#label_product_type","Please enter Product Type");"checked"!=$("#formBmAgreement").attr("checked")&&(HighlightLabelandPushError(a,"#formBmAgreement","Please review and accept board terms"),$("#label_formBmAgreement").css("border","2px solid #C30"));for(var c=!1,d=1;d<=b;d++)"checked"==$("#form_saletype_"+d).attr("checked")&&(c=!0);!1==c&&(a=HighlightLabelandPushError(a,"#label_sale_type","Please Select one sale type"));c=!1;for(d=1;d<=b;d++)void 0!=$("#form_saletype_"+d+"_cost").val()&&""!=$("#form_saletype_"+d+"_cost").val()&&(0!=$("#form_saletype_"+d+"_cost").val()%1&&(a=HighlightLabelandPushError(a,"#saleTypeTable input","Invalid input, FFG credit doesn't allow decimal.")),$("#form_saletype_"+d+"_cost").val()>=minimunBoardPrice&&$("#form_saletype_"+d+"_cost").val()<=maximunBoardPrice&&(c=!0));!1==c&&(a=HighlightLabelandPushError(a,"#saleTypeTable input","Please enter a valid price. It should be between "+minimunBoardPrice+" and "+maximunBoardPrice+"."));return a=CheckforNullPushtoElement("#form_board_image_url",a,"#label_upload_image","Please upload Board Image")}function createPBoardInputChecking(){var a=[];$("#create_board .detail span,#create_board .detail label").removeAttr("style");$("#label_upload_image").html("");return a=CheckforNullPushtoElement("#form_board_image_url",a,"#label_upload_image","Please upload Image")}function deleteBoard(a,b){void 0==b&&(b="c");$.ajax({url:deleteBoardPath+"/"+a,type:"GET",beforeSend:function(){buildPopupMsg({content:'<span style="color:blue;">Please wait...<span><br /><img src="/images/spinner_small.gif" style="margin-top:30px;"/>',title:"Please Wait",showOk:!1,closeByOverlay:!1,effect:!1})},success:function(a){logging("delete board result");a.hasError?(buildPopupMsg({content:a.errorDescription,showOk:!0,onOk:function(){closePopupMsg()}}),logging("ERROR OCCURED")):(logging("REFRESH BOARDS"),closePopupMsg(),$("body").trigger("refresh_board",[portfolioProp.portfolioId,b]))}})}function ToggleStatusBoard(a){$.ajax({url:toggleStatusBoardPath+"/"+a,type:"GET",success:function(a){logging("Toggle Status board result");a.hasError?(buildPopupMsg({content:a.errorDescription,showOk:!0,onOk:function(){closePopupMsg()}}),logging("ERROR OCCURED")):(logging("REFRESH BOARDS"),closePopupMsg(),$("body").trigger("refresh_board",[portfolioProp.portfolioId]))}})}function editBoard(a,b){void 0==b&&(b="c");$.ajax({url:isBoardLockedPath+"?boardId="+a,type:"GET",success:function(c){!0==c.hasLocked?buildPopupMsg({content:"This board is being purchased, it cannot be edited.",showOk:!0,onOk:function(){closePopupMsg()}}):"c"==b.toLowerCase()?triggerHash("#edit_board_"+a):triggerHash("#edit_pboard_"+a)}})}function deletePortfolio(a,b){void 0==b&&(b="portfolio_page");$.ajax({url:deletePortfolioPath+"/"+a,type:"GET",beforeSend:function(){buildPopupMsg({content:'<span style="color:blue;">Please wait...<span><br /><img src="/images/spinner_small.gif" style="margin-top:30px;"/>',title:"Please Wait",showOk:!1,closeByOverlay:!1,effect:!1})},error:function(){logging("Ajax error when deletes the portfolio")},success:function(a){a.hasError?(buildPopupMsg({content:a.errorDescription,showOk:!0,onOk:function(){closePopupMsg()}}),logging("ERROR OCCURED")):(closePopupMsg(),logging("Delete Portfolio Result=>"+a),triggerHash("#"+b+"_"+portfolioProp.currentPage+"_1"))}})}function checkSession(){logging("check session");var a=(new Date).getTime();$.ajax({url:keepSessionAlivePath+"?v="+a,headers:{"Cache-Control":"no-cache"},success:function(a){"OK"==a?logging("session still there","#F00"):"true"==$("#sessionTimeout",$("<div>"+a+"</div>")).val()&&(logging("session time out","#F00"),window.location="/")}})}function triggerHash(a){location.hash==a?$(window).hashchange():location.hash=a}function triggerPopupHash(a){var b=a.replace(/_\d+/g,"");if(-1!=$.url().attr("fragment").search(b)){var c=$.url().attr("fragment"),c=c.replace(RegExp(""+b+"[_\\d+]*"),a);triggerHash("#"+c)}else triggerHash($.url().attr("fragment")+"/"+a)}function selectTabHeader(a,b){var c=getIdByName(a,!0);void 0==b&&(b="ui-tabs-focus");-1!=c&&$("#tabs li:nth-child("+(c+1)+")").addClass(b)}function removeTabsFocusClass(a,b){var c=getIdByName(a);void 0==b&&(b="ui-tabs-focus");-1!=c&&$("#tabs li:nth-child("+(c+1)+")").removeClass(b)}function getItemIndexFromObjectContainer(a,b){var c=-1;if(void 0!=a)for(var d=0;d<a.length;d++)searchResult[d].boardId==b&&(c=d);return c}function submitChangePasswordForm(){var a=[];$("#label_currentPassowrd").removeAttr("style");$("#label_newPwd").removeAttr("style");$("#label_confirmPwd").removeAttr("style");a=CheckforNull("#currentPassword",a,"#label_currentPassowrd","Please enter Current Password");a=CheckforContainSpace("#currentPassword",a,"#label_currentPassowrd","Please check that there are no spaces in Current Password");a=CheckforNull("#newPwd",a,"#label_newPwd","Please enter New Password");a=CheckforContainSpace("#newPwd",a,"#label_newPwd","Please check that there are no spaces in New Password");a=CheckforNull("#confirmPwd",a,"#label_confirmPwd","Please enter Confirm Password");a=CheckforContainSpace("#confirmPwd",a,"#label_confirmPwd","Please check that there are no spaces in Confirm Password");if(0<a.length){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);buildPopupMsg({title:'Information <span style="#C30">!</span>',content:"Please enter data in the mandatory fields as highlighted in the screen and also displayed in the list:<br/>"+b.join("<br/>"),showOk:!0})}else $.ajax({url:$("#changePasswordForm").attr("action"),type:"POST",data:$("#changePasswordForm").serialize(),beforeSend:function(){buildPopupMsg({content:'<span style="color:blue;">Please wait...<span><br /><img src="/images/spinner_small.gif" style="margin-top:30px;"/>',title:"Please Wait",showOk:!1,closeByOverlay:!1,effect:!1})},success:function(a){if(a.hasError){for(var b=[],c=0;c<a.errors.length;c++)b.push(a.errors[c].defaultMessage),logging("Error field=>"+a.errors[c].field);buildPopupMsg({content:b.join("<br/>"),showOk:!0})}else buildPopupMsg({content:'<span style="color:blue;">Your password has beeen successfully updated.<span>',title:"Update successfully",showOk:!0,closeByOverlay:!0,effect:!0,onOk:function(){closePopup("#popupContainer","#overlay");closePopupMsg()},onClose:function(){closePopup("#popupContainer","#overlay");closePopupMsg()}})},error:function(){buildPopupMsg({content:"Our service is not available, please submit again. Thanks.",showOk:!0})}})}function checkStrength(a,b){void 0==b&&(b="#result");void 0==a&&(a=document.getElementById("#form_password").val);var c=0,d=[!1,!1,!1,!1];if(8>a.length)return $(b).removeClass(),$(b).addClass("short"),d[0]=!1,"Password should be at least 8 characters long";7<a.length&&(d[0]=!0,c+=1);a.match(/([A-Z])/)&&(d[1]=!0,c+=1);a.match(/([a-zA-Z])/)&&a.match(/([0-9])/)&&(d[2]=!0,c+=1);a.match(/([!,%,&,@,#,$,^,*,?,_,~,-])/)&&(d[3]=!0,c+=1);a.match(/(.*[!,%,&,@,#,$,^,*,?,_,~,-].*[!,%,&,@,#,$,^,*,?,_,~,-])/)&&(d[3]=!0,c+=1);if(4>c)return c="",$(b).removeClass(),$(b).addClass("weak"),d[1]?d[2]?d[3]||(c+=" 1 special character"):c+=" 1 number":c+=" 1 capital.",""!=c?"Weak. Should contain "+c:"Weak.";if(4==c)return $(b).removeClass(),$(b).addClass("good"),"Good";$(b).removeClass();$(b).addClass("strong");return"Strong"}function updateNotifPopup(a){if(a.hasUnreadAlert||a.hasUnreadMessage){if(sseUtility.eventAlertsTS!=a.latestAlertsTS||sseUtility.eventMessagesTS!=a.latestMessagesTS){logging("Got new event");sseUtility.eventAlertsTS=a.latestAlertsTS;sseUtility.eventMessagesTS=a.latestMessagesTS;var b="";!0==a.hasUnreadAlert&&(b+='<div class="notifPopup-item"><a onclick="triggerHash(\'#alerts\');">You have '+a.unreadAlertsCount+" unread alerts</a></div>");!0==a.hasUnreadMessage&&(b+='<div class="notifPopup-item"><a onclick="triggerHash(\'#messages_page_1\')">You have '+a.unreadMessagesCount+" unread messages</a></div>");$("#notifContent").html(b);$("#notifPopup").fadeIn(500).fadeOut(500).fadeIn(500);99<a.unreadMessagesCount+a.unreadAlertsCount?(99<a.unreadMessagesCount?$("#new_messages_count").html("(99+)"):$("#new_messages_count").html("("+a.unreadMessagesCount+")"),document.title="(99+) "+globalVars.title):($("#new_messages_count").html("("+a.unreadMessagesCount+")"),document.title="("+(a.unreadMessagesCount+a.unreadAlertsCount)+") "+globalVars.title);a.hasUnreadAlert&&globalVars.isSidebarOpened&&loadSidebarContent(function(){$("#sidebar_alerts").fadeOut(500).fadeIn(500).fadeOut(500).fadeIn(500).fadeOut(500).fadeIn(500)});$("#tabs").tabs("option","selected")===getIdByName("tab_alerts")&&$("#tabs").tabs("load",getIdByName("tab_alerts"))}}else $("#new_messages_count").html(""),$("#notifPopup").fadeOut(500),document.title=globalVars.title}function refershMultiselect(a){$(a).multipleSelect("refresh")}function initSSE(){if(basicConfig.enableSSE)if("undefined"!==typeof EventSource&&!0!=sseUtility.pollingMode)sseUtility.source=new EventSource(ssePath),logging("Listen SSE on path: "+ssePath),sseUtility.source.onmessage=function(a){logging(a);a=eval(a.data);updateNotifPopup(a)},sseUtility.source.onerror=function(a){logging("Error occurred!");logging(a.type)},sseUtility.source.onopen=function(a){logging("SSE connection opened");logging(a.type)};else{logging("Sorry, your browser does not support server-sent events. Using ajax polling instead");if(void 0==ssePollingDuration||null==ssePollingDuration)logging("Cannot retrieve the pollingDuration, using default value: 120000 milliseconds."),ssePollingDuration=12e4;$.ajax({url:sseAltPath,type:"GET",success:function(a){logging(a);updateNotifPopup(a)}});var a=setInterval(function(){$.ajax({url:sseAltPath,type:"GET",success:function(a){logging(a);updateNotifPopup(a)},error:function(){a.clearInterval()}})},ssePollingDuration)}}function unescapeHTML(a){return a.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&apos;/g,"'")}function htmlEntities(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function boardHashChangeHandler(a,b,c,d){a=a.split("_")[2];logging("show create board tab");$('#tabs ul li a[title="tab_create_board"]').attr("data-mode",d);void 0==a?($("#tabs").tabs("select","tab_create_board"),$("#tabs").tabs("url",getIdByName("tab_create_board"),b),$("#tabs").tabs("load",getIdByName("tab_create_board"))):($("#tabs").tabs("url",getIdByName("tab_create_board"),c+"/"+a),$("#tabs").tabs("select","tab_create_board"))}function navigate(a,b){if(!0==b)clearInterval(globalVars.blinkTimer),$(".nav").data("hasShown",!1),$(".nav").fadeOut();else if(0>=$(".nav").length&&$(body).append('<div class="nav"></div>'),$(".nav").css("top",a.offset().top+a.height()).css("left",a.offset().left+a.width()/2-$(".nav").width()/2),void 0==$(".nav").data("hasShown")||!0!=$(".nav").data("hasShown"))globalVars.blinkTimer=setInterval(blinkEffect,1e3),$(".nav").data("hasShown",!0)}function blinkEffect(){$(".nav").fadeOut(500).fadeIn(500)}function convertCreditToUsd(a){var b=a.val(),c=/(\.|\D)/g;c.test(b)&&(a.val(b.replace(c,"")),buildPopupMsg({content:messagesProp.number_only,showOk:!0,title:"Hint",onClose:function(){a.focus();closePopupMsg()},onOk:function(){a.focus();closePopupMsg()}}));void 0==creditConversionToUsd&&(creditConversionToUsd=25);isNaN(a.val())?a.next().html("0"):(b=parseInt(a.val())*creditConversionToUsd,isNaN(b)?a.next().html("0"):a.next().html(b))}function editProfileTabHandler(a){logging("init multiselect");"designer"==a.attr("user-type")&&(a={filter:!0,maxHeight:200,width:215,placeholder:"Please select",selectAll:!1},$("#form_education").multipleSelect(a),$("#form_specialty").multipleSelect(a),$("#form_expertise").multipleSelect(a),$("#form_degacc").multipleSelect(a),a.onClick=function(){profileScore()},a.onCheckAll=function(){profileScore()},a.onUncheckAll=function(){profileScore()},$("#form_languages").multipleSelect(a),a.maxHeight=150,$("#form_skills").multipleSelect(a),$("#firstName").focus())}function addOtherToMS(a){var b=a.parent().siblings(".ms-add-other");a=a.siblings(".ms-add-other-value");var c=$.trim(a.val()),d=$("<option />",{value:"0{"+c+"}",text:c,"data-text":c,"data-is-others":!0});if(c){var e=[];b.children("option").each(function(a,b){c.toUpperCase()==$(b).html().trim().toUpperCase()&&e.push($(b).val())});0<e.length?(e=e.concat(b.multipleSelect("getSelects")),b.multipleSelect("setSelects",e)):(d.prop("selected",!0),b.prepend(d).multipleSelect("refresh"));a.val("")}else a.focus()}function updateMS(a,b,c){a=""==a.serialize()?"portfolioId="+a.val():a.serialize();null!=b.val()?getProductTypeList("","","",{haveDontCareTag:!1,data:a+"&"+b.serialize(),container:"#productType",rememberOldValue:!0}):(c.html(layoutTemplate.optionDefaultProductType),refershMultiselect("#"+c.attr("id")))}function categoryMSInit(){$("#product").multipleSelect({filter:!0,maxHeight:150,width:244,placeholder:"Please select",onCheckAll:function(){updateMS($("#portfolioId"),$("#product"),$("#productType"))},onUncheckAll:function(){updateMS($("#portfolioId"),$("#product"),$("#productType"))},onClick:function(){updateMS($("#portfolioId"),$("#product"),$("#productType"))}});$("#productType").multipleSelect({filter:!0,maxHeight:150,width:244,placeholder:"Please select"})}function profileScore(){void 0==$("#profileScore").data("targetScore")&&$("#profileScore").data("currentScore",$("#profileScore").attr("profile-score"));var a=40,b=$("#profileScore").data("targetScore");""!==$("#address1").val().replace(/ /g,"")&&""!==$("#city").val().replace(/ /g,"")&&(0!=$("#form_state").val()||238!=$("#form_country").val())&&""!==$("#zip").val().replace(/ /g,"")&&0!=$("#form_country").val()?(a+=10,$(".profReqAddress").css("display","none")):$(".profReqAddress").css("display","block");""!==$("#cellPhone").val().replace(/ /g,"")&&10<=$("#cellPhone").val().length?(a+=10,$(".profReqContact").css("display","none")):$(".profReqContact").css("display","block");null!=$("#form_languages").val()?(a+=10,$(".profReqLanguage").css("display","none")):$(".profReqLanguage").css("display","block");void 0!=$("#aboutYou").val()&&""!==$("#aboutYou").val().replace(/ /g,"")?(a+=10,$(".profReqAbout").css("display","none")):$(".profReqAbout").css("display","block");null!=$("#form_skills").val()?(a+=10,$(".profReqSkill").css("display","none")):$(".profReqSkill").css("display","block");void 0!=$("#misc").val()&&""!==$("#misc").val().replace(/ /g,"")?(a+=10,$(".profReqSchools").css("display","none")):$(".profReqSchools").css("display","block");"/images/avatar_default.jpg"!=$("#form_logo_image_url").val()?$(".profPhoto").css("display","none"):$(".profPhoto").css("display","block");100==a?$(".profCompleted").css("display","block"):$(".profCompleted").css("display","none");b!=a&&$("#profileScore").qtip("show");$("#profileScore").data("targetScore",a);var c=setInterval(function(){var a=$("#profileScore").data("currentScore"),b=$("#profileScore").data("targetScore");a>b?a--:a<b?a++:(a=b,clearInterval(c),$("#profileScore").qtip("reposition"));$("#profileScore").data("currentScore",a);$("#profileScore").html(a+"%")},10)}function searchCriteriaTabHandler(){var a={filter:!0,maxHeight:150,width:215,placeholder:"Please select"};$("#form_languages").multipleSelect(a);$("#form_skills").multipleSelect(a);$("#form_spl").multipleSelect(a);$("#form_exp").multipleSelect(a);a.width=260;a.position="top";$("#form_product_type").multipleSelect(a)}function convertPriceToCredit(a){return Math.ceil(parseInt(a)/25)}