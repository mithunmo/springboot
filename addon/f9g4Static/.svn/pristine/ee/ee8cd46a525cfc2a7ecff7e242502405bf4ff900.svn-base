var basicConfig={debugMode:!1,writeLogToConsole:!1,disableRightClick:!1},usernameValue="Please enter your valid email for your username",passwordValue="Please enter your password",popupPosTop=$(window).height()/2,popupPosLeft=$(window).width()/2,isOpened=!1;$(document).ready(function(){browserChecking();setTimeout(function(){$("#username").focus()},100);$("#username").focus(function(){this.select()});$("input").placeholder();$("#scrollbar1").tinyscrollbar();$("#scrollbar2").tinyscrollbar();$("#scrollbar3").tinyscrollbar();$("#scrollbarFooter").tinyscrollbar();basicConfig.disableRightClick&&$(document).bind("contextmenu",function(){return!1});$("#submit").click(function(){browserChecking()&&!0==checkUserInput()&&doLogin()});$("#link_forget").click(function(){buildPopup({url:forgotPwdUrl})});$(document).on("keydown","#username",function(a){13==a.which&&browserChecking()&&!0==checkUserInput()&&doLogin()});$(document).on("keydown","#password",function(a){13==a.which&&browserChecking()&&!0==checkUserInput()&&doLogin()});$(document).on("keydown","#remember",function(a){13==a.which&&browserChecking()&&!0==checkUserInput()&&doLogin()});$(document).on("change","#terms_agree",function(){logging($("#terms_agree").attr("checked"));$("#terms_ok").css({"background-color":"#0457A0",cursor:"pointer"})});$(document).on("change","#terms_decline",function(){isAgree=!1;logging($("#terms_decline").attr("checked"));$("#terms_ok").css({"background-color":"#0457A0",cursor:"pointer"})});$(document).on("click",".button",function(a){logging(a.target.id);"gotoSecurity"==a.target.id?loadSecurityPanel():"gotoResult"==a.target.id?submitSequrityQuestions():"resetPwd"==a.target.id?resetPassword():"terms_ok"==a.target.id?"checked"==$("#terms_agree").attr("checked")?subimtTermAndConditions():"checked"==$("#terms_decline").attr("checked")&&closePopup():"terms_ok_login"==a.target.id?(logging("vbf"),logging($("#terms_lg").action),"checked"==$("#terms_agree_login").attr("checked")&&$("#terms_lg").submit()):"close"==a.target.id&&closePopup()});$(document).on("keydown","#email",function(a){13==a.which&&loadSecurityPanel()});$(document).on("keydown","#q1_ans",function(a){13==a.which&&submitSequrityQuestions()});$(document).on("keydown","#q2_ans",function(a){13==a.which&&submitSequrityQuestions()});$(document).on("keydown","#confirmPwd",function(a){13==a.which&&resetPassword()});$(document).on("keydown","#close",function(a){13==a.which&&(logging("close"),closePopup())});$(document).on("click",".close",function(){closePopup()});$(window).resize(function(){popupPosTop=$(window).height()/2;popupPosLeft=$(window).width()/2;logging("resize");logging("currentWidth/2="+popupPosTop);logging("currentHeight/2="+popupPosLeft);if(!0==isOpened){var a=$(".popup .header").width();$("#popupContainer").css({top:.9*(popupPosTop/2),left:popupPosLeft-a/2})}});$(document).on("keyup","#newPwd",function(){$("#result").html(checkStrength($("#newPwd").val()))});$(document).on("close_error","body",function(){logging("Receive error close information");$("#password").val("")})});function loadSecurityPanel(){""==$("#email").val()?($("#nofify_email").html("Please enter your email"),$("#nofify_email").fadeIn()):-1!=$("#email").val().search(" ")?($("#nofify_email").html("It's not an invalid email format"),$("#nofify_email").fadeIn()):loadSecurityQuestionsData()}function checkUserInput(){var a=!0;if(""==$("#username").val()||$("#username").val()==usernameValue||-1!=$("#username").val().search(" "))buildPopupMsg({content:usernameValue,title:"Username can not be empty",onShow:function(){setTimeout(function(){$("#error_button_ok").focus()},100)}}),a=!1;else if(""==$("#password").val()||$("#password").val()==passwordValue||-1!=$("#password").val().search(" "))buildPopupMsg({content:passwordValue,title:"Username can not be empty",onShow:function(){setTimeout(function(){$("#error_button_ok").focus()},100)}}),a=!1;return a}function submitSequrityQuestions(){var a=$("#forgotPwd").attr("action");logging("SUBMIT SEQ Q=>"+a);$.ajax({url:a,type:"POST",data:$("#forgotPwd").serialize(),beforeSend:function(){logging("loading "+a)},error:function(a,c,e){logging(this.url+" is "+e);$("#overlay").fadeOut("fast")},success:function(a){logging("loading "+this.url+"complete");!0==a.hasError?($("#notify_questions").html("Security answers entered do not match. Please try again."),$("#notify_questions").fadeIn()):$("#session_security").fadeOut(function(){$("#session_reset_password").fadeIn(function(){setTimeout(function(){$("#newPwd").focus()},100);$("#newPwd").focus(function(){this.select()})})})}})}function resetPassword(){var a=$("#reset_password").attr("action");$.ajax({url:a,type:"POST",data:$("#reset_password").serialize(),beforeSend:function(){logging("loading "+a)},error:function(a,c,e){logging(this.url+" is "+e);$("#overlay").fadeOut("fast")},success:function(a){logging("loading "+this.url+"complete");!1==a.hasError?$("#session_reset_password").fadeOut(function(){$("#reset_success").fadeIn(function(){setTimeout(function(){$("#close").focus()},100)})}):($("#notify_passw_mismatch").html("Your passwords do not match. Please try again."),$("#notify_passw_mismatch").fadeIn())}})}function loadSecurityQuestionsData(){var a=securityQuestionsUrl+"?userName="+$("#email").val();$.ajax({url:a,beforeSend:function(){logging("loading "+a)},error:function(a,c,e){logging(this.url+" is "+e);$("#overlay").fadeOut("fast")},success:function(a){logging("loading "+this.url+"complete");a&&(logging("result.hasError ->"+a.hasError),!0===a.hasError?($("#nofify_email").html("Email ID entered is invalid. Please try again."),$("#nofify_email").fadeIn()):($("#q1_id").attr("value",a.Q1Id),$("#q1_val").attr("value",a.Q1val),$("#q2_id").attr("value",a.Q2Id),$("#q2_val").attr("value",a.Q2val),$("#session_forget").fadeOut(function(){$("#session_security").fadeIn(function(){setTimeout(function(){$("#q1_ans").focus()},100);$("#q1_ans").focus(function(){this.select()})})})))}})}function doLogin(){var a=$("#form_login"),b=a.attr("action");$.ajax({url:b,type:"POST",data:a.serialize(),beforeSend:function(){logging("loading "+b);$.browser.msie&&"8.0"==$.browser.version&&$("#overlay").css("filter","alpha(opacity=70)");$("#overlay").fadeIn("fast")},error:function(a,b,d){logging(this.url+" is "+d);$("#overlay").fadeOut("fast")},success:function(a){logging("loading "+this.url+"complete");if(a&&a.hasError){for(var b=[],d=0;d<a.errors.length;d++)b.push(a.errors[d].defaultMessage);$("#overlay").fadeOut();buildPopupMsg({content:b.join("<br/>"),showOk:!0})}else!0===a.termsExpired?displayTermAndConditions(a.termsId):!0===a.membershipExpired?location.assign(updateMembershipPath+"?userId="+a.userId):(a=consoleHomeUrl,$(location).attr("href",a))}})}function displayTermAndConditions(a){var b=termsUrl+"/"+a;$.ajax({url:b,type:"GET",beforeSend:function(){logging("loading "+b);$.browser.msie&&"8.0"==$.browser.version&&$("#overlay").css("filter","alpha(opacity=70)");$("#overlay").fadeIn("fast")},error:function(a,b,d){logging(this.url+" is "+d);$("#overlay").fadeOut("fast")},success:function(a){logging("loading "+this.url+"complete");!a||!a.hasError?($("#popupContainer").html(a),$("#terms_ok").css({"background-color":"#333",cursor:"default"}),showPopup({},function(){$("#termScrollbar").tinyscrollbar()})):$(location).attr("href",consoleHomeUrl)}})}function subimtTermAndConditions(){var a=$("#terms_form"),b=a.attr("action");$.ajax({url:b,type:"POST",data:a.serialize(),beforeSend:function(){logging("loading "+b);$.browser.msie&&"8.0"==$.browser.version&&$("#overlay").css("filter","alpha(opacity=70)");$("#overlay").fadeIn("fast")},error:function(a,b,d){logging(this.url+" is "+d);$("#overlay").fadeOut("fast")},success:function(){logging("loading "+this.url+"complete");$(location).attr("href",consoleHomeUrl)}})}function checkStrength(a){var b=0,c=[!1,!1,!1,!1];if(6>a.length)return $("#result").removeClass(),$("#result").addClass("short"),c[0]=!1,"Password needs to contain at least 6 amount of characters";7<a.length&&(c[0]=!0,b+=1);a.match(/([A-Z])/)&&(c[1]=!0,b+=1);a.match(/([a-zA-Z])/)&&a.match(/([0-9])/)&&(c[2]=!0,b+=1);a.match(/([!,%,&,@,#,$,^,*,?,_,~,-])/)&&(c[3]=!0,b+=1);a.match(/(.*[!,%,&,@,#,$,^,*,?,_,~,-].*[!,%,&,@,#,$,^,*,?,_,~,-])/)&&(c[3]=!0,b+=1);if(4>b)return a="",$("#result").removeClass(),$("#result").addClass("weak"),c[1]?c[2]?c[3]||(a+=" 1 special character"):a+=" 1 number":a+=" 1 capital.",""!=a?"Weak. Should contain "+a:"Weak.";if(4==b)return $("#result").removeClass(),$("#result").addClass("good"),"Good";$("#result").removeClass();$("#result").addClass("strong");return"Strong"}function browserChecking(){var a=!0;if($.browser.msie){var b=$.browser.version.slice(0,$.browser.version.indexOf(".")),c=document.documentMode;logging("document mode=>"+c);b!=c?(buildPopupMsg({content:"ERROR:\nBrowser Mode and Document Mode do not match!\n\nBrowser Mode: IE"+b+".0\nDocument Mode: IE"+c+".0",showOk:!0,title:"Browser Checking Warning",showOverlay:!0}),a=!1):7>=b?(buildPopupMsg({content:"We detect your browser is IE "+b+" or lower. We support IE 8 and above. Thank you.",showOk:!0,title:"Browser Checking Warning",showOverlay:!0}),a=!1):7>=c&&(buildPopupMsg({content:"We detect the document mode of your browser is IE "+b+" or lower. We support the document mode of IE 8 and above. Thank you.",showOk:!0,title:"Browser Checking Warning",showOverlay:!0}),a=!1)}return a}function logging(a,b){void 0==b&&(b="#000");basicConfig.debugMode&&($("#debug").css("display","block"),(void 0==a||""==a)&&$("#debug").append("Undefined or blank <br />"),$("#debug").append('<span style="color:'+b+'">'+a+"</span><br />"),basicConfig.writeLogToConsole&&console.log(a),$("#debug").scrollTop($("#debug")[0].scrollHeight))}