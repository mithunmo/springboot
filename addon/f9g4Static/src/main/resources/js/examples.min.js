var timezoneOffset=new Date;checkUploadIfComplete();jQuery.browser.mobile&&buildPopupMsg({content:'<span style="color:#C30; font-size:1.5em;">Please use desktop/laptop to submit the example. Thank you.</span>',title:"NOTIFICATION",showOk:!0,closeByOverlay:!1,effect:!1,onOk:function(){location.href="/"},onClose:function(){location.href="/"}});$(".preimg-q").qtip({position:{my:"left center",at:"right center",adjust:{screen:!0,mouse:!1}},style:{classes:"qtip-light qtip-shadow"}});$("#uploadify1, #uploadify2, #uploadify3").uploadify({swf:"/js/jquery/uploadify/uploadify.swf",uploader:uploaderPath+"?mode=BOARD&filetype=ai",successTimeout:480,multi:!1,auto:!0,fileTypeDesc:"JPG Files",fileTypeExts:"*.ai; *.pdf; *.jpg; *.jpeg",buttonText:"Select Files",onCancel:function(){var a=$(this)[0].original.attr("role");$('.sample-item-preview[role="'+a+'"] .preimg').html("");""!=$('.filename_100[role="'+a+'"]').val()&&$('.sample-item-preview[role="'+a+'"] .preimg').html('<i></i><img src="/100x100/'+$('.filename_100[role="'+a+'"]').val()+'" />')},onDialogOpen:function(){var a=$(this)[0].original.attr("role");$('.sample-item-upload[role="'+a+'"] .uploadify-queue-item').remove();$('.resubmit[role="'+a+'"]').remove()},onDialogClose:function(){},onUploadProgress:function(a,b,d,c,e){a=$(this)[0].original.attr("role");$(".sample-item-preview[role='"+a+"'] a").hide();$('.sample-item-preview[role="'+a+'"] .preimg').html("");c>=e&&$(".sample-item-preview[role='"+a+"']").addClass("loading")},onUploadError:function(a,b,d,c){b=$(this)[0].original.attr("role");logging("The file "+a.name+" could not be uploaded: "+c);$(".sample-item-preview[role='"+b+"']").removeClass("loading");$(".filestatus[role='"+b+"']").val(-1)},onUploadComplete:function(a){var b=$(this)[0].original.attr("role");logging("The file "+a.name+" finished processing.");$("#uploadify"+b+"-queue .uploadify-queue-item .cancel").css("display","none")},onUploadSuccess:function(a,b,d){var c=$(this)[0].original.attr("role");$(".sample-item-preview[role='"+c+"']").removeClass("loading");logging("The file "+a.name+" was successfully uploaded with a response of "+d);if(!0==d){b="<div>"+b+"</data>";logging("FileName=>"+$("#upload_filename_100x100").val());a=$("#upload_status",b).val();d=$("#upload_isFailedProcessing",b).val();var e=$("#upload_filename",b).val(),g=$("#upload_ext",b).val(),f=$("#upload_filename_100x100",b).val(),h=$("#upload_filename_400x400",b).val();b=$("#upload_filename_original",b).val();$(".file_is_rejected[role='"+c+"']").val(!1);$(".filestatus[role='"+c+"']").val(a);$(".filename[role='"+c+"']").val(e);$(".filename_ext[role='"+c+"']").val(g);$(".filename_100[role='"+c+"']").val(f);$(".filename_400[role='"+c+"']").val(h);$(".filename_original[role='"+c+"']").val(b);$(".sample-item-preview[role='"+c+"'] .preimg").html('<i></i><img src="/100x100/'+f+'" />');"true"==d&&$(".sample-item-preview[role='"+c+"'] a").fadeIn().fadeOut().fadeIn().fadeOut().fadeIn();checkUploadIfComplete()}else buildPopupMsg({content:"The upload process is timeout. Please try again. Thank you.",showOk:!0}),$(".filestatus[role='"+c+"']").val(-1)},onFallback:function(){}});$(document).on("click","#samplesSubmit",function(){$.ajax({type:"POST",data:$("#samples").serialize()+"&timezoneOffset="+timezoneOffset.getTimezoneOffset(),beforeSend:function(){buildPopupMsg({content:layoutTemplate.loadingPopup,title:"Loading",showOk:!1,closeByOverlay:!1,effect:!1})},error:function(){unbindPopupMsgEvent();buildPopupMsg({content:"Submit error. Please try again.",showOk:!0,position:"fixed",effect:!1})},success:function(a){if(!1==a.hasError){var b="//",d=!1;3<=a.samplesSubmitted&&(b=contextRootPath+a.redirectUrl,d=!0,_gaq.push(["_trackEvent","registration","submit examples successfully","submit examples successfully",a.userId]));unbindPopupMsgEvent();buildPopupMsg({title:"Success",content:"Thank you for your submission. An email will be sent to the address you provided within 5-7 business days once your registration has been reviewed and approved.",showOk:!0,position:"fixed",effect:!1,onOk:function(){d?location.assign(b):closePopupMsg()},onClose:function(){d?location.assign(b):closePopupMsg()}})}else buildPopupMsg({content:"Submit error. Please try again.",showOk:!0,position:"fixed",effect:!1})}})});function checkUploadIfComplete(){for(var a=!0,b=0;b<$(".filename").length;b++)if(""==$(".filename")[b].value||"true"==$(".file_is_rejected")[b].value)a=!1;if(a)return $("#samplesSubmit").removeAttr("disabled"),$("#samplesSubmit").removeClass("disabled"),!0;$("#samplesSubmit").attr("disabled","disabled");$("#samplesSubmit").addClass("disabled");return!1}