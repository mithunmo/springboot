var basicConfig={debugMode:!1,writeLogToConsole:!1,disableRightClick:!1,enableSorting:!0,enableSSE:!0},appConfig={ver:1,ratyImgPath:"/images/raty_img",sidebarCloseDuration:5e3},idleTimerConfig={idleTime:1500,pollingTime:300,warningTime:300,idleTimeoutDebugMode:!1},globalVars={isWindowFocus:!1,hasClicked:0,isChangedWithoutSubmit:!1,isSidebarOpened:!1,title:document.title,sidebarTimer:null,lockObject:0},layoutTemplate={emptyPortfolioMsg:'<div class="empty" style="width:320px;"><i></i><span><a href="javascript:void(0)" id="add_manage_portfolio" style="color:#C30">Click here</a>&nbsp;to create your first portfolio!</span></div>',emptyBoardMsg:'<div class="empty"><i></i><span><a href="javascript:void(0)" id="add_manage_board" style="color:#C30">Click here</a>&nbsp;to create your first board!</span></div>',loadingMsg:'<div class="loadingSpinner"><span><img src="/images/spinner.gif" /></span></div>',loadingPortfolioMsg:'<div class="loadingSpinner"><span><img src="/images/spinner.gif" /><br />Loading Portfolio Items...</span></div>',basicConsoleFrame:'<div class="contentFrame"><div class="content" id="basicContent"><div class="loadingSpinner"><span><img src="/images/spinner.gif" /></span></div></div></div>',basicConsoleFrameWithHeader:'<div class="contentFrame" id="basicFrame"><div class="content-function"></div><div class="content with-header"><div class="loadingSpinner"><span><img src="/images/spinner.gif" /></span></div></div></div>',errorStyle:"color:#FF0000",optionDefaultMsg:'<option value="-1">-Please select one option-</option>',optionDefaultMsgWithDontCare:'<option value="-1">-Please select one option-</option><option value="-1">-Ignore-</option>',optionDefaultMsgWithDisabledAttr:'<option value="-1" disabled="disabled">-Please select one option-</option>',optionLoadingMsg:'<option value="-1" disabled="disabled">Loading...</option>',optionDefaultCategory:'<option value="-1">-Please select Division above-</option>',optionDefaultProduct:'<option value="-1">-Please select Category above-</option>',optionDefaultProductWithDontCare:'<option value="-1">-Please select Category above-</option><option value="-1">-Ignore-</option>',optionDefaultProductType:'<option value="-1" disabled="disabled">-Please select Product above-</option>',optionDefaultProductTypeWithDontCare:'<option value="-1" disabled="disabled">-Please select Product above-</option><option value="-1">-Ignore-</option>',optionEmpty:'<option value="-1">--Empty--</option>',optionEmptyWithDisabledAttr:'<option value="-1" disabled="disabled">--Empty--</option>',emptyPage:'<div class="empty"><i></i><span>Empty Page<br />Please Select Another Page</span></div>',loadingPopup:'<span style="color:blue;">Please wait....<span><br /><img src="/images/spinner_small.gif" style="margin-top:30px;"/>',sidebarLoading:'<div class="sidebar-loading"/>'},sseUtility={source:null,eventAlertsTS:"",eventMessagesTS:"",pollingMode:!1},tooltipConfig={position:{target:"mouse",my:"Top Center",at:"Bottom Center",adjust:{screen:!0,mouse:!0,x:5,y:20}},style:{classes:"qtip-blue qtip-shadow",tip:!1}};$(document).on("click",".button",function(a){if("disabled"==$(this).attr("disabled")||"true"==$(this).attr("disabled")||"true"==$(this).attr("button-disabled"))logging("disable button event hooked!"),a.stopImmediatePropagation()});$(document).ready(function(){initSSE();$(window).height();logging("main running.."+appConfig.ver);logging("Browser Version:"+window.navigator.userAgent);initIdleTimeoutPlugin();$(".cloud-zoom").livequery(function(){$(this).CloudZoom()});$(".text-wrapper,.item-label,.detail .board_name,.messageBoardId,.drawer_boardId,.checkoutBoardId,.messageDetailBoardId,.detail .name,.designWallBoardId,#designWallTiles .touchArea,.designerAccountBoardId,.boards_suggestion_boardId,.gridBoardId,span[title]").livequery(function(){$(this).qtip(tooltipConfig)});$(document).on("click",".qtip",function(){$(this).css("display","none")});basicConfig.disableRightClick&&$(document).bind("contextmenu",function(a){"contextMenu"!=a.target.id&&($("#contextMenu").css({top:a.clientY,left:a.clientX}),$("#contextMenu").show());return!1});$(window).bind("click",function(a){"contextMenu"!=a.target.id&&$("#contextMenu").hide()});$(window).bind("load",function(){logging("load","#F00");checkSession()});$(window).bind("focus",function(){globalVars.isWindowFocus||(logging("focus","#F00"),checkSession());globalVars.isWindowFocus=!0});$(window).bind("blur",function(){globalVars.isWindowFocus=!1});$(window).bind("beforeunload",function(){logging("trigger beforeunload","#F00");$("input").blur();$("textarea").blur();$($("#tabs li")[$("#tabs").tabs("option","selected")]).text();if(globalVars.isChangedWithoutSubmit||isChangedWithoutSubmitOnPopup)return logging(globalVars.isChangedWithoutSubmit+" ; "+isChangedWithoutSubmitOnPopup),"Do you want to leave the page without saving"});$(document).on("change","#form_edit_profile input, #form_edit_profile select",function(){globalVars.isChangedWithoutSubmit=!0});$(document).on("change",".popup input[type=text]",function(){isChangedWithoutSubmitOnPopup=!0});$(document).on("change",".popup textarea",function(){isChangedWithoutSubmitOnPopup=!0});$(document).on("click",".cloud-zoom",function(a){a.preventDefault()});$("#title").data("mode","max");resize();$("#tabs").tabs({spinner:"Loading..",fx:{opacity:"toggle",duration:"fast"},select:function(a,b){$("#profileScore").qtip("hide");removeTabsFocusClass("tab_manage_portfolio");removeTabsFocusClass("tab_manage_collections");removeTabsFocusClass("tab_home");selectTabHeader("tab_rating","hide");if(globalVars.isChangedWithoutSubmit)a.preventDefault(),showConfirmation("You are about to leave the page with unsaved data, Would you like to continue?","Confirmation","changedWithoutSave",{onOk:function(){closePopupMsg();globalVars.isChangedWithoutSubmit=!1;$("#tabs").tabs("select",b.index)}});else{checkSession();var c=b.tab.hash,d={"#tab_home":function(){$(c).html(layoutTemplate.basicConsoleFrame);location.hash="#home"},"#tab_home_edit_mode":function(){$(c).html(layoutTemplate.basicConsoleFrame);selectTabHeader("tab_home");$("#tab_home_edit_mode").html(layoutTemplate.basicConsoleFrame)},"#tab_alerts":function(){$("#tab_alerts").html(layoutTemplate.basicConsoleFrame);location.hash="#alerts";$("#tabs").tabs("load",getIdByName("tab_alerts"))},"#tab_get_full_access_messages":function(){location.hash="#get_full_access/messages";$("#tab_get_full_access_messages").html(layoutTemplate.basicConsoleFrame)},"#tab_get_full_access_portfolio":function(){location.hash="#get_full_access/portfolio";$("#tab_get_full_access_portfolio").html(layoutTemplate.basicConsoleFrame)},"#tab_get_full_access_collections":function(){location.hash="#get_full_access/collections";$("#tab_get_full_access_collections").html(layoutTemplate.basicConsoleFrame)},"#tab_get_full_access_account":function(){location.hash="#get_full_access/account";$("#tab_get_full_access_account").html(layoutTemplate.basicConsoleFrame)},"#tab_get_full_access_activity":function(){location.hash="#get_full_access/activity";$("#tab_get_full_access_activity").html(layoutTemplate.basicConsoleFrame)}};logging("SELECT tabName="+c);globalVars.hasClicked++;1<=globalVars.hasClicked&&closeSidebar();if("function"===typeof d[c])d[c]();else logging("Undefined tab name")}},load:function(a,b){var c=b.tab.hash,d={"#tab_home_edit_mode":function(){editProfileTabHandler($(b.tab));$("#profileScore").qtip("show")},"#tab_home":function(){$("#skill_scrollbar").tinyscrollbar();$("#lang_scrollbar").tinyscrollbar();$("#about_you_scrollbar").tinyscrollbar();$("#misc_scrollbar").tinyscrollbar();$("#adoc_scrollbar").tinyscrollbar()},"#tab_alerts":function(){$("#alert_scrollbar").tinyscrollbar()}};if("function"===typeof d[c])d[c]();else logging("Undefined tab name")},show:function(a,b){var c=b.tab.hash,d={"#tab_home":function(){$("#skill_scrollbar").tinyscrollbar();$("#lang_scrollbar").tinyscrollbar();$("#about_you_scrollbar").tinyscrollbar();$("#misc_scrollbar").tinyscrollbar();$("#adoc_scrollbar").tinyscrollbar()},"#tab_home_edit_mode":function(){logging("init multiselect");editProfileTabHandler($(b.tab));$("#profileScore").qtip("show")},"#tab_alerts":function(){$("#alert_scrollbar").tinyscrollbar()}};"function"===typeof d[c]?(logging("Execute "+d[c]+" handler"),d[c]()):logging("Undefined tab name handler")}});""==location.hash&&$("#tabs").tabs("select","tab_get_full_access_messages");$(window).hashchange(function(){hashChange()});$(window).hashchange();$(window).resize(function(){resize();globalVars.isSidebarOpened&&$("#sidebar_scrollbar").tinyscrollbar_update()});$(document).on("click","#sidebarToggle",function(){!1==globalVars.isSidebarOpened?openSidebar():closeSidebar()});$(document).on("mouseenter","#sidebarToggle",function(){$("#sidebarToggle").toggleClass("selected")});$(document).on("mouseleave","#sidebarToggle",function(){$("#sidebarToggle").toggleClass("selected")});$(document).on("mouseenter","#sidebar",function(){globalVars.isSidebarOpened&&clearTimeout(globalVars.sidebarTimer)});$(document).on("mouseleave","#sidebar",function(){globalVars.isSidebarOpened&&(globalVars.sidebarTimer=setTimeout(function(){closeSidebar()},appConfig.sidebarCloseDuration))});$(document).on("click","#sidebar_alerts",function(){logging("alerts");triggerHash("#alerts")});$(document).on("click","#sidebar_messages",function(){logging("messages");triggerHash("#get_full_access/messages")});$(document).on("click",".drawer_boardId",function(){logging("board id=>"+$(this).attr("data"));showWindow($(this).attr("data"))});$(document).on("click","#prevItem",function(){logging($("#prevItem").attr("href"));location.hash=$("#prevItem").attr("href")});$(document).on("click","#nextItem",function(){logging($("#nextItem").attr("href"));location.hash=$("#nextItem").attr("href")});$(document).on("click","#referralButton",function(){logging("referral button click");closeSidebar();buildPopup({url:referralPath})});$(document).on("click","#update_membership",function(){logging("update membership")});$(document).on("click","#update_new",function(a){logging("update new image");closeSidebar();buildUploadPopup({url:uploadPicturesPath,mode:"LOGO",filetype:"ai",previewArea:"#previewImage",onUploadSuccess:function(b){logging("USER LOGO UPLOAD FINISHED=>"+a.filename_400);-1!=b.filestatus&&(globalVars.isChangedWithoutSubmit=!0,$("#form_logo_image_url").val("/400x400/"+b.filename_400),$("#previewImage").html('<i></i><img src="/400x400/'+b.filename_400+'" />'),$("#form_logo_image_url").trigger("change"))}})});$(document).on("click","#manage_referrals",function(){logging("manage referrals");closeSidebar();buildPopup({url:manageReferralsPath},function(){$(".popup .entity").tinyscrollbar()})});$(document).on("click","#change_password",function(){buildPopup({url:changePasswordPath})});$(document).on("click","#submitChangePassword",function(){submitChangePasswordForm()});$(document).on("keydown","input[type=password]",function(a){if(32==a.which)return!1});$(document).on("keyup","#newPwd",function(){$("#result").html(checkStrength($("#newPwd").val()))});$(document).on("click","#view_terms",function(){buildPopup({url:viewTermsPath},function(){$("#termScrollbar").tinyscrollbar();$(".anchor").each(function(a){$(".rightArea .block:nth-child("+(a+1)+")").animate({top:$(this).position().top})})})});$(document).on("change","#website",function(){/^http:\/\//.test(this.value)||(this.value="http://"+this.value)});$(document).on("change","#form_country",function(){238!=$(this).val()?($("#form_state").attr("disabled","disabled"),$("#form_state").parent().addClass("inactive")):($("#form_state").removeAttr("disabled"),$("#form_state").parent().removeClass("inactive"))});$(document).on("click","#edit_profile_designer",function(){$("#tabs").tabs("select","tab_designer_home_edit_mode")});$(document).on("click","#save_designer",function(){doSaveDesigner()});$(document).on("click","#cancel_designer",function(){logging("cancel designer");$("#tabs").tabs("select","tab_home")});$(document).on("click","#upload_doc",function(){buildUploadPopup({url:uploadPicturesPath,mode:"files",filetype:"files",previewArea:"",onUploadSuccess:function(a){$("#file_result").html('<div class="added-file">'+a.original_filename+'<span class="added-file-delete" data="1"></span></div>');$("#adoc_oname").val(a.original_filename);$("#adoc_type").val(a.filename_ext);$("#adoc_iname").val(a.filename)}})});$(document).on("click",".added-file-delete",function(){$("#file_result").html("").removeClass("added-file");$("#adoc_oname").val("");$("#adoc_type").val("");$("#adoc_iname").val("")});$(document).on("keyup change","#form_edit_profile input, #form_edit_profile select, #form_edit_profile textarea, #form_logo_image_url",function(){profileScore()});$("#profileScore").livequery(function(){$(this).qtip({position:{my:"right center",at:"center left",adjust:{screen:!0,mouse:!1}},content:{text:$("#qtipDataCarrier").html()},style:{classes:"qtip-light qtip-shadow"},show:{event:"click focus"},hide:{event:""}})});$(document).on("click",".profile-progress-why",function(){buildPopup({url:whyCompleteProfilePath,onClose:function(){$("#profileScore").qtip("show")}})});$(document).on("click",".ms-add-other-button",function(){addOtherToMS($(this))});$(document).on("change","#form_education, #form_specialty, #form_expertise",function(){var a=$(this);"-2"==a.val()?(a.next().removeClass("hide"),a.next().removeAttr("disabled").focus()):(a.next().addClass("hide"),a.next().attr("disabled","disabled"))});$(document).on("click","#add_to_shopping_cart",function(){logging("add to cart","#00F");var a=$(this).attr("data");addToCart(a,function(){$("#add_to_shopping_cart").remove()})});$(document).on("click","#remove_from_shopping_cart",function(){logging("remove from cart","#00F");removeFromCart($(this).attr("data"))});$(document).on("click","#form_send_comment",function(){logging("send message");sendMessage()});$(document).on("click",".boards_suggestion_boardId",function(){logging("show board=>"+$(this).attr("data"));triggerHash("#board_item_"+$(this).attr("data"))});$(document).on("click",".enlargeImage",function(){showEnlargeImage($(this))});$(document).on("keydown","#form_comment_messageBody",function(a){(13==a.which||8==a.which)&&$("#board_detail_scrollbar").tinyscrollbar_update("relative")});$(document).on("click",".board-gallery-item",function(){$("#board_detail .leftArea .pic .main-image-wrapper").html();void 0!=$(this).attr("image-width")?$(".enlargeImage").attr("image-width",$(this).attr("image-width")):$(".enlargeImage").removeAttr("image-width");void 0!=$(this).attr("image-height")?$(".enlargeImage").attr("image-height",$(this).attr("image-height")):$(".enlargeImage").removeAttr("image-height");if("true"==$(this).attr("image-actual-size")){var a='<img src="/400x400/'+$(this).attr("image-data1")+'" />';$("#board_detail .leftArea .pic .main-image-wrapper").html(a);$(".enlargeImage").css("display","none");$("#board_detail .leftArea-hint").html("(Actual size)")}else a='<a href="/bigimage/'+$(this).attr("image-data")+'" class ="cloud-zoom" id="zoom1" rel="zoomWidth:450, softFocus: false"><img src="/400x400/'+$(this).attr("image-data1")+'" /></a>',$("#board_detail .leftArea .pic .main-image-wrapper").html(a),$("#board_detail .leftArea-hint").html("(Rollover image to zoom detail)"),1>$("#board_detail .enlargeImage").length&&$("#board_detail .leftArea .pic").append('<span class="enlargeOption"><a class="enlargeImage" image-data="">[+] Enlarge</a></span>'),$(".enlargeImage").css("display","block"),$(".enlargeImage").attr("image-data",$(this).attr("image-data"))});$(document).on("click","#referral_submit",function(){logging($("#form_referral").serialize());logging("referral submit");$.ajax({url:submitReferralPath,type:"POST",dataType:"json",data:$("#form_referral").serialize(),beforeSend:function(){$("#addReferralResult").css("color","blue").html("Processing...");$("#referral_submit").attr("disabled","disabled")},error:function(){$("#addReferralResult").css("color","red").html("Process error, please submit again. Thank you.");setTimeout(function(){$("#addReferralResult").html("")},5e3);$("#referral_submit").removeAttr("disabled")},success:function(a){$("#referral_submit").removeAttr("disabled");logging("Send referral data success");"SUCCESS"==a[0]?($("#addReferralResult").css("color","blue"),$("#addReferralResult").html(a[1]),$("#form_referral")[0].reset(),isChangedWithoutSubmitOnPopup=!1):($("#addReferralResult").css("color","red"),$("#addReferralResult").html(a[1]))}})});$(document).on("click",".edit_referral",function(a){logging("edit referral=>"+a.currentTarget.id);temp=a.currentTarget.id.split("_");tableId=temp[2];$("#referral_firstname_"+tableId).html('<input type="text" name="firstName" maxlength="30" value="'+$("#referral_firstname_"+tableId).html()+'"></input>');$("#referral_lastname_"+tableId).html('<input type="text" name="lastName" maxlength="30" value="'+$("#referral_lastname_"+tableId).html()+'"></input>');$("#referral_phone_"+tableId).html('<input type="text" name="phone" maxlength="20" value="'+$("#referral_phone_"+tableId).html()+'"></input>');$("#referral_email_"+tableId).html('<input type="text" name="email" maxlength="50" value="'+$("#referral_email_"+tableId).html()+'"></input>');a='<a class="send_referral" id="send_referral_'+tableId+'">Update and Send</a>';$("#referral_action_"+tableId).html(a+"<br />&nbsp;")});$(document).on("click",".update_referral",function(a){doUpdateReferral(a)});$(document).on("click",".resend_noti",function(a){logging("resend referral email=>"+a.currentTarget.id,"#00F");temp=a.currentTarget.id.split("_");tableId=parseInt(temp[2]);$.ajax({url:resendReferralNotiPath+"/"+tableId,type:"POST",beforeSend:function(){var a='<a href="javascript:void(0)" class="resend_noti" id="resend_referral_'+tableId+'">Resend</a><img src="/images/spinner_small.gif" style="width:12px; height:12px;"/>',c='<a href="javascript:void(0)" class="edit_referral" id="edit_referral_'+tableId+'">Edit</a>';$("#referral_action_"+tableId).html(a+"<br />"+c)},success:function(a){var c='<a href="javascript:void(0)" class="resend_noti" id="resend_referral_'+tableId+'">Resend</a>',d='<a href="javascript:void(0)" class="edit_referral" id="edit_referral_'+tableId+'">Edit</a>';$("#referral_action_"+tableId).html(c+"<br />"+d);!1==a.hasError?($("#referral_firstname_"+tableId).html(a.result.firstName),$("#referral_lastname_"+tableId).html(a.result.lastName),$("#referral_phone_"+tableId).html(a.result.phone),$("#referral_email_"+tableId).html(a.result.email),$("#referral_status_"+tableId).html(a.result.status),$("#referral_datesent_"+tableId).html(a.result.dateSentString),$("#manageReferralTable tr:nth-child("+(tableId+1)+") td").stop(!0,!0),$("#manageReferralTable tr:nth-child("+(tableId+1)+") td").each(function(a){$(this).delay(50*a).addClass("blink",200).removeClass("blink",600)})):buildPopupMsg({content:"Resend Failure.<br /> Please click resend again. Thank you.",showOk:!0,title:"Resend Error"})}})});$(document).on("click",".send_referral",function(a){doUpdateReferral(a)});$(document).on("terms_agree","#popupContainer",function(){logging("terms agree")});$(document).on("terms_decline","#popupContainer",function(){logging("terms decline")});$(document).on("click","#remove_from_cart_bybid",function(){logging("remove_from_cart_bybid"+$(this).attr("data"));delete_from_cart_by_board_id($(this).attr("data"))});$(document).on("click","#feedbackButton",function(){buildPopupMsg({title:"Your feedback is valuable!",content:'<div style="color:#C30;">Dear users, your feedback is valuable to our product and helps us improve the features.<br /> Please send your thoughts and concerns to <a href="mailto://'+staticTextPack.feedbackEmailAddr+'">'+staticTextPack.feedbackEmailAddr+"</a><br />Thank you.</div>",showOk:!0,onOk:function(){closePopupMsg()}})});$(document).on("click","#logout",function(){logging("LOGOUT");logout()});$(document).on("click","#notifPopupClose",function(){$("#notifPopup").fadeOut();document.title=globalVars.title});$(document).on("click","#phone",function(){buildPopupMsg({content:'<img src="/images/splash/contact_info.png"/>',title:"CONTACT INFO",showOk:!0,closeByOverlay:!0,effect:!0})})});function hashChange(){var a="#"+$.url().fsegment(1);if(-1!=a.search("#rating")){var b=a.split("_"),b=$.url().fsegment(2),c=$.url().fsegment(3);logging("rating=>"+d);$("#tabs").tabs("url",getIdByName("tab_rating"),ratingPath+"/"+b+"/"+c);$("#tabs").tabs("select","tab_rating")}else-1!=a.search("#alerts")?(d=getIdByName("tab_alerts"),-1!=d?($("#tabs").tabs("select",d),$("#tabs").tabs("load",d)):buildPopupMsg({content:"Please complete your profile to get full access.",showOk:!0,onOk:function(){closePopupMsg()}})):-1!=a.search("#home")?$("#tabs").tabs("select","tab_home"):-1!=a.search("#edit_designer_profile")?$("#tabs").tabs("select","tab_home_edit_mode"):-1!=a.search("#get_full_access")?(d=$.url().fsegment(2),$("#tabs").tabs("select","tab_get_full_access_"+d)):logging("close=>"+a);d="#"+$.url().attr("fragment");if(-1!=d.search("#nail")){a=d.match("#nail[_\\d+]*");void 0==searchResult&&$.ajax({url:searchResultPath,type:"POST",async:!1,beforeSend:function(){logging("loading")},error:function(){logging("syncing search result failed")},success:function(a){searchResult=a.searchResults;searchResultProp.totalPages=Math.ceil(searchResult.length/searchResultProp.itemsPerPage)}});var b=a[0].split("_"),d=b[1],a=!0;logging("show board item=>"+d);0<$("#board_detail").length&&(a=!1);closeSidebar();showWindow(d,a,getItemIndexFromObjectContainer(searchResult,d))}else-1!=d.search("#board_item")?(b=a.split("_"),d=b[2],a=!0,logging("show board item=>"+d),0<$("#board_detail").length&&(a=!1),closeSidebar(),showWindow(d,a,getItemIndexFromObjectContainer(searchResult,d))):closePopup()}function getIdByName(a){for(var b=$("#tabs").data("tabs").anchors,c=0;c<b.length;c++)if(b[c].title==a)return c;return-1}function initIdleTimeoutPlugin(){logging("Init idle timeout plugin");$.idleTimeout("#session_expire","#continueSession",{idleAfter:idleTimerConfig.idleTime,pollingInterval:idleTimerConfig.pollingTime,keepAliveURL:keepSessionAlivePath,serverResponseEquals:"OK",warningLength:idleTimerConfig.warningTime,failedRequests:5,AJAXTimeout:2500,debugMode:idleTimerConfig.idleTimeoutDebugMode,onTimeout:function(){isChangedWithoutSubmitOnPopup=globalVars.isChangedWithoutSubmit=!1;window.location=logoutPath},onIdle:function(){$.browser.msie&&"8.0"==$.browser.version&&$("#session_overlay").css("filter","alpha(opacity=70)");$("#session_overlay").fadeIn("fast");showPopup({container:"#session_expire"})},onCountdown:function(a){$("#dialog-countdown").html(a)},onResume:function(){logging("On Resume");isChangedWithoutSubmitOnPopup=!1;closePopup("#session_expire","#session_overlay",!1)},onAbort:function(){logging("idle timer send request abort","#F00");window.location=loginPath},onRedirect:function(){logging("idle timer redirect to login","#F00");window.location=loginPath}})}function logout(){$.idleTimeout.options.onTimeout.call(this)}function openSidebar(a){globalVars.isSidebarOpened||$("#sidebar").animate({width:350},"normal",function(){$("#sidebarToggle .arrow img").attr("src","/images/arrow_right.png");loadSidebarContent(a)})}function closeSidebar(){globalVars.isSidebarOpened&&($("#sidebarContent").fadeOut("fast",function(){$("#sidebar").animate({width:50},"normal",function(){$("#sidebarToggle .arrow img").attr("src","/images/arrow_left.png")})}),globalVars.isSidebarOpened=!1)}function loadSidebarContent(a){$.ajax({url:sidebarPath,beforeSend:function(){globalVars.isSidebarOpened=!0;logging("send sidebar content req");$("#sidebarContent").html(layoutTemplate.sidebarLoading)},success:function(b){logging("load sidebar content success");$("#sidebarContent").html(b);$("#sidebar_scrollbar").tinyscrollbar();$("#sidebar_avg_rating").raty({path:appConfig.ratyImgPath,cancel:!0,space:!0,width:"50px",readOnly:!0,score:function(){return $(this).attr("data-score")}});$("#sidebarContent").fadeIn("fast",function(){$("#sidebar_scrollbar").tinyscrollbar_update();logging("init scroll bar","#F00")});$("#sidebar_scrollbar").tinyscrollbar_update();"function"===typeof a&&a()}})}function showWindow(a,b,c){void 0==b&&(b=!0);closeSidebar();buildPopup({url:boardDetailPath+"/"+a,showPopup:b,onLoad:function(){$("#board_detail .loadingSpinner").fadeIn(500)},onClose:function(){$(document).off("click","#board-gallery .control-prev");$(document).off("click","#board-gallery .control-next")}},function(){$("#board_detail_scrollbar").tinyscrollbar();$(".input textarea").autosize(void 0,function(){$("#board_detail_scrollbar").tinyscrollbar_update()});b||$("#board_detail .loadingSpinner").show().fadeOut(300);$(".qtip.qtip-active").css("display","none");if(void 0!=c&&void 0!=searchResult){var a=!0;-1==c?(c=searchResultProp.previousSelectedIndex,a=!1):searchResultProp.previousSelectedIndex=c;var f=(c+1)%searchResult.length,e=(c-1+searchResult.length)%searchResult.length;$("#popup_board_detail .leftArea .prev-board").attr("data",searchResult[e].boardId);$("#popup_board_detail .leftArea .next-board").attr("data",searchResult[f].boardId);f=searchResult.length;5<f&&(f=5);e=Math.floor(f/2);$(".navi-gallery-img.highlight").removeClass("highlight");for(var h=0;h<f;h++){var g=(c+(h-e)+searchResult.length)%searchResult.length;g==c&&a?$(".navi-gallery").append('<span class="navi-gallery-img highlight"><a class="nailBoardLink" data="'+searchResult[g].boardId+'" title="'+htmlEntities(searchResult[g].name)+'"><img src="/100x100/'+searchResult[g].thumbnailUrl+'"/></a></span>'):$(".navi-gallery").append('<span class="navi-gallery-img"><a class="nailBoardLink" data="'+searchResult[g].boardId+'" title="'+htmlEntities(searchResult[g].name)+'"><img src="/100x100/'+searchResult[g].thumbnailUrl+'"/></a></span>')}b?$("#navigator").show("blind",{},500,function(){$("#board_detail_scrollbar").height($("#popup_board_detail").height());$("#board_detail_scrollbar").tinyscrollbar_update()}):($("#navigator").show().css("display","block"),$("#board_detail_scrollbar").height($("#popup_board_detail").height()),$("#board_detail_scrollbar").tinyscrollbar_update());$(".navi-gallery-img a").qtip(tooltipConfig)}$(document).off("click","#board-gallery .control-prev");$(document).off("click","#board-gallery .control-next");$(document).on("click","#board-gallery .control-prev",function(){galleryController("prev")});$(document).on("click","#board-gallery .control-next",function(){galleryController("next")})})}function galleryInit(){var a={wrapperWidth:$("#board-gallery .board-gallery-wrapper").width(),viewerWidth:$("#board-gallery .board-gallery-wrapper ul").width(),itemWidth:$("#board-gallery .board-gallery-wrapper ul li").width()};a.transitionWidth=a.itemWidth*Math.floor(a.wrapperWidth/a.itemWidth);return a}function galleryController(a){var b;void 0==$("#board-gallery").data("galleryAttr")?($("#board-gallery").data("galleryAttr",galleryInit()),b=$("#board-gallery").data("galleryAttr"),$("#board-gallery").data("inTransit",!1)):b=$("#board-gallery").data("galleryAttr");var c=$("#board-gallery .board-gallery-wrapper ul").position();"prev"==a?0>c.left&&!1==$("#board-gallery").data("inTransit")&&($("#board-gallery .board-gallery-wrapper ul").animate({left:"+="+b.transitionWidth},function(){$("#board-gallery").data("inTransit",!1)}),$("#board-gallery").data("inTransit",!0)):c.left-b.transitionWidth>0-b.viewerWidth&&!1==$("#board-gallery").data("inTransit")&&($("#board-gallery .board-gallery-wrapper ul").animate({left:"-="+b.transitionWidth},function(){$("#board-gallery").data("inTransit",!1)}),$("#board-gallery").data("inTransit",!0))}function showEnlargeImage(a){logging("Types of object=>"+typeof a);var b,c,d,f=screen.width,e=screen.height;"object"===typeof a&&(void 0!=a.attr("image-width")||void 0!=a.attr("image-height"))?(logging("Enlarge image=>"+a.attr("image-width")+";"+a.attr("image-height")+";"+a.attr("image-data"),"#F00"),b=a.attr("image-data"),c=parseInt(a.attr("image-width")),c+=20,d=parseInt(a.attr("image-height")),d+=20,c>=.9*f&&(c=.9*f),d>=.85*e&&(d=.85*e),window.open(imageViewerPath+"?img="+b,"_blank","width="+c+",height="+d+",scrollbars=yes,toolbar=no,location=0")):(b="object"===typeof a?a.attr("image-data"):a,$.ajax({url:imageSizeRetrieverPath+"?img="+b,beforeSend:function(){},error:function(){},success:function(a){c=parseInt(a.imageWidth);d=parseInt(a.imageHeight);c+=20;d+=20;c>=.9*f&&(c=.9*f);d>=.85*e&&(d=.85*e);window.open(imageViewerPath+"?img="+b,"_blank","width="+c+",height="+d+",scrollbars=yes,toolbar=no,location=0")},complete:function(a,c){logging("popup complete"+a+";"+c)}}))}function displayLatestTermAndConditions(a){$.ajax({url:a,type:"GET",beforeSend:function(){logging("loading "+a);$.browser.msie&&("8.0"==$.browser.version||"7.0"==$.browser.version)&&$("#overlay").css("filter","alpha(opacity=70)");$("#overlay").fadeIn("fast")},error:function(){$("#overlay").fadeOut("fast")},success:function(a){if(!a||!a.hasError)$("#popupContainer").html(a),showPopup({},function(){$(".anchor").each(function(){void 0!=$(this).attr("data")&&$("#block_"+$(this).attr("data")).animate({top:$(this).position().top})})})},complete:function(){$("#termScrollbar").tinyscrollbar()}})}function resize(){if(0<$("#tabs").length){x=$("#tabs").offset();var a=x.top+$("#tabs").height();logging("size of tabs=>"+x.top+" : tabs=>"+$("#tabs").height());$("#footer").animate({top:a},"fast")}}function logging(a,b){void 0==b&&(b="#000");basicConfig.debugMode&&($("#debug").css("display","block"),(void 0==a||""==a)&&$("#debug").append("Undefined or blank <br />"),$("#debug").append('<span style="color:'+b+'">'+a+"</span><br />"),basicConfig.writeLogToConsole&&console.log(a),$("#debug").scrollTop($("#debug")[0].scrollHeight))}function doSaveDesigner(){var a=CheckDesignerInput(),b;b=$('#form_education option[data-is-others="true"]:selected');for(var c=$('#form_specialty option[data-is-others="true"]:selected'),d=$('#form_expertise option[data-is-others="true"]:selected'),f=[],e=0;e<b.length;e++)$(b[e]).val(0),f.push("otherEducation="+encodeURI($(b[e]).attr("data-text")));for(e=0;e<c.length;e++)$(c[e]).val(0),f.push("otherSpecialty="+encodeURI($(c[e]).attr("data-text")));for(e=0;e<d.length;e++)$(d[e]).val(0),f.push("otherExpertise="+encodeURI($(d[e]).attr("data-text")));b=$("#form_edit_profile").serialize()+"&"+f.join("&");0==a.length?(logging("save designer"),logging("FORM DATA=>"+$("#form_edit_profile").serialize()),a=$("#form_edit_profile").attr("action"),$.ajax({url:a,type:"POST",data:b,beforeSend:function(){$("#home_designer_edit .loadingSpinner").removeClass("disable");$("#save_designer").attr("disabled","disabled");$("#cancel_designer").attr("disabled","disabled")},success:function(a){$("#home_designer_edit .loadingSpinner").addClass("disable");$("#save_designer").removeAttr("disabled");$("#cancel_designer").removeAttr("disabled");logging(a.hasError+a.errorCode+a.errorDescription);if(!1==a.hasError){var c;globalVars.isChangedWithoutSubmit=!1;$("#userFirstName").html(a.userFirstName);$("#userLastName").html(a.userLastName);$(".bannerLogo").html('<i></i><img src="'+a.userLogo+'" />');buildPopupMsg({content:"Updated Successfully<br />(This popup will be close automatically in 5 seconds)",showOk:!0,title:"Update Profile",onShow:function(){c=setTimeout(function(){closePopupMsg();triggerHash("#home");!0==a.ucAccessChanged&&location.reload()},5e3)},onClose:function(){triggerHash("#home");!0==a.ucAccessChanged&&location.reload();clearTimeout(c);$("#profileScore").qtip("hide")},onOk:function(){closePopupMsg();triggerHash("#home");!0==a.ucAccessChanged&&location.reload();clearTimeout(c);$("#profileScore").qtip("hide")}})}else{var b=[];$(".label").removeAttr("style");for(var d=0;d<a.errors.length;d++)b.push(a.errors[d].defaultMessage),logging("Error field=>"+a.errors[d].field);$("#overlay").fadeOut("fast");buildPopupMsg({content:"Please enter data in the mandatory fields displayed in the list:<br/>"+b.join("<br/>"),showOk:!0})
}}})):buildPopupMsg({content:"Below information is mandatory, we have highlighted the missing data:<br/>"+a.join("<br/>"),showOk:!0})}function CheckDesignerInput(){var a=[],a=CheckforNull("#firstName",a,"#label_first_name","Please enter First Name");return a=CheckforNull("#lastName",a,"#label_last_name","Please enter Last Name")}function doUpdateReferral(a){var b=CheckUpdateReferralInput(a);0==b.length?(logging("update referral=>"+a.currentTarget.id),temp=a.currentTarget.id.split("_"),tableId=parseInt(temp[2]),$("#form_referral_id").val(tableId),$("#form_referral_firstname").val($("#referral_firstname_"+tableId+" input").val()),$("#form_referral_lastname").val($("#referral_lastname_"+tableId+" input").val()),$("#form_referral_phone").val($("#referral_phone_"+tableId+" input").val()),$("#form_referral_email").val($("#referral_email_"+tableId+" input").val()),logging($("#form_referral").serialize()),$.ajax({url:updateReferralPath+"/0/"+tableId,type:"POST",data:$("#form_referral").serialize(),beforeSend:function(){var a='<a class="send_referral" id="send_referral_'+tableId+'">Update and Send</a>';$("#referral_action_"+tableId).html(a+'<br />&nbsp;<img src="/images/spinner_small.gif" style="width:12px; height:12px;"/>')},success:function(a){logging("Send referral data success");logging("update referral result=>"+a,"#F00");if(a.hasError||null==a)logging("Update Referral Error","#F00"),buildPopupMsg({content:"Update Failure.<br /> Please click update again.",showOk:!0,title:"Update Referral Error"});else{isChangedWithoutSubmitOnPopup=!1;logging("Result"+a.result.firstName,"#0F0");logging("Result"+a.result.lastName,"#0F0");logging("Result"+a.result.phone,"#0F0");logging("Result"+a.result.email,"#0F0");$("#referral_firstname_"+tableId).html(a.result.firstName);$("#referral_lastname_"+tableId).html(a.result.lastName);$("#referral_phone_"+tableId).html(a.result.phone);$("#referral_email_"+tableId).html(a.result.email);$("#referral_status_"+tableId).html(a.result.status);$("#referral_datesent_"+tableId).html(a.result.dateSentString);$("#manageReferralTable tr:nth-child("+(tableId+1)+") td").each(function(a){$(this).delay(50*a).addClass("blink",200).removeClass("blink",600)});a='<a href="javascript:void(0)" class="resend_noti" id="resend_referral_'+tableId+'">Resend</a>';var b='<a href="javascript:void(0)" class="edit_referral" id="edit_referral_'+tableId+'">Edit</a>';$("#referral_action_"+tableId).html(a+"<br />"+b)}}})):buildPopupMsg({content:"The fields need to be enter in the following fields which are already highlighted in correspond fields:<br/>"+b.join("<br/>"),showOk:!0})}function CheckUpdateReferralInput(a){var b=[];temp=a.currentTarget.id.split("_");tableId=temp[2];""==$("#referral_firstname_"+tableId+" input").val()&&b.push("Please Enter First Name");""==$("#referral_lastname_"+tableId+" input").val()&&b.push("Please Enter Last Name");""==$("#referral_email_"+tableId+" input").val()&&b.push("Please Enter Email");return b}function doSendReferral(a){var b=CheckUpdateReferralInput(a);0==b.length?(logging("send referral=>"+a.currentTarget.id),logging("update referral=>"+a.currentTarget.id),temp=a.currentTarget.id.split("_"),tableId=temp[2],$("#form_referral_id").val(tableId),$("#form_referral_firstname").val($("#referral_firstname_"+tableId+" input").val()),$("#form_referral_lastname").val($("#referral_lastname_"+tableId+" input").val()),$("#form_referral_phone").val($("#referral_phone_"+tableId+" input").val()),$("#form_referral_email").val($("#referral_email_"+tableId+" input").val()),logging($("#form_referral").serialize()),$.ajax({url:updateReferralPath+"/1/"+tableId,type:"POST",data:$("#form_referral").serialize(),success:function(a){logging("Send referral data success");logging("update referral result=>"+a,"#F00");if(a.hasError||null==a)logging("Update Referral Error","#F00"),buildPopupMsg({content:"Update Failure.<br /> Please click update again.",showOk:!0,title:"Update Referral Error"});else{isChangedWithoutSubmitOnPopup=!1;logging("Result"+a.result.firstName,"#0F0");logging("Result"+a.result.lastName,"#0F0");logging("Result"+a.result.phone,"#0F0");logging("Result"+a.result.email,"#0F0");$("#referral_firstname_"+tableId).html(a.result.firstName);$("#referral_lastname_"+tableId).html(a.result.lastName);$("#referral_phone_"+tableId).html(a.result.phone);$("#referral_email_"+tableId).html(a.result.email);a='<a href="javascript:void(0)" class="resend_noti" id="resend_referral_'+tableId+'">Resend</a>';var b='<a href="javascript:void(0)" class="edit_referral" id="edit_referral_'+tableId+'">Edit</a>';$("#referral_action_"+tableId).html(a+"<br />"+b)}}})):buildPopupMsg({content:"The fields need to be enter in the following fields which are already highlighted in correspond fields:<br/>"+b.join("<br/>"),showOk:!0})}function checkSession(){logging("check session");$.ajax({url:keepSessionAlivePath,success:function(a){"OK"==a?logging("session still there","#F00"):"true"==$("#sessionTimeout",$(a)).val()&&(logging("session time out","#F00"),window.location=loginPath)}})}function triggerHash(a){location.hash==a?$(window).hashchange():location.hash=a}function triggerPopupHash(a){var b=a.replace(/_\d+/g,"");if(-1!=$.url().attr("fragment").search(b)){var c=$.url().attr("fragment"),c=c.replace(RegExp(""+b+"[_\\d+]*"),a);triggerHash("#"+c)}else triggerHash($.url().attr("fragment")+"/"+a)}function selectTabHeader(a,b){var c=getIdByName(a);void 0==b&&(b="ui-tabs-focus");-1!=c&&$("#tabs li:nth-child("+(c+1)+")").addClass(b)}function removeTabsFocusClass(a,b){var c=getIdByName(a);void 0==b&&(b="ui-tabs-focus");-1!=c&&$("#tabs li:nth-child("+(c+1)+")").removeClass(b)}function getItemIndexFromObjectContainer(a,b){var c=-1;if(void 0!=a)for(var d=0;d<a.length;d++)searchResult[d].boardId==b&&(c=d);return c}function submitChangePasswordForm(){var a=[];$("#label_currentPassowrd").removeAttr("style");$("#label_newPwd").removeAttr("style");$("#label_confirmPwd").removeAttr("style");a=CheckforNull("#currentPassword",a,"#label_currentPassowrd","Please enter Current Password");a=CheckforContainSpace("#currentPassword",a,"#label_currentPassowrd","Please check that there are no spaces in Current Password");a=CheckforNull("#newPwd",a,"#label_newPwd","Please enter New Password");a=CheckforContainSpace("#newPwd",a,"#label_newPwd","Please check that there are no spaces in New Password");a=CheckforNull("#confirmPwd",a,"#label_confirmPwd","Please enter Confirm Password");a=CheckforContainSpace("#confirmPwd",a,"#label_confirmPwd","Please check that there are no spaces in Confirm Password");if(0<a.length){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);buildPopupMsg({title:'Information <span style="#C30">!</span>',content:"Please enter data in the mandatory fields as highlighted in the screen and also displayed in the list:<br/>"+b.join("<br/>"),showOk:!0})}else $.ajax({url:$("#changePasswordForm").attr("action"),type:"POST",data:$("#changePasswordForm").serialize(),beforeSend:function(){buildPopupMsg({content:'<span style="color:blue;">Please wait...<span><br /><img src="/images/spinner_small.gif" style="margin-top:30px;"/>',title:"Please Wait",showOk:!1,closeByOverlay:!1,effect:!1})},success:function(a){if(a.hasError){for(var b=[],c=0;c<a.errors.length;c++)b.push(a.errors[c].defaultMessage),logging("Error field=>"+a.errors[c].field);buildPopupMsg({content:b.join("<br/>"),showOk:!0})}else buildPopupMsg({content:'<span style="color:blue;">Your password has beeen successfully updated.<span>',title:"Update successfully",showOk:!0,closeByOverlay:!0,effect:!0,onOk:function(){closePopup("#popupContainer","#overlay");closePopupMsg()},onClose:function(){closePopup("#popupContainer","#overlay");closePopupMsg()}})},error:function(){buildPopupMsg({content:"Our service is not available, please submit again. Thanks.",showOk:!0})}})}function checkStrength(a,b){void 0==b&&(b="#result");void 0==a&&(a=document.getElementById("#form_password").val);var c=0,d=[!1,!1,!1,!1];if(8>a.length)return $(b).removeClass(),$(b).addClass("short"),d[0]=!1,"Password should be at least 8 characters long";7<a.length&&(d[0]=!0,c+=1);a.match(/([A-Z])/)&&(d[1]=!0,c+=1);a.match(/([a-zA-Z])/)&&a.match(/([0-9])/)&&(d[2]=!0,c+=1);a.match(/([!,%,&,@,#,$,^,*,?,_,~,-])/)&&(d[3]=!0,c+=1);a.match(/(.*[!,%,&,@,#,$,^,*,?,_,~,-].*[!,%,&,@,#,$,^,*,?,_,~,-])/)&&(d[3]=!0,c+=1);if(4>c)return c="",$(b).removeClass(),$(b).addClass("weak"),d[1]?d[2]?d[3]||(c+=" 1 special character"):c+=" 1 number":c+=" 1 capital.",""!=c?"Weak. Should contain "+c:"Weak.";if(4==c)return $(b).removeClass(),$(b).addClass("good"),"Good";$(b).removeClass();$(b).addClass("strong");return"Strong"}function updateNotifPopup(a){if(a.hasUnreadAlert||a.hasUnreadMessage){if(sseUtility.eventAlertsTS!=a.latestAlertsTS||sseUtility.eventMessagesTS!=a.latestMessagesTS){logging("Got new event");sseUtility.eventAlertsTS=a.latestAlertsTS;sseUtility.eventMessagesTS=a.latestMessagesTS;var b="";!0==a.hasUnreadAlert&&(b+='<div class="notifPopup-item"><a onclick="triggerHash(\'#alerts\');">You have '+a.unreadAlertsCount+" unread alerts</a></div>");!0==a.hasUnreadMessage&&(b+='<div class="notifPopup-item"><a onclick="triggerHash(\'#messages_page_1\')">You have '+a.unreadMessagesCount+" unread messages</a></div>");$("#notifContent").html(b);$("#notifPopup").fadeIn(500).fadeOut(500).fadeIn(500);99<a.unreadMessagesCount+a.unreadAlertsCount?(99<a.unreadMessagesCount?$("#new_messages_count").html("(99+)"):$("#new_messages_count").html("("+a.unreadMessagesCount+")"),document.title="(99+) "+globalVars.title):($("#new_messages_count").html("("+a.unreadMessagesCount+")"),document.title="("+(a.unreadMessagesCount+a.unreadAlertsCount)+") "+globalVars.title);a.hasUnreadAlert&&globalVars.isSidebarOpened&&loadSidebarContent(function(){$("#sidebar_alerts").fadeOut(500).fadeIn(500).fadeOut(500).fadeIn(500).fadeOut(500).fadeIn(500)});$("#tabs").tabs("option","selected")===getIdByName("tab_alerts")&&$("#tabs").tabs("load",getIdByName("tab_alerts"))}}else $("#new_messages_count").html(""),$("#notifPopup").fadeOut(500),document.title=globalVars.title}function refershMultiselect(a){$(a).removeClass("mselect-hidden");$(a).multiselect({addText:"",size:3,toggleAddButton:!1,height:100});1<$(a+" ~ .mselect").length&&$(a+" ~ .mselect:gt(0)").remove()}function initSSE(){if(basicConfig.enableSSE)if("undefined"!==typeof EventSource&&!0!=sseUtility.pollingMode)sseUtility.source=new EventSource(ssePath),logging("Listen SSE on path: "+ssePath),sseUtility.source.onmessage=function(a){logging(a);a=eval(a.data);updateNotifPopup(a)},sseUtility.source.onerror=function(a){logging("Error occurred!");logging(a.type)},sseUtility.source.onopen=function(a){logging("SSE connection opened");logging(a.type)};else{logging("Sorry, your browser does not support server-sent events. Using ajax polling instead");if(void 0==ssePollingDuration||null==ssePollingDuration)logging("Cannot retrieve the pollingDuration, using default value: 120000 milliseconds."),ssePollingDuration=12e4;$.ajax({url:sseAltPath,type:"GET",success:function(a){logging(a);updateNotifPopup(a)}});var a=setInterval(function(){$.ajax({url:sseAltPath,type:"GET",success:function(a){logging(a);updateNotifPopup(a)},error:function(){a.clearInterval()}})},ssePollingDuration)}}function unescapeHTML(a){return a.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&apos;/g,"'")}function htmlEntities(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function addOtherToMS(a){var b=a.parent().siblings(".ms-add-other");a=a.siblings(".ms-add-other-value");var c=$.trim(a.val()),d=$("<option />",{value:"0{"+c+"}",text:c,"data-text":c,"data-is-others":!0});c?(d.prop("selected",!0),a.val(""),b.prepend(d).multipleSelect("refresh")):a.focus()}function editProfileTabHandler(a){logging("init multiselect");"designer"==a.attr("user-type")&&(a={filter:!0,maxHeight:200,width:215,placeholder:"Please select",selectAll:!1},$("#form_education").multipleSelect(a),$("#form_specialty").multipleSelect(a),$("#form_expertise").multipleSelect(a),$("#form_degacc").multipleSelect(a),a.onClick=function(){profileScore()},a.onCheckAll=function(){profileScore()},a.onUncheckAll=function(){profileScore()},$("#form_languages").multipleSelect(a),a.maxHeight=150,$("#form_skills").multipleSelect(a),$("#firstName").focus())}function profileScore(){void 0==$("#profileScore").data("targetScore")&&$("#profileScore").data("currentScore",$("#profileScore").attr("profile-score"));var a=40,b=$("#profileScore").data("targetScore");""!==$("#address1").val().replace(/ /g,"")&&""!==$("#city").val().replace(/ /g,"")&&(0!=$("#form_state").val()||238!=$("#form_country").val())&&""!==$("#zip").val().replace(/ /g,"")&&0!=$("#form_country").val()?(a+=10,$(".profReqAddress").css("display","none")):$(".profReqAddress").css("display","block");""!==$("#cellPhone").val().replace(/ /g,"")&&10<=$("#cellPhone").val().length?(a+=10,$(".profReqContact").css("display","none")):$(".profReqContact").css("display","block");null!=$("#form_languages").val()?(a+=10,$(".profReqLanguage").css("display","none")):$(".profReqLanguage").css("display","block");""!==$("#aboutYou").val().replace(/ /g,"")?(a+=10,$(".profReqAbout").css("display","none")):$(".profReqAbout").css("display","block");null!=$("#form_skills").val()?(a+=10,$(".profReqSkill").css("display","none")):$(".profReqSkill").css("display","block");""!==$("#misc").val().replace(/ /g,"")?(a+=10,$(".profReqSchools").css("display","none")):$(".profReqSchools").css("display","block");"/images/avatar_default.jpg"!=$("#form_logo_image_url").val()?$(".profPhoto").css("display","none"):$(".profPhoto").css("display","block");100==a?$(".profCompleted").css("display","block"):$(".profCompleted").css("display","none");b!=a&&$("#profileScore").qtip("show");$("#profileScore").data("targetScore",a);var c=setInterval(function(){var a=$("#profileScore").data("currentScore"),b=$("#profileScore").data("targetScore");a>b?a--:a<b?a++:(a=b,clearInterval(c),$("#profileScore").qtip("reposition"));$("#profileScore").data("currentScore",a);$("#profileScore").html(a+"%")},10)}