var popupPosTop=$(window).height()/2,popupPosLeft=$(window).width()/2,isOpened=!1,isChangedWithoutSubmitOnPopup=!1,popupTemplate={loadingSpinner:'<div class="loading-spinner"><img src="/images/spinner_small.gif"/></div>'};$(document).ready(function(){popupPosTop=$(window).height()/2;popupPosLeft=$(window).width()/2});$(window).resize(function(){centerPopup()});$(document).on("change","#terms_agree",function(){logging($("#terms_agree").attr("checked"));$("#terms_ok").removeClass("disabled").removeAttr("button-disabled")});$(document).on("change","#terms_decline",function(){isAgree=!1;logging($("#terms_decline").attr("checked"));$("#terms_ok").removeClass("disabled").removeAttr("button-disabled")});$(document).on("change","#terms_agree_login",function(){logging($("#terms_agree_login").attr("checked"));$("#terms_ok_login").css({cursor:"pointer"});$("#terms_ok_login").removeClass("disabled").removeAttr("button-disabled")});$(document).on("change","#terms_decline_login",function(){logging($("#terms_decline_login").attr("checked"));$("#terms_decline_login").css({cursor:"pointer"});$("#terms_ok_login").removeClass("disabled").removeAttr("button-disabled")});$(document).on("click","#wrap",function(){});$(document).on("click","#print",function(){var a=$("#termsData").html(),a='<html><head><title>Terms and Conditions</title><style type="text/css">#print { display:none;}h3 { margin: 0px;}.termsContent { position:relative; width:670px;}.termsContent .leftArea { width:500px; float:left;}.termsContent .rightArea { width:150px; height:100%; margin-left:5px; float:right;}.termsContent .rightArea .block { width:145px; padding:5px; position:absolute; border-radius:10px; background-color: #00AEEF; color:#FFF;}</style><script type="text/javascript" src="/js/jquery/jquery-1.7.2.min.js"></script></head><body>'+a+'<script type="text/javascript">$(".anchor").each(function(index) {$(".rightArea .block:nth-child("+(index+1)+")").animate({top:$(this).position().top});});</script></body>',c=window.open("");c.document.write(a);c.print();c.close()});function buildPopup(a,c){a=$.extend({},{url:null,container:"#popupContainer",overlay:"#overlay",showPopup:!0,showOverlay:!0,closeByOverlay:!0,position:"absolute",loadComplete:void 0,show:void 0,onClose:void 0,onLoad:$.noop},a);$(document).off("click",a.container+" .popup .close");$(document).off("click",a.overlay);$.ajax({url:a.url,beforeSend:function(){a.onLoad();a.showOverlay&&(1>$(a.overlay+" .loading-spinner").length&&$(a.overlay).append(popupTemplate.loadingSpinner),$(a.overlay+" .loading-spinner").show(),$.browser.msie&&("8.0"==$.browser.version||"7.0"==$.browser.version)&&$(a.overlay).css("filter","alpha(opacity=70)"),$(a.overlay).fadeIn("fast"))},error:function(c,b,d){logging(this.url+" is "+d);a.showOverlay&&$(a.overlay).fadeOut("fast")},success:function(c){logging("loading "+this.url+" complete");$(a.container).html(c);void 0!=a.loadComplete&&"function"===typeof a.loadComplete&&a.loadComplete()},complete:function(e,b){$(a.overlay+" .loading-spinner").hide();logging("popup complete"+e+";"+b);logging("init term scrollbar");$("#termScrollbar").tinyscrollbar();a.showPopup?showPopup(a,c):"function"===typeof c&&c();$(document).on("click",a.container+" .popup .close",function(){closePopup();if("function"===typeof a.onClose)a.onClose()});if(a.closeByOverlay)$(document).on("click",a.overlay,function(){closePopup();if("function"===typeof a.onClose)a.onClose()})}})}function buildUploadPopup(a){var c={url:null,mode:"BOARD",filetype:"jpg",previewArea:"#previewImage",event:"upload_finished",onUploadSuccess:$.noop,isProcessErrorFiles:!0},e,b,d;$(document).off("click",".popup .close");$(document).off("click","#overlay");a=$.extend({},c,a);a.url+="?mode="+a.mode+"&filetype="+a.filetype;a.loadComplete=function(){swfobject.hasFlashPlayerVersion("10")||$("#popup_upload .upload_info .description").html('Please <a href="http://get.adobe.com/flashplayer/" target="_blank">click here to install flash</a> before you upload the file. Thanks.');"jpg"==a.filetype?(e="JPEG Files",b="*.jpg; *.jpeg",d=!1):"files"==a.filetype?(e="Doc Files",b="*.txt; *.doc; *.docx; *.pdf",d=!0):(e="AI, PDF or JPG Files",b="*.ai; *.pdf; *.jpg; *.jpeg",d=!1);$("#uploadify").uploadify({swf:"/js/jquery/uploadify/uploadify.swf",uploader:uploaderPath+"?mode="+a.mode+"&filetype="+a.filetype,successTimeout:480,multi:d,auto:!0,fileTypeDesc:e,fileTypeExts:b,buttonText:"Select Files",onUploadProgress:function(a,c,b,d,e){$("#uploadify").uploadify("disable",!0);d>=e&&$("#popup_upload .upload_info .description").fadeOut("fast",function(){$("#popup_upload .upload_info .description").html('We are processing your image, please wait..<br /><span class="upload_loading"><img src="/images/spinner_small.gif" /></span>');$("#popup_upload .upload_info .description").fadeIn()})},onUploadError:function(a,c,b,d){$("#uploadify").uploadify("disable",!1);logging("The file "+a.name+" could not be uploaded: "+d)},onUploadComplete:function(a){logging("The file "+a.name+" finished processing.")},onUploadSuccess:function(c,b,d){logging("The file "+c.name+" was successfully uploaded with a response of "+d);if(!0==d){$("#popup_upload .upload_info").html(b);b="<div>"+b+"</div>";logging("FileName=>"+$("#upload_filename_100x100").val());c=$("#upload_status").val();$("#upload_isFailedProcessing",b).val();if(a.isProcessErrorFiles){d=$("#upload_filename",b).val();var e=$("#upload_ext",b).val(),g=$("#upload_filename_100x100",b).val(),h=$("#upload_filename_400x400",b).val(),j=$("#upload_filename_original",b).val();b=$("#original_filename",b).val();b={status:c,filename:d,filename_ext:e,filename_100:g,filename_400:h,filename_original:j,original_filename:b};""!==a.previewArea&&$(a.previewArea).html('<i></i><img src="/100x100/'+g+'" />');var f=jQuery.Event(a.event);f.filestatus=c;f.filename=d;f.filename_ext=e;f.filename_100=g;f.filename_400=h;f.filename_original=j;$("body").trigger(f);a.onUploadSuccess(b)}else 0<=c?(d=$("#upload_filename",b).val(),e=$("#upload_ext",b).val(),g=$("#upload_filename_100x100",b).val(),h=$("#upload_filename_400x400",b).val(),j=$("#upload_filename_original",b).val(),b=$("#original_filename",b).val(),b={status:c,filename:d,filename_ext:e,filename_100:g,filename_400:h,filename_original:j,original_filename:b},""!==a.previewArea&&$(a.previewArea).html('<i></i><img src="/100x100/'+g+'" />'),f=jQuery.Event(a.event),f.filestatus=c,f.filename=d,f.filename_ext=e,f.filename_100=g,f.filename_400=h,f.filename_original=j,$("body").trigger(f),a.onUploadSuccess(b)):$("#popup_upload .upload-status").html("Image failed to process.");$("#uploadify").uploadify("destroy");$("#uploadify").css("display","none")}else $("#uploadify").uploadify("disable",!0),$("#popup_upload .upload_info .description").html("The upload process timed out.")},onFallback:function(){}})};buildPopup(a)}function showPopup(a,c){isOpened=!0;a=$.extend({},{container:"#popupContainer",effect:!0,position:"absolute"},a);var e=$(a.container+" .popup").width(),b=$(a.container).height();logging("Popup Height="+b);$(a.container).css({top:.8*(popupPosTop/2),left:popupPosLeft-e/2});$(window).height()<b+.8*(popupPosTop/2)&&(a.position="absolute");$(a.container).css("position",a.position);!0==a.effect?($(a.container).css("display","block"),$(a.container).width(0),$(a.container).height(0),$(a.container).animate({width:e,height:b},c)):($(a.container).css("display","block"),"function"==typeof c&&c())}function closePopup(a,c,e,b){b=$.extend({},{forceToClose:!1},b);if(isChangedWithoutSubmitOnPopup&&!0!=b.forceToClose)showConfirmation("Do you want to close with unsaved data?","Confirmation","changedWithoutSubmitOnPopup",{onOk:function(){isChangedWithoutSubmitOnPopup=!1;closePopup(a,c);closePopupMsg()}});else{b="#popupContainer";var d="#overlay";void 0!=c&&(d=c);void 0!=a&&(b=a);$(b).fadeOut("fast",function(){$(d).fadeOut(200)});$(".popup .notification").css("display","none");$(b).removeAttr("style");(void 0==e||!0==e)&&$(b).html("");isOpened=!1;$(document).off("click",b+" .popup .close");$(document).off("click",d)}}function centerPopup(){popupPosTop=$(window).height()/2;popupPosLeft=$(window).width()/2;if(!0==isOpened){var a=$(".popup").width();logging("POPUP W="+a);$(".popupContainer").css({top:.9*(popupPosTop/2),left:popupPosLeft-a/2})}}function buildPopupMsg(a){a=$.extend({},{content:null,title:"Error",event:null,closeByOverlay:!0,noCloseWhenOk:!1,effect:!0,showOk:!0,showOverlay:!0,showCancel:!1,onClose:void 0,onOk:closePopupMsg,onCancel:void 0,onShow:void 0,position:"absolute"},a);0>=$("#error").length&&$("body").append('<div class="popupContainer" id="error"></div>');0>=$("#error_overlay").length&&$("body").append('<div class="overlay" id="error_overlay"></div>');$("#error").html(renderLayout(a));$.browser.msie&&("8.0"==$.browser.version||"7.0"==$.browser.version)&&$("#error_overlay").css("filter","alpha(opacity=70)");a.showOverlay&&$("#error_overlay").fadeIn();showPopup({container:"#error",effect:a.effect,position:a.position},a.onShow);$(document).on("click",".error_close",function(){closePopupMsg("#error","#error_overlay");if("function"===typeof a.onClose)a.onClose()});if(a.closeByOverlay)$(document).on("click","#error_overlay",function(){closePopupMsg("#error","#error_overlay");if("function"===typeof a.onClose)a.onClose()});a.showOk&&($(document).on("click",".error_ok",function(){"function"===typeof a.onOk&&(logging("Trigger ok"),a.onOk())}),$(document).on("keypress",".error_ok",function(c){if(13==c.which&&"function"===typeof a.onOk)a.onOk()}));if(a.showCancel)$(document).on("click",".error_cancel",function(){closePopupMsg("#error","#error_overlay");if("function"===typeof a.onCancel)a.onCancel()})}function renderLayout(a){var c='<div class="popup"><div class="header"><span id="title">'+a.title+'</span><div class="error_close" data="'+a.event+'">X</div></div><div class="content" id="error_content"><div id="errorContent">'+a.content+'</div><div class="buttonPanel" style="width:85%">';a.showOk&&(c+='<div class="button error_ok" id="error_button_ok" tabindex="0" data="'+a.event+'">Ok</div>');a.showCancel&&(c+='<div class="button orangeButton error_cancel" id="error_button_cancel" data="'+a.event+'">Cancel</div>');return c+"</div></div></div>"}function closePopupMsg(a,c){c=$.extend({},{closeOverlay:!0},c);$(document).off("click",".error_close");$(document).off("click","#error_overlay");$(document).off("click",".error_ok");$(document).off("keypress",".error_ok");$(document).off("click",".error_cancel");$("#error").fadeOut("fast",function(){c.closeOverlay&&$("#error_overlay").fadeOut(200);$(".popup .notification").css("display","none");$("#error").removeAttr("style");$("#error").html("");"function"===typeof a&&a()})}function showConfirmation(a,c,e,b,d){void 0==d&&(d={});d=$.extend({},{position:"absolute"},d);buildPopupMsg({content:'<span style="color:#00F">'+a+"</span>",showOk:!0,title:c,showOverlay:!0,event:e,showCancel:!0,onOk:b.onOk,onCancel:b.onCancel,onClose:b.onClose,position:d.position})}function closeAllOverlay(){$(".overlay").fadeOut()}function unbindPopupMsgEvent(){$(document).off("click",".error_close");$(document).off("click","#error_overlay");$(document).off("click",".error_ok");$(document).off("keypress",".error_ok");$(document).off("click",".error_cancel")}