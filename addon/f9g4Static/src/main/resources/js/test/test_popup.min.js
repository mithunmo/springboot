var popupPosTop=$(window).height()/2,popupPosLeft=$(window).width()/2,isOpened=!1,isChangedWithoutSubmitOnPopup=!1;$(window).resize(function(){centerPopup()});$(document).on("change","#terms_agree",function(){logging($("#terms_agree").attr("checked"));$("#terms_ok").css({"background-color":"#0457A0",cursor:"pointer"})});$(document).on("change","#terms_decline",function(){isAgree=!1;logging($("#terms_decline").attr("checked"));$("#terms_ok").css({"background-color":"#0457A0",cursor:"pointer"})});$(document).on("change","#terms_agree_login",function(){logging($("#terms_agree_login").attr("checked"));$("#terms_ok_login").css({"background-color":"#0457A0",cursor:"pointer"})});$(document).on("change","#terms_decline_login",function(){logging($("#terms_decline_login").attr("checked"));$("#terms_decline_login").css({"background-color":"#0457A0",cursor:"pointer"})});function buildPopup(a,b){a=$.extend({},{url:null,container:"#popupContainer",overlay:"#overlay",showPopup:!0,showOverlay:!0,closeByOverlay:!0,loadComplete:void 0,show:void 0,onClose:void 0},a);$.ajax({url:a.url,beforeSend:function(){a.showOverlay&&($.browser.msie&&"8.0"==$.browser.version&&$(a.overlay).css("filter","alpha(opacity=70)"),$(a.overlay).fadeIn("fast"))},error:function(b,d,g){logging(this.url+" is "+g);a.showOverlay&&$(a.overlay).fadeOut("fast")},success:function(b){logging("loading "+this.url+" complete");$(a.container).html(b);void 0!=a.loadComplete&&"function"===typeof a.loadComplete&&a.loadComplete()},complete:function(c,d){logging("popup complete"+c+";"+d);logging("init term scrollbar");$("#termScrollbar").tinyscrollbar();a.showPopup?showPopup(a,b):"function"===typeof b&&b();$(document).on("click",".popup .close",function(){closePopup();if("function"===typeof a.onClose)a.onClose()});if(a.closeByOverlay)$(document).on("click","#overlay",function(){closePopup();if("function"===typeof a.onClose)a.onClose()})}})}function buildUploadPopup(a){var b,c;a=$.extend({},{url:null,mode:"BOARD",filetype:"jpg",previewArea:"#previewImage",event:"upload_finished"},a);a.url+="?mode="+a.mode+"&filetype="+a.filetype;a.loadComplete=function(){"jpg"==a.filetype?(b="JPEG Files",c="*.jpg; *.jpeg"):(b="AI or JPG Files",c="*.ai; *.jpg; *.jpeg");$("#uploadify").uploadify({swf:"/js/jquery/uploadify/uploadify.swf",uploader:uploaderPath+"?mode="+a.mode+"&filetype="+a.filetype,multi:!1,auto:!0,fileTypeDesc:b,fileTypeExts:c,onUploadError:function(a,b,c,e){logging("The file "+a.name+" could not be uploaded: "+e)},onUploadComplete:function(a){logging("The file "+a.name+" finished processing.")},onUploadSuccess:function(b,c,h){logging("The file "+b.name+" was successfully uploaded with a response of "+h);$("#popup_upload .upload_info").html(c);logging("FileName=>"+$("#upload_filename_100x100").val());b=$("#upload_status").val();if(-1!=b){var e=$("#upload_filename").val(),j=$("#upload_ext").val(),f=$("#upload_filename_100x100").val(),k=$("#upload_filename_400x400").val(),l=$("#upload_filename_original").val();$(a.previewArea).html('<i></i><img src="/100x100/'+f+'" />')}c=jQuery.Event(a.event);c.filestatus=b;c.filename=e;c.filename_ext=j;c.filename_100=f;c.filename_400=k;c.filename_original=l;$("body").trigger(c);$("#uploadify").attr("style","display:none")}})};buildPopup(a)}function showPopup(a,b){isOpened=!0;a=$.extend({},{container:"#popupContainer"},a);var c=$(a.container+" .popup").width(),d=$(a.container).height();logging("Popup Height="+d);$(a.container).css({top:.8*(popupPosTop/2),left:popupPosLeft-c/2});$(a.container).css("display","block");$(a.container).width(0);$(a.container).height(0);$(a.container).animate({width:c,height:d},b)}function closePopup(a,b){if(isChangedWithoutSubmitOnPopup)showConfirmation("Do you want to close with unsaved data?","Confirmation","changedWithoutSubmitOnPopup",{onOk:function(){isChangedWithoutSubmitOnPopup=!1;closePopup(a,b)}});else{var c="#popupContainer",d="#overlay";void 0!=b&&(d=b);void 0!=a&&(c=a);$(c).fadeOut("fast",function(){$(d).fadeOut()});$(".popup .notification").css("display","none");$(c).removeAttr("style");$(c).html("");isOpened=!1;$(document).off("click",".popup .close");$(document).off("click","#overlay")}}function centerPopup(){popupPosTop=$(window).height()/2;popupPosLeft=$(window).width()/2;if(!0==isOpened){var a=$(".popup").width();logging("POPUP W="+a);$(".popupContainer").css({top:.9*(popupPosTop/2),left:popupPosLeft-a/2})}}function buildPopupMsg(a){a=$.extend({},{content:null,title:"Error",event:null,closeByOverlay:!0,showOk:!0,showOverlay:!0,showCancel:!1,onClose:void 0,onOk:void 0,onCancel:void 0,onShow:void 0},a);0>=$("#error").length&&$("body").append('<div class="popupContainer" id="error"></div>');0>=$("#error_overlay").length&&$("body").append('<div class="overlay" id="error_overlay"></div>');$("#error").html(renderLayout(a));$.browser.msie&&"8.0"==$.browser.version&&$("#error_overlay").css("filter","alpha(opacity=70)");a.showOverlay&&$("#error_overlay").fadeIn();showPopup({container:"#error"},a.onShow);$(document).on("click",".error_close",function(){closePopupMsg("#error","#error_overlay");if("function"===typeof a.onClose)a.onClose()});if(a.closeByOverlay)$(document).on("click","#error_overlay",function(){closePopupMsg("#error","#error_overlay");if("function"===typeof a.onClose)a.onClose()});a.showOk&&($(document).on("click",".error_ok",function(){closePopupMsg();if("function"===typeof a.onOk)a.onOk()}),$(document).on("keypress",".error_ok",function(a){13==a.which&&closePopupMsg()}));if(a.showCancel)$(document).on("click",".error_cancel",function(){closePopupMsg("#error","#error_overlay");if("function"===typeof a.onCancel)a.onCancel()})}function renderLayout(a){var b='<div class="popup"><div class="header"><span id="title">'+a.title+'</span><div class="error_close" data="'+a.event+'">X</div></div><div class="content" id="error"><div id="errorContent">'+a.content+'</div><div class="buttonPanel" style="width:85%">';a.showOk&&(b+='<div class="button error_ok" id="error_button_ok" tabindex="0" data="'+a.event+'">Ok</div>');a.showCancel&&(b+='<div class="button orangeButton error_cancel" id="error_button_cancel" data="'+a.event+'">Cancel</div>');return b+"</div></div></div>"}function closePopupMsg(){$("#error").fadeOut("fast",function(){$("#error_overlay").fadeOut()});$(".popup .notification").css("display","none");$("#error").removeAttr("style");$("#error").html("");$(document).off("click",".error_close");$(document).off("click","#error_overlay");$(document).off("click",".error_ok");$(document).off("keypress",".error_ok");$(document).off("click",".error_cancel")}function showConfirmation(a,b,c,d){buildPopupMsg({content:'<span style="color:#00F">'+a+"</span>",showOk:!0,title:b,showOverlay:!0,event:c,showCancel:!0,onOk:d.onOk,onCancel:d.onCancel,onClose:d.onClose})}function closeAllOverlay(){$(".overlay").fadeOut()}