if($.browser.msie&&("8.0"==$.browser.version||"7.0"==$.browser.version))logging("layout table on IE 8","#00F"),$(".board-approval-table .inner-table td:nth-child(1)").addClass("td1"),$(".board-approval-table .inner-table td:nth-child(2)").addClass("td2"),$(".board-approval-table .inner-table td:nth-child(3)").addClass("td3"),$(".board-approval-table .inner-table td:nth-child(4)").addClass("td4"),$(".board-approval-table .outter-row:even").addClass("odd"),$(".board-approval-table .outter-row:odd").addClass("even"),$(".board-approval-table tr:odd").addClass("even"),$(".board-approval-table tr:even").addClass("odd"),$(".board-approval-table td:nth-child(1)").addClass("td1"),$(".board-approval-table td:nth-child(2)").addClass("td2");$(document).on("click",".approve",function(){var a=$(this).attr("data");0==$('.submitted[data="'+$(this).attr("data")+'"]').val()?showConfirmation("Are you sure you want to APPROVE this board?","Confirmation","changedWithoutSave",{onOk:function(){closePopupMsg();submitApprovalBoard(a,1)}},{position:"fixed"}):1==$('.submitted[data="'+$(this).attr("data")+'"]').val()?($('.result[data="'+$(this).attr("data")+'"]').addClass("error"),$('.result[data="'+$(this).attr("data")+'"]').html("This board has been processed")):($('.result[data="'+$(this).attr("data")+'"]').addClass("error"),$('.result[data="'+$(this).attr("data")+'"]').html("Please enter comments"))});$(document).on("click",".reject",function(){var a=$(this).attr("data");0<$('.approval-comment[data="'+$(this).attr("data")+'"]').val().length&&0==$('.submitted[data="'+$(this).attr("data")+'"]').val()?showConfirmation("Are you sure you want to REJECT this board?","Confirmation","changedWithoutSave",{onOk:function(){closePopupMsg();submitApprovalBoard(a,0)}},{position:"fixed"}):1==$('.submitted[data="'+$(this).attr("data")+'"]').val()?($('.result[data="'+$(this).attr("data")+'"]').addClass("error"),$('.result[data="'+$(this).attr("data")+'"]').html("This board has been processed")):($('.result[data="'+$(this).attr("data")+'"]').addClass("error"),$('.result[data="'+$(this).attr("data")+'"]').html("Please enter comments"))});$(document).on("click",".resubmit-sample",function(){var a=$(this).attr("data"),b=$(this).attr("user"),b=$('.userName[data="'+b+'"]').html();0<$('.approval-comment[data="'+$(this).attr("data")+'"]').val().length&&0==$('.submitted[data="'+$(this).attr("data")+'"]').val()?showConfirmation('Are you sure you want to ask user "'+b+'" to resubmit the example?',"Confirmation","changedWithoutSave",{onOk:function(){closePopupMsg();resubmitSamples(a)}},{position:"fixed"}):1==$('.submitted[data="'+$(this).attr("data")+'"]').val()?($('.result[data="'+$(this).attr("data")+'"]').addClass("error"),$('.result[data="'+$(this).attr("data")+'"]').html("This example has been asked for resubmission")):($('.result[data="'+$(this).attr("data")+'"]').addClass("error"),$('.result[data="'+$(this).attr("data")+'"]').html("Please enter comments"))});$(document).on("keyup",".approval-comment",function(){0<$(this).val().length?($('.reject[data="'+$(this).attr("data")+'"]').removeClass("disabled"),$('.resubmit-sample[data="'+$(this).attr("data")+'"]').removeClass("disabled")):($('.reject[data="'+$(this).attr("data")+'"]').addClass("disabled"),$('.resubmit-sample[data="'+$(this).attr("data")+'"]').addClass("disabled"))});$(document).on("click",".approve-user",function(){var a=$(this).attr("data"),b=$('.memPricingOption[data="'+$(this).attr("data")+'"]').val(),c=$(".userName[data="+a+"]").html();0<$('.memPricingOption[data="'+$(this).attr("data")+'"]').val().length&&showConfirmation('Are you sure you want to APPROVE user "'+c+'" ?',"Confirmation","changedWithoutSave",{onOk:function(){submitApprovalUser(a,b,1,!1)}},{position:"fixed"})});$(document).on("click",".reject-user",function(){var a=$(this).attr("data"),b=$('.memPricingOption[data="'+$(this).attr("data")+'"]').val(),c=$(".userName[data="+a+"]").html();0<$('.memPricingOption[data="'+$(this).attr("data")+'"]').val().length&&showConfirmation('Are you sure you want to REJECT user "'+c+'" ?',"Confirmation","changedWithoutSave",{onOk:function(){submitApprovalUser(a,b,0,!1)}},{position:"fixed"})});$(document).on("click",".change-user-level",function(){var a=$(this).attr("data"),b=$('.memPricingOption[data="'+$(this).attr("data")+'"]').val(),c=$(".userName[data="+a+"]").html();0<$('.memPricingOption[data="'+$(this).attr("data")+'"]').val().length&&showConfirmation('Are you sure you want to change the membershp level for user "'+c+'" ?',"Confirmation","changedWithoutSave",{onOk:function(){submitApprovalUser(a,b,1,!0)}},{position:"fixed"})});$(document).on("click",".userLogo",function(){var a=$(this).attr("data");getUserDetail(a,function(){})});$(document).on("click",".userName",function(){var a=$(this).attr("data");getUserDetail(a,function(){})});$(document).on("click","#resetPassword",function(){$(this).attr("user-name");var a=$(this).attr("data");showConfirmation('Do you want to reset the password for user "'+$(this).attr("user-name")+'" ?',"Confirmation","changedWithoutSave",{onOk:function(){resetPassword(a)}},{position:"fixed"})});$(document).on("click","#sendMail",function(){""!=$("#mailUserId").val()&&void 0!=$("#mailUserId").val()&&""!=$("#mailContent").val()&&void 0!=$("#mailContent").val()&&((""===$("#mailSubject").val()||void 0===$("#mailSubject").val())&&$("#mailSubject").val("Default Subject"),$.ajax({url:sendMailPath,data:$("#mailMessage").serialize(),type:"POST",beforeSend:function(){$("#sendMailStatus").html("Sending....")},error:function(){$("#sendMailStatus").html("Error, please send again.")},success:function(a){!1==a.hasError?($("#mailMessage")[0].reset(),$("#sendMailStatus").html("Sent successfully.")):$("#sendMailStatus").html("Error, please send again.")}}))});$(document).on("change",".user-filter",function(){window.location="?usertype="+$("#userTypeFilter").val()+"&filter="+$("#userFilter").val()+"&sortoption="+$("#sortOption").val()+"&p=1"});$(document).on("change",".user-filter-pagin",function(){var a=$("#page").val();void 0==a&&(a=-1);window.location="?usertype="+$("#userTypeFilter").val()+"&filter="+$("#userFilter").val()+"&sortoption="+$("#sortOption").val()+"&p="+a});$(document).on("change",".board-filter",function(){window.location="?pmp="+$("#mpFilter").val()+"&did="+$("#designerFilter").val()+"&mode="+$("#viewMode").val()+"&ptype="+$("#pTypeFilter").val()+"&sortOption="+$("#sortOption").val()});$(document).on("change","#emailTemplate",function(a){getEmailTemplate(a.target.selectedIndex)});$(document).on("change keyup","#broadcastMsgSubject, #broadcastMsgBody, #_broadcastMsgSubject, #_broadcastMsgBody",function(){emailContentChangedHandler()});$(document).on("click","#broadcastSubmit",function(){showConfirmation("Do you want to broadcast this alert?","Confirmation","changedWithoutSave",{onOk:function(){unbindPopupMsgEvent();submitBroadcastMessage()}},{position:"fixed"})});$(document).on("click",".edit-board",function(){location.href=""!=$.url().attr("query").replace(/ /g,"")?editBoardPath+"?boardId="+$(this).attr("data")+"&"+$.url().attr("query"):editBoardPath+"?boardId="+$(this).attr("data")});$(document).on("click","#showBoardsByPortfolio",function(){$("#board-gallery").toggle("blind")});$(document).on("click","#admin_save_edit_board",function(){saveBoard()});var galleryAttr;$(document).on("click","#board-gallery .control-prev",function(){galleryController("prev")});$(document).on("click","#board-gallery .control-next",function(){galleryController("next")});$(document).on("click",".view-samples",function(){location.hash="#"+$(this).attr("data");location.href=viewBoardApprovalPath+"?mode=samples&pmp=all&did="+$(this).attr("data")});$(document).on("click",".hide-user",function(){if("undefined"!==typeof Storage){var a=$(this).attr("data"),b=!0;if(null!=localStorage.getItem("hiddenUserList")){var b=localStorage.getItem("hiddenUserList"),c=b.split(",");-1==c.indexOf(a)?(c.push(a),localStorage.setItem("hiddenUserList",c),b=!1):(b=b.replace(RegExp(","+a+"|"+a+",|"+a,"g"),""),0<b.length?localStorage.setItem("hiddenUserList",b):localStorage.removeItem("hiddenUserList"),b=!0)}else c=[],c.push(a),localStorage.setItem("hiddenUserList",c.join(",")),b=!1;b||hideHiddenUsers(a);updateHideButton(a)}else alert("Unsupported browser detected. Please use newer browser version to user hide user functionality.")});$(document).on("click","#enableHiddenUsers",function(){hideHiddenUsers();return!1});$(document).on("click","#disableHiddenUsers",function(){showHiddenUsers();return!1});$(document).on("click","#clearHiddenUsers",function(){localStorage.removeItem("hiddenUserList");showHiddenUsers();return!1});$(document).on("keyup","#userSearch",function(a){userApprovalSearch(a,$(this).val())});$(document).on("keyup",".apcmmnt",function(){var a=$(this).attr("data");""==$(this).val().replace(/\s/g,"")?$('.apcmmnt-b[data="'+a+'"]').attr("disabled","disabled"):$('.apcmmnt-b[data="'+a+'"]').removeAttr("disabled")});$(document).on("click",".apcmmnt-b",function(){updateApproverComment($(this).attr("data"))});$(document).on("click",".apcmmnt-h",function(){buildPopup({url:approverCommentsPath+"?uid="+$(this).attr("data")})});$(document).on("click",".ffg-rating-panel-update",function(){showAdminRatingPopup($(this).attr("data-id"))});$(document).ready(function(){var a=parseInt(location.hash.replace("#",""));""!=a&&!isNaN(a)&&(a=$(".user-list-item[data="+a+"]").position(),$(".users-list-view").animate({scrollTop:a.top},"fast"))});function submitApprovalBoard(a,b){$('.approval-status[data="'+a+'"]').val(b);$.ajax({url:sumbitBoardApprovalPath,type:"POST",data:$('form[data="'+a+'"]').serialize(),beforeSend:function(){1==b?$('.approve[data="'+a+'"]').addClass("gray",400).removeClass("gray",400).addClass("gray",400).removeClass("gray",400).addClass("gray",400).removeClass("gray",400):$('.reject[data="'+a+'"]').addClass("gray",400).removeClass("gray",400).addClass("gray",400).removeClass("gray",400).addClass("gray",400).removeClass("gray",400)},error:function(){$('.result[data="'+a+'"]').addClass("error");$('.result[data="'+a+'"]').html("Submit failed, please submit again.")},success:function(c){c.hasError?($('.result[data="'+a+'"]').addClass("error"),void 0==c.errorDescription?$('.result[data="'+a+'"]').html("Submit failed, please submit again."):$('.result[data="'+a+'"]').html(c.errorDescription)):(1==b?($('.result[data="'+a+'"]').removeClass("error"),$('.result[data="'+a+'"]').addClass("approved"),$('.result[data="'+a+'"]').html("Approved.")):($('.result[data="'+a+'"]').removeClass("error"),$('.result[data="'+a+'"]').addClass("rejected"),$('.result[data="'+a+'"]').html("Rejected.")),$('.submitted[data="'+a+'"]').val(1))}})}function resubmitSamples(a){$('.approval-status[data="'+a+'"]').val(1);$.ajax({url:resubmitSamplesPath,type:"POST",data:$('form[data="'+a+'"]').serialize(),beforeSend:function(){$('.resubmit-sample[data="'+a+'"]').addClass("gray",400).removeClass("gray",400).addClass("gray",400).removeClass("gray",400).addClass("gray",400).removeClass("gray",400)},error:function(){$('.result[data="'+a+'"]').addClass("error");$('.result[data="'+a+'"]').html("Submit failed, please submit again.")},success:function(b){b.hasError?($('.result[data="'+a+'"]').addClass("error"),void 0==b.errorDescription?$('.result[data="'+a+'"]').html("Submit failed, please submit again."):$('.result[data="'+a+'"]').html(b.errorDescription)):($('.result[data="'+a+'"]').removeClass("error"),$('.result[data="'+a+'"]').addClass("rejected"),$('.result[data="'+a+'"]').html("Administrator has asked user to resubmit this example."),$('.submitted[data="'+a+'"]').val(1))}})}function submitApprovalUser(a,b,c,d){b=!0==d?$(".membershipLevelSelect[data="+a+"]").serialize()+"&approval_status=1":$(".membershipLevelSelect[data="+a+"]").serialize()+"&approval_status="+c;$.ajax({url:submitUserApprovalPath,type:"POST",data:b,beforeSend:function(){buildPopupMsg({content:layoutTemplate.loadingPopup,title:"Loading",showOk:!1,closeByOverlay:!1,effect:!1})},error:function(){unbindPopupMsgEvent();buildPopupMsg({content:"Submit error. Please try again.",showOk:!0,position:"fixed",effect:!1})},success:function(b){unbindPopupMsgEvent();!0===b.hasError||void 0==b.hasError?buildPopupMsg({content:"Submit error. Please try again.",showOk:!0,position:"fixed",effect:!1}):(closePopupMsg(),$('.regStatus[data="'+a+'"]').removeClass("highlight"),$('.current-membership[data="'+a+'"]').removeClass("highlight"),$('.expDate[data="'+a+'"]').removeClass("highlight"),!0==d?($('.current-membership[data="'+a+'"]').addClass("highlight"),$('.current-membership[data="'+a+'"]').html(b.user.userMembership[0].memPricingOption[0].membershipType.description+" , $"+b.user.userMembership[0].memPricingOption[0].price+" , "+b.user.userMembership[0].memPricingOption[0].commission+"%"),$('.expDate[data="'+a+'"]').addClass("highlight"),$('.expDate[data="'+a+'"]').html(b.userExpDate),b='<div class="button change-user-level" data="'+a+'">Change Level</div><div class="button view-samples" data='+a+">View Examples</div>",$('.membership-buttons-panel[data="'+a+'"]').html(b)):1==c?($('.regStatus[data="'+a+'"]').addClass("highlight"),$('.regStatus[data="'+a+'"]').html(b.user.registerStatus.description),$('.current-membership[data="'+a+'"]').addClass("highlight"),$('.current-membership[data="'+a+'"]').html(b.user.userMembership[0].memPricingOption[0].membershipType.description+" , $"+b.user.userMembership[0].memPricingOption[0].price+" , "+b.user.userMembership[0].memPricingOption[0].commission+"%"),$('.expDate[data="'+a+'"]').addClass("highlight"),$('.expDate[data="'+a+'"]').html(b.userExpDate),b='<div class="button change-user-level" data="'+a+'">Change Level</div><div class="button view-samples" data='+a+">View Examples</div>",$('.membership-buttons-panel[data="'+a+'"]').html(b)):0==c?($('.regStatus[data="'+a+'"]').addClass("highlight"),$('.regStatus[data="'+a+'"]').html(b.user.registerStatus.description),b='<div class="button approve-user" data="'+a+'">Approve</div>',$('.membership-buttons-panel[data="'+a+'"]').html(b)):($('.regStatus[data="'+a+'"]').addClass("highlight"),$('.regStatus[data="'+a+'"]').html(b.user.registerStatus.description),$('.membership-buttons-panel[data="'+a+'"]').remove(),b='<div class="button view-samples" data='+a+">View Examples</div>",$('.membership-buttons-panel[data="'+a+'"]').append(b)),$(".user-list-item.selected").removeClass("selected"),$(".user-list-item[data="+a+"]").addClass("selected"),getUserDetail(a))}})}function getUserDetail(a,b){$.ajax({url:usersViewerDetailPath+"?userId="+a,type:"GET",beforeSend:function(){$(".user-list-item.selected").removeClass("selected");$(".user-list-item[data="+a+"]").addClass("selected");$("#userDetail").html("Loading....")},error:function(){$("#userDetail").html("Please click user logo again, thanks....")},success:function(a){$("#userDetail").html(a);initAdminRaty();"function"==typeof b&&b()}})}function resetPassword(a){$.ajax({url:resetTempPasswordPath+"?userId="+a,type:"GET",beforeSend:function(){buildPopupMsg({content:'<span style="color:blue;">Please wait...<span><br /><img src="/images/spinner_small.gif" style="margin-top:30px;"/>',title:"Please Wait...",showOk:!1,closeByOverlay:!1,effect:!1})},error:function(){unbindPopupMsgEvent();buildPopupMsg({content:"Submit error. Please try again.",showOk:!0,position:"fixed",effect:!1})},success:function(a){a.hasError||void 0==a.hasError?(unbindPopupMsgEvent(),buildPopupMsg({content:a.errorDescription,showOk:!0,position:"fixed",effect:!1})):(unbindPopupMsgEvent(),buildPopupMsg({title:"Success",content:"The system has sent the temp password email to the user.",showOk:!0,position:"fixed",effect:!1}))}})}function getEmailTemplate(a){0<a?$.ajax({url:getTemplateContentPath+"?index="+a,beforeSend:function(){$("#broadcastMsgForm .loadingPanel").show()},error:function(){$("#broadcastMsgForm .loadingPanel").hide();buildPopupMsg({content:"Services unavailable. Please try again.",showOk:!0,position:"fixed",effect:!1})},success:function(a){$("#_broadcastMsgSubject").val(a.subject);$("#_broadcastMsgSubject").attr("disabled","disabled");$("#broadcastMsgSubject").val(a.subject);$("#broadcastMsgForm .loadingPanel").hide();$("#_broadcastMsgBody").val(a.body);$("#_broadcastMsgBody").attr("disabled","disabled");$("#broadcastMsgBody").val(a.body);$("#broadcastMsgBody").trigger("change")}}):($("#_broadcastMsgSubject").removeAttr("disabled"),$("#_broadcastMsgSubject").val(""),$("#broadcastMsgSubject").val(""),$("#_broadcastMsgBody").removeAttr("disabled"),$("#_broadcastMsgBody").val(""),$("#broadcastMsgBody").val(""),$("#broadcastMsgBody").trigger("change"))}function emailContentChangedHandler(){(""!=$("#_broadcastMsgSubject").val().replace(/ /g,"")||0<$("#_broadcastMsgSubject").val().replace(/ /g,"").length)&&(""!=$("#_broadcastMsgBody").val().replace(/ /g,"")||0<$("#_broadcastMsgBody").val().replace(/ /g,"").length)?($("#broadcastSubmit").removeClass("disabled"),$("#broadcastSubmit").removeAttr("button-disabled")):($("#broadcastSubmit").addClass("disabled"),$("#broadcastSubmit").attr("button-disabled","true"))}function submitBroadcastMessage(){$("#broadcastMsgBody").val($("#_broadcastMsgBody").val());$("#broadcastMsgSubject").val($("#_broadcastMsgSubject").val());$.ajax({url:submitBroadcastMsgPath,type:"POST",data:$("#broadcastMsgForm").serialize(),beforeSend:function(){buildPopupMsg({content:layoutTemplate.loadingPopup,title:"Loading",showOk:!1,closeByOverlay:!1,effect:!1})},error:function(){buildPopupMsg({content:"Submit error. Please try again.",showOk:!0,position:"fixed",effect:!1})},success:function(){buildPopupMsg({title:"Success",content:"The broadcast message has been submitted.",showOk:!0,position:"fixed",effect:!1});$("#broadcastMsgForm")[0].reset();$("#emailTemplate").trigger("change");$("#broadcastSubmit").addClass("disabled");$("#broadcastSubmit").attr("button-disabled","true")}})}function saveBoard(){var a=[],a=CheckforNullinSelect("#product",a,"#label_product","Please select product."),a=CheckforNullinSelect("#productType",a,"#label_product_type","Please select product type."),a=CheckforNumberRange("#form_board_price",a,"#form_board_price","The price should be between "+minimunBoardPrice+" and "+maximunBoardPrice,minimunBoardPrice,maximunBoardPrice);0<a.length?buildPopupMsg({title:"Success",content:a.join("<br />"),showOk:!0,position:"fixed",effect:!1}):$.ajax({url:$("#form_create_board").attr("action"),type:"POST",data:$("#form_create_board").serialize(),beforeSend:function(){buildPopupMsg({content:layoutTemplate.loadingPopup,title:"Loading",showOk:!1,closeByOverlay:!1,effect:!1})},error:function(){buildPopupMsg({content:"Submit error. Please try again.",showOk:!0,position:"fixed",effect:!1})},success:function(a){if(a.hasError){for(var c=[],d=0;d<a.errors.length;d++)c.push(a.errors[d].defaultMessage);buildPopupMsg({title:"Success",content:c.join("<br />"),showOk:!0,position:"fixed",effect:!1})}else globalVars.isChangedWithoutSubmit=!1,buildPopupMsg({title:"Success",content:"Update successfully.",showOk:!0,position:"fixed",effect:!1})}})}function galleryInit(){var a={wrapperWidth:$("#board-gallery .board-gallery-wrapper").width(),viewerWidth:$("#board-gallery .board-gallery-wrapper ul").width(),itemWidth:$("#board-gallery .board-gallery-wrapper ul li").width()};a.transitionWidth=a.itemWidth*Math.floor(a.wrapperWidth/a.itemWidth);return a}function galleryController(a){void 0==galleryAttr&&(galleryAttr=galleryInit());var b=$("#board-gallery .board-gallery-wrapper ul").position();"prev"==a?0>b.left&&$("#board-gallery .board-gallery-wrapper ul").animate({left:"+="+galleryAttr.transitionWidth}):b.left-galleryAttr.transitionWidth>0-galleryAttr.viewerWidth&&$("#board-gallery .board-gallery-wrapper ul").animate({left:"-="+galleryAttr.transitionWidth})}function updateHideButton(a){if("undefined"===typeof Storage)$(".hidden-users-pannel").hide(),$(".user-list-item .hide-user").remove();else if(null!=localStorage.getItem("hiddenUserList")){var b=localStorage.getItem("hiddenUserList").split(",");$("#hiddenUsersCount").html("("+b.length+" hidden)");void 0==a?0<b.length&&$(".user-list-item").each(function(){var a=$(this).attr("data");-1!=b.indexOf(a)?$(this).find(".hide-user").html("Show"):$(this).find(".hide-user").html("Hide")}):-1!=b.indexOf(a)?$('.user-list-item[data="'+a+'"] .hide-user').html("Show"):$('.user-list-item[data="'+a+'"] .hide-user').html("Hide")}else $("#hiddenUsersCount").html(""),$(".user-list-item .hide-user").html("Hide")}function hideHiddenUsers(){if("undefined"===typeof Storage)$(".hidden-users-pannel").hide(),$(".user-list-item .hide-user").remove(),$(".userLogo:first").trigger("click");else{if(null!=localStorage.getItem("hiddenUserList")){var a=localStorage.getItem("hiddenUserList").split(",");0<a.length&&$(".user-list-item").each(function(){var b=$(this).attr("data");$(this).removeClass("removed").removeClass("active");-1!=a.indexOf(b)?$(this).addClass("removed"):$(this).addClass("active")})}$(".user-list-item.active").removeClass("odd").removeClass("even");$(".user-list-item.active:even").addClass("odd");$(".user-list-item.active:odd").addClass("even")}}function showHiddenUsers(){updateHideButton();$(".user-list-item").removeClass("removed").removeClass("active").removeClass("even").removeClass("odd");$(".user-list-item:even").addClass("odd");$(".user-list-item:odd").addClass("even")}function userApprovalSearch(a,b){if(""!=b)if(13!=a.which){$(".user-list-item .highlight-text").removeClass("highlight-text");$("#userSearch").data("pattern",b);var c=[];$(".membershipLevelSelect").each(function(){var a=$(this).find(".userName").attr("data"),d=$(this).find(".table-username"),f=$(this).find(".userName-content"),h=$(this).find(".expDate"),j=$(this).find(".effectiveDate"),k=$(this).find(".regStatus"),l=-1,m=-1,n=-1,p,q=-1;try{var g=b.toUpperCase(),l=d.html().toUpperCase().search(g),m=f.html().toUpperCase().search(g),q=k.html().toUpperCase().search(g),n=h.html().toUpperCase().search(g);p=j.html().toUpperCase().search(g);if(-1!=m){f.addClass("highlight-text");var e=[];e.push(a);e.push('.membershipLevelSelect[data="'+a+'"] .userName-content');c.push(e)}-1!=l&&(d.addClass("highlight-text"),e=[],e.push(a),e.push('.membershipLevelSelect[data="'+a+'"] .table-username'),c.push(e));-1!=q&&(k.addClass("highlight-text"),e=[],e.push(a),e.push('.membershipLevelSelect[data="'+a+'"] .regStatus'),c.push(e));-1!=p&&(j.addClass("highlight-text"),e=[],e.push(a),e.push('.membershipLevelSelect[data="'+a+'"] .effectiveDate'),c.push(e));-1!=n&&(h.addClass("highlight-text"),e=[],e.push(a),e.push('.membershipLevelSelect[data="'+a+'"] .expDate'),c.push(e))}catch(r){}});if(0<c.length){var d=$(".user-list-item[data="+c[0][0]+"]").position();$(".users-list-view").animate({scrollTop:$(".users-list-view").scrollTop()+d.top},"fast");$(c[0][1]).addClass("currentTarget");$("#userSearch").data("searchResult",c);$("#userSearch").data("currentIndex",0)}else $("#userSerachResult").html("Not found"),$(".highlight-text").removeClass("highlight-text"),$(".currentTarget").removeClass("currentTarget")}else{if(c=$("#userSearch").data("searchResult"),0<c.length){var f=($("#userSearch").data("currentIndex")+1)%c.length,d=$(".user-list-item[data="+c[f][0]+"]").position();$(".currentTarget").removeClass("currentTarget");$("#userSearch").data("currentIndex",f);$(".users-list-view").animate({scrollTop:$(".users-list-view").scrollTop()+d.top},"fast");$(c[f][1]).addClass("currentTarget");f==c.length-1?$("#userSerachResult").html("End"):$("#userSerachResult").html("")}}else $(".highlight-text").removeClass("highlight-text"),$(".currentTarget").removeClass("currentTarget")}function updateApproverComment(a){$.ajax({url:approverCommentsPath,type:"POST",data:"uid="+a+"&comment="+$('.apcmmnt[data="'+a+'"]').val(),beforeSend:function(){buildPopupMsg({content:layoutTemplate.loadingPopup,title:"Loading",showOk:!1,position:"fixed",closeByOverlay:!1,effect:!1})},error:function(){unbindPopupMsgEvent();buildPopupMsg({content:"Submit error. Please try again.",showOk:!0,position:"fixed",effect:!1})},success:function(a){!1==a.hasError?(unbindPopupMsgEvent(),buildPopupMsg({title:"Success",content:"Update successfully.",showOk:!0,position:"fixed",effect:!1})):(unbindPopupMsgEvent(),buildPopupMsg({content:"Submit error. Please try again.",showOk:!0,position:"fixed",position:"fixed",effect:!1}))}})}function initAdminRaty(){$(".ffg-rating").raty({path:appConfig.ratyImgPath,cancel:!0,cancelHint:"Reset to 0",space:!0,width:"150px",score:$("#form_ffgRating").val(),half:!1,click:function(a){updateAdminRating($(this).attr("data-id"),$("#form_ffgRating").val(),a)},mouseover:function(a){void 0!=$(".ffg-rating").data("updatingVal")?$("#ffgRatingValue").html($(".ffg-rating").data("updatingVal")):$("#ffgRatingValue").html(a)},mouseout:function(){void 0!=$(".ffg-rating").data("updatingVal")?$("#ffgRatingValue").html($(".ffg-rating").data("updatingVal")):-1==$("#form_ffgRating").val()?$("#ffgRatingValue").html("Unrated"):$("#ffgRatingValue").html($("#form_ffgRating").val())}})}function showAdminRatingPopup(a){buildPopup({url:adminRatingPath+"?uid="+a},function(){initAdminRaty()})}function updateAdminRating(a,b,c){null==c&&(c=0);$(this).attr("id");$("#ffgRatingValue").html(c);$.ajax({url:adminRatingPath,type:"POST",data:"uid="+a+"&score="+c,beforeSend:function(){$("#ffgRatingValue").css("color","#C30");$(".ffg-rating-spinner").show();$(".ffg-rating").data("updatingVal",c)},error:function(){$("#ffgRatingValue").removeAttr("style");$(".ffg-rating-spinner").hide();$(".ffg-rating").removeData("updatingVal");buildPopupMsg({content:"Submit error. Please try again.",showOk:!0,position:"fixed",effect:!1})},success:function(d){$("#ffgRatingValue").removeAttr("style");$(".ffg-rating-spinner").hide();$(".ffg-rating").removeData("updatingVal");!1==d.hasError?($('[name="ffgRating"]').val(c),$("#ffgRatingValue").html(c),$('.ffg-rating-panel-value[data-id="'+a+'"]').html(c)):($("#ffgRating").raty("score",b),-1==b?$("#ffgRatingValue").html("Unrated"):$("#ffgRatingValue").html(b),buildPopupMsg({content:d.errorDescription,showOk:!0,position:"fixed",position:"fixed",effect:!0}))}})}function retrieveExamplesImgs(a){var b=$('.membershipLevelSelect[data="'+a+'"] tr:eq(2) td').html(),c=$('.regStatus[data="'+a+'"]').html(),d="";"Designer"==b&&("Registration Confirmed"==c||"Sample boards submission completed"==c||"Example board submission completed"==c)&&$.ajax({url:viewBoardApprovalPath+"?mode=samples&pmp=all&did="+a,type:"GET",beforeSend:function(){0>=$("#userDetail .examples-area").length?$("#userDetail").prepend('<div>Examples</div><div class="examples-area">Loading...</div>'):$("#userDetail .examples-area").html("Loading...")},error:function(){d="Service unavailable. Please click examples to reload again.";$("#userDetail .examples-area").html(d)},success:function(a){var b=$(".viewBigImage",a);a=$(".error-file",a);if(0>=b.length)d="Cannot find examples";else for(var c=0;c<b.length;c++)d+='<div style="display:table-cell">'+b[c].outerHTML+"<a href="+$(a[c]).attr("href")+' target="_BLANK" style="display:block;">Processed File?</a></div>';$("#userDetail .examples-area").html(d)}})}