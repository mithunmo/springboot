app.controller("userProjects",["$scope","$http","$filter","$log",function(a,h,l,e){e.log("user projects main controller");a.rowsPerPage=10}]);app.controller("createBuyerProjectController",["$scope","$http","$filter","$rootScope","$log",function(a,h,l,e,f){f.log("buyer create project controller");e.tab={viewProjectsSubmissions:!0}}]);app.controller("editProjectBoardController",["$scope","$http","$filter","$rootScope","$routeParams","FormValidator","dialogs","$location","$log","BoardService","mode",function(a,h,l,e,f,k,d,c,j,b,n){function g(b){var g='This board will NOT be published to the Project. Would you like to continue? If you would like your board to be visible in the Project, you must select "Save & Publish."',n="Save successfully";1==b&&(g="Clicking Ok will publish this board to the Project. Would you like to continue?",n="Publish successfully");a.form.boardImageUrl=a.uploaderResult.upload_filename;a.form.boardImageType=a.uploaderResult.upload_ext;a.form.boardImageUrl_thumb=a.uploaderResult.upload_filename_100x100;a.form.boardImageUrl_file=a.uploaderResult.upload_filename_400x400;a.form.boardImageUrl_main=a.uploaderResult.upload_filename_original;a.form.publishToMp=b;b=k.projectBoardFormValidator(a.form);if(0==b.status){var j=d.confirm("CONFIRMATION",g,m);j.result.then(function(){d.wait("Please Wait",void 0,50,m);h({method:"POST",url:ajaxPaths.saveProjectBoardPath,params:a.form}).success(function(b){e.$broadcast("dialogs.wait.progress",{progress:100});e.$broadcast("dialogs.wait.complete");!1==b.hasError?d.notify("RESULT",n,m).result.then(function(){j=d.confirm("CONFIRMATION","Do you want to upload another sumbission?",m);j.result.then(function(){a.clear()},function(){c.path(ajaxPaths.viewProjectsPortfolioPath+"/"+b.board.portfolioId)})}):d.error("Error","Service unavailable. Please try again. Thank you.",m)}).error(function(){e.$broadcast("dialogs.wait.progress",{progress:0});e.$broadcast("dialogs.wait.complete");d.error("Error","Service unavailable. Please try again. Thank you.",m)})},angular.noop)}else d.error("Error",b.error.join("<br/>"),m)}j.log("edit project board controller: "+n);e.tab={viewProjectsSubmissions:!0};var m={size:"md"};a.hasRemoved=!0;a.form={};a.uploaderResult={};"edit"==n?(a.isBoardSyncing=!0,b.getBoardDetail(f.boardId,function(b){a.isBoardSyncing=!1;a.hasRemoved=!1;a.form.portfolioId=b.detail.portfolioId;a.form.boardId=b.detail.boardId;a.form.boardName=b.detail.name;a.form.boardDescription=b.detail.description;a.form.boardImageUrl=b.detail.boardImages[0].sourceFileURL;a.form.boardImageType=b.detail.boardImages[0].fileType;a.form.boardImageUrl_thumb=b.detail.boardImages[0].thumbnailUrl;a.form.boardImageUrl_file=b.detail.boardImages[0].fileName;a.form.boardImageUrl_main=b.detail.boardImages[0].mainImageUrl;a.uploaderResult.upload_filename=a.form.boardImageUrl;a.uploaderResult.upload_ext=a.form.boardImageType;a.uploaderResult.upload_filename_100x100=a.form.boardImageUrl_thumb;a.uploaderResult.upload_filename_400x400=a.form.boardImageUrl_file;a.uploaderResult.upload_filename_original=a.form.boardImageUrl_main;a.previewImg=a.form.boardImageUrl_file})):a.form.portfolioId=f.portfolioId;a.removeImg=function(){a.hasRemoved=!0;a.uploaderResult={};a.form.boardImageUrl=void 0;a.form.boardImageType=void 0;a.form.boardImageUrl_thumb=void 0;a.form.boardImageUrl_file=void 0;a.form.boardImageUrl_main=void 0};a.saveBoard=function(){g(0)};a.publishBoard=function(){g(1)};a.clear=function(b){a.form=b?{portfolioId:a.form.portfolioId}:{boardName:a.form.boardName,boardDescription:a.form.boardDescription,portfolioId:a.form.portfolioId};a.hasRemoved=!0;a.uploaderResult={}}}]);app.controller("viewProjectsBoardsController",["$scope","$http","$filter","$rootScope","$routeParams","$log","dialogs","BoardService","focusTabHeader",function(a,h,l,e,f,k,d,c,j){k.log("View Projects Boards Controller");e.tab={};void 0!=j?e.tab[j]=!0:e.tab.viewProjectsSubmissions=!0;a.showPanel={};a.loading={};a.boardDetail={};a.isSelected={};a.columnsPerRow=8;a.currentPage=0;a.totalPages=0;a.rowsPerPage=10;a.upperBound=0;a.lowerBound=0;a.render=function(){var b=(a.currentPage+1)*a.rowsPerPage,c=a.currentPage*a.rowsPerPage;b>=a.items.length&&(b=a.items.length);a.upperBound=b;a.lowerBound=c;a.displayData=null==a.filteredUsers?a.items.slice(c,b):a.filteredData.slice(c,b)};a.updateRows=function(){a.totalPages=Math.floor(a.items.length/(a.rowsPerPage*a.columnsPerRow));0==a.items.length%(a.rowsPerPage*a.columnsPerRow)&&(a.totalPages-=1);a.render()};a.nextPage=function(){a.currentPage=a.currentPage+1>a.totalPages?0:a.currentPage+1;a.render()};a.prevPage=function(){a.currentPage=0>a.currentPage-1?a.totalPages:a.currentPage-1;a.render()};a.injectData=function(b){a.items=b.boards;a.hasError=b.hasError;a.updateRows()};a.navigate=function(b){""!=b&&void 0!=b&&!isNaN(parseInt(b))&&b<a.items.length&&0<b&&(a.currentPage=Math.floor(b/(a.rowsPerPage*a.columnsPerRow)),0==b%a.rowsPerPage&&a.currentPage--,a.render())};a.navigateHandler=function(b){(void 0==b||13==b.keyCode)&&a.navigate(a.itemIndex)};a.showDetailInfo=function(b){return a.showPanel[Math.floor(b/a.columnsPerRow)]};a.closeDetail=function(b){void 0!=b?a.showPanel[Math.floor(b/a.columnsPerRow)]="":a.showPanel={};a.isSelected={}};a.showImageWindow=function(a){c.showImageWindow(a)};a.getDetail=function(b,c,g){a.loading[g]="loading";a.detailIndex=g;a.isSelected={};h({method:"GET",url:ajaxPaths.boardDetailPath+"/"+c}).success(function(b){var c=Math.floor(g/a.columnsPerRow);a.boardDetail=b;a.showPanel={};a.showPanel[c]=!0;a.loading={};a.isSelected[g]="selected"}).error(function(){})};a.deleteBoard=function(b,c){d.confirm("CONFIRMATION","Do you want to delete this board?",{size:"sm"}).result.then(function(){var g=-1,d;for(d in a.items)a.items[d].boardId==b&&(g=d);-1!=g&&(a.items[g].deleting=!0);h({method:"POST",url:ajaxPaths.deleteBoardPath,params:{selectedItems:b}}).success(function(){a.items.splice(g,1);"selected"==a.isSelected[c]&&a.closeDetail(c)}).error(function(){})},angular.noop)};a.portfolioId=f.portfolioId;a.isLoading=!0;h({method:"GET",url:ajaxPaths.viewProjectBoardsDataPath,params:{portfolioId:f.portfolioId}}).success(function(b){a.isLoading=!1;a.injectData(b)}).error(function(){a.isLoading=!1})}]);app.controller("viewProjectsPortfolioController",["$scope","$http","$filter","$rootScope","$log","BoardService",function(a,h,l,e,f,k){f.log("designer view projects controller");e.tab={viewProjectsSubmissions:!0};a.access={"delete":!1};a.columnsPerRow=5;a.currentPage=0;a.totalPages=0;a.rowsPerPage=10;a.upperBound=0;a.lowerBound=0;a.render=function(){var d=(a.currentPage+1)*a.rowsPerPage*a.columnsPerRow,c=a.currentPage*a.rowsPerPage*a.columnsPerRow;d>=a.contests.length&&(d=a.contests.length);a.upperBound=d;a.lowerBound=c;for(a.displayData=null==a.filteredUsers?a.contests.slice(c,d):a.filteredData.slice(c,d);c<d;c++)k.getContestBoards(a.contests[c])};a.updateRows=function(){a.totalPages=Math.floor(a.contests.length/(a.rowsPerPage*a.columnsPerRow));0==a.contests.length%(a.rowsPerPage*a.columnsPerRow)&&(a.totalPages-=1);a.render()};a.nextPage=function(){a.currentPage=a.currentPage+1>a.totalPages?0:a.currentPage+1;a.render()};a.prevPage=function(){a.currentPage=0>a.currentPage-1?a.totalPages:a.currentPage-1;a.render()};a.injectData=function(d){a.contests=d.contests;a.hasError=d.hasError;a.updateRows()};a.navigate=function(d){""!=d&&void 0!=d&&!isNaN(parseInt(d))&&d<a.contests.length&&0<d&&(a.currentPage=Math.floor(d/(a.rowsPerPage*a.columnsPerRow)),0==d%a.rowsPerPage&&a.currentPage--,a.render())};a.navigateHandler=function(d){(void 0==d||13==d.keyCode)&&a.navigate(a.itemIndex)};a.showBoards=function(){f.log("Show boards")};a.isLoading=!0;h({method:"GET",url:ajaxPaths.viewProjectsDataPath}).success(function(d){a.isLoading=!1;a.injectData(d)}).error(function(){a.isLoading=!1})}]);app.controller("viewDesignerProjectsController",["$scope","$http","$filter","$rootScope","BoardService","$location",function(a,h,l,e,f,k){console.log("designer view projects portfolio controller");e.tab={viewProjects:!0};a.currentPage=0;a.totalPages=0;a.rowsPerPage=30;a.upperBound=0;a.lowerBound=0;a.filteredData=null;a.sortOpt=[1,1,1,1,1,1,1,1,1,1];a.sortingOpt={};a.sortIcon={};for(var d in a.sortOpt)a.sortIcon[d]="glyphicon-chevron-up";a.render=function(){var c=(a.currentPage+1)*a.rowsPerPage,d=a.currentPage*a.rowsPerPage;c>=a.contests.length&&(c=a.contests.length);a.upperBound=c;a.lowerBound=d;for(a.displayData=null==a.filteredUsers?a.contests.slice(d,c):a.filteredData.slice(d,c);d<c;d++)a.getContestBoards(a.contests[d])};a.updateRows=function(){a.totalPages=Math.floor(a.contests.length/a.rowsPerPage);0==a.contests.length%a.rowsPerPage&&(a.totalPages-=1);a.render()};a.nextPage=function(){a.currentPage=a.currentPage+1>a.totalPages?0:a.currentPage+1;a.render()};a.prevPage=function(){a.currentPage=0>a.currentPage-1?a.totalPages:a.currentPage-1;a.render()};a.navigate=function(c){""!=c&&void 0!=c&&!isNaN(parseInt(c))&&c<a.data.users.length&&0<c&&(a.currentPage=Math.floor(c/a.rowsPerPage),0==c%a.rowsPerPage&&a.currentPage--,a.render())};a.navigateHandler=function(c){(void 0==c||13==c.keyCode)&&a.navigate(a.itemIndex)};a.injectData=function(c){a.contests=c.contests;a.hasError=c.hasError;a.updateRows()};a.getContestBoards=function(a){f.getContestBoards(a)};a.sort=function(c,d){var b=a.sortOpt[c];void 0!=d&&(b=d);a.loadCompleted?a.sortingOpt.option=0:(a.sortingOpt.option=c,a.sortingOpt.order=b);switch(c){case 2:a.contests.sort(function(a,c){return a.contestType>c.contestType?-1*b:a.contestType===c.contestType?0:1*b});break;case 3:a.contests.sort(function(a,c){return a.originalData.contestPortfolioDomain.name>c.originalData.contestPortfolioDomain.name?-1*b:a.originalData.contestPortfolioDomain.name===c.originalData.contestPortfolioDomain.name?0:1*b});break;case 4:a.contests.sort(function(a,c){return a.seasonYear.season>c.seasonYear.season?-1*b:a.seasonYear.season===c.seasonYear.season?0:1*b});break;case 5:a.contests.sort(function(a,c){return a.originalData.contestPortfolioDomain.portfolioImages.length>c.originalData.contestPortfolioDomain.portfolioImages.length?-1*b:a.originalData.contestPortfolioDomain.portfolioImages.length===c.originalData.contestPortfolioDomain.portfolioImages.length?0:1*b});break;case 6:a.contests.sort(function(a,c){return a.originalData.numberOfWinners>c.originalData.numberOfWinners?-1*b:a.originalData.numberOfWinners===c.originalData.numberOfWinners?0:1*b});break;case 7:a.containUnloadBoardsInfo();a.contests.sort(function(a,c){return a.boards>c.boards?-1*b:a.boards===c.boards?0:1*b});break;default:case 8:a.contests.sort(function(a,c){return a.endDate>c.endDate?-1*b:a.endDate===c.endDate?0:1*b})}a.render();a.sortOpt[c]=void 0==d?0-a.sortOpt[c]:0-d;a.sortIcon[c]=0>a.sortOpt[c]?"glyphicon-chevron-down":"glyphicon-chevron-up"};a.boardsView=function(a){console.log("board view");k.path(ajaxPaths.viewProjectsPortfolioPath+"/"+a)};a.isLoading=!0;h({method:"GET",url:ajaxPaths.viewProjectsDataPath}).success(function(c){a.isLoading=!1;a.injectData(c)}).error(function(){a.isLoading=!1})}]);app.controller("viewBuyerProjectsController",["$scope","$http","$filter","$rootScope","BoardService","$location","$log","focusTabHeader",function(a,h,l,e,f,k,d,c){d.log("buyer view projects controller");e.tab={};void 0!=c?e.tab[c]=!0:e.tab.viewProjects=!0;a.currentPage=0;a.totalPages=0;a.rowsPerPage=30;a.upperBound=0;a.lowerBound=0;a.filteredData=null;a.sortOpt=[1,1,1,1,1,1,1,1,1,1];a.sortingOpt={};a.sortIcon={};for(var j in a.sortOpt)a.sortIcon[j]="glyphicon-chevron-up";a.showImageWindow=function(a){f.showImageWindow(a)};a.render=function(){var b=(a.currentPage+1)*a.rowsPerPage,c=a.currentPage*a.rowsPerPage;b>=a.contests.length&&(b=a.contests.length);a.upperBound=b;a.lowerBound=c;for(a.displayData=null==a.filteredUsers?a.contests.slice(c,b):a.filteredData.slice(c,b);c<b;c++)a.getContestBoards(a.contests[c])};a.updateRows=function(){a.totalPages=Math.floor(a.contests.length/a.rowsPerPage);0==a.contests.length%a.rowsPerPage&&(a.totalPages-=1);a.render()};a.nextPage=function(){a.currentPage=a.currentPage+1>a.totalPages?0:a.currentPage+1;a.render()};a.prevPage=function(){a.currentPage=0>a.currentPage-1?a.totalPages:a.currentPage-1;a.render()};a.navigate=function(b){""!=b&&void 0!=b&&!isNaN(parseInt(b))&&b<a.data.users.length&&0<b&&(a.currentPage=Math.floor(b/a.rowsPerPage),0==b%a.rowsPerPage&&a.currentPage--,a.render())};a.navigateHandler=function(b){(void 0==b||13==b.keyCode)&&a.navigate(a.itemIndex)};a.injectData=function(b){a.contests=b.contests;a.hasError=b.hasError;a.updateRows()};a.sort=function(b,c){var d=a.sortOpt[b];void 0!=c&&(d=c);a.loadCompleted?a.sortingOpt.option=0:(a.sortingOpt.option=b,a.sortingOpt.order=d);switch(b){case 1:a.contests.sort(function(a,b){return a.contestType>b.contestType?-1*d:a.contestType===b.contestType?0:1*d});break;case 2:a.contests.sort(function(a,b){return a.originalData.contestPortfolioDomain.name>b.originalData.contestPortfolioDomain.name?-1*d:a.originalData.contestPortfolioDomain.name===b.originalData.contestPortfolioDomain.name?0:1*d});break;case 3:a.contests.sort(function(a,b){return a.seasonYear.season>b.seasonYear.season?-1*d:a.seasonYear.season===b.seasonYear.season?0:1*d});break;case 4:a.contests.sort(function(a,b){return a.originalData.contestPortfolioDomain.portfolioImages.length>b.originalData.contestPortfolioDomain.portfolioImages.length?-1*d:a.originalData.contestPortfolioDomain.portfolioImages.length===b.originalData.contestPortfolioDomain.portfolioImages.length?0:1*d});break;case 5:a.contests.sort(function(a,b){return a.contestStatus>b.contestStatus?-1*d:a.contestStatus===b.contestStatus?0:1*d});break;case 6:a.contests.sort(function(a,b){return a.originalData.numberOfWinners>b.originalData.numberOfWinners?-1*d:a.originalData.numberOfWinners===b.originalData.numberOfWinners?0:1*d});break;case 7:a.containUnloadBoardsInfo();a.contests.sort(function(a,b){return a.boards>b.boards?-1*d:a.boards===b.boards?0:1*d});break;default:case 8:a.contests.sort(function(a,b){return a.endDate>b.endDate?-1*d:a.endDate===b.endDate?0:1*d})}a.render();a.sortOpt[b]=void 0==c?0-a.sortOpt[b]:0-c;a.sortIcon[b]=0>a.sortOpt[b]?"glyphicon-chevron-down":"glyphicon-chevron-up"};a.getContestBoards=function(a){f.getContestBoards(a)};a.containUnloadBoardsInfo=function(){for(var b in a.contests)if(-1==a.contests[b].boards||void 0==a.contests[b].boards)return!0;return!1};a.boardsView=function(a){console.log("board view");k.path(ajaxPaths.viewProjectsPortfolioPath+"/"+a)};a.isLoading=!0;h({method:"GET",url:ajaxPaths.viewProjectsDataPath}).success(function(b){a.isLoading=!1;a.injectData(b)}).error(function(){a.isLoading=!1})}]);app.controller("manageBuyerProjectsController",["$scope","$http","$filter","$rootScope",function(a,h,l,e){e.tab={manageProjects:!0}}]);