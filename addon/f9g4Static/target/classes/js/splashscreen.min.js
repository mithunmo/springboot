var basicConfig={debugMode:!1,writeLogToConsole:!1,disableRightClick:!1,browserChecking:!1,mainboxSlideDuration:5e3,quotesSlideDuration:15e3},usernameValue="Please enter your valid email for your username",passwordValue="Please enter your password",popupPosTop=$(window).height()/2,popupPosLeft=$(window).width()/2,isOpened=!1,layoutTemplate={loadingPopup:'<span style="color:blue;">Please wait....<span><br /><img src="/images/spinner_small.gif" style="margin-top:30px;"/>'};Date.prototype.getTimezoneOffsetNoDST=function(){for(var b=12,a=new Date(null,b,1),c=a.getTimezoneOffset();--b;)if(a.setUTCMonth(b),c!=a.getTimezoneOffset())return Math.max(c,a.getTimezoneOffset());return a.getTimezoneOffset()};$(document).on("click",".button",function(b){if("disabled"==$(this).attr("disabled")||"true"==$(this).attr("disabled")||"true"==$(this).attr("button-disabled"))logging("disable button event hooked!"),b.stopImmediatePropagation()});$(document).ready(function(){var b=getCookie("RememberMef4g");""!=b?($("#username").val(b),$("#remember").attr("checked","checked")):$("#remember").removeAttr("checked");$("#free_trial").fadeIn(1500);browserChecking();$("input").placeholder();$("#mainbox-image-rotator").nivoSlider({effect:"fade",slices:30,boxCols:8,boxRows:4,animSpeed:2e3,pauseTime:basicConfig.mainboxSlideDuration,startSlide:0,directionNav:!1,controlNav:!1,controlNavThumbs:!1,pauseOnHover:!1,manualAdvance:!1,prevText:"Prev",nextText:"Next",randomStart:!1});basicConfig.disableRightClick&&$(document).bind("contextmenu",function(){return!1});$("#submit").click(function(){browserChecking()&&!0==checkUserInput()&&doLogin()});$("#link_forget").click(function(){buildPopup({url:forgotPwdUrl})});$(document).on("keydown","input[type=password]",function(a){if(32==a.which)return!1});$(document).on("keydown","#username, #password, #remember",function(a){13==a.which&&browserChecking()&&!0==checkUserInput()&&doLogin()});$(document).on("change","#terms_agree",function(){logging($("#terms_agree").attr("checked"));$("#terms_ok").css({"background-color":"#0457A0",cursor:"pointer"})});$(document).on("change","#terms_decline",function(){isAgree=!1;logging($("#terms_decline").attr("checked"));$("#terms_ok").css({"background-color":"#0457A0",cursor:"pointer"})});$(document).on("click","#gotoSecurity",function(){loadSecurityPanel()});$(document).on("click","#gotoResult",function(){submitSequrityQuestions()});$(document).on("click","#resetPwd",function(){resetPassword()});$(document).on("click","#terms_ok",function(){"checked"==$("#terms_agree").attr("checked")?subimtTermAndConditions():"checked"==$("#terms_decline").attr("checked")&&closePopup()});$(document).on("click","#terms_ok_login",function(){logging("vbf");logging($("#terms_lg").action);"checked"==$("#terms_agree_login").attr("checked")?$("#terms_lg").submit():closePopup()});$(document).on("click","#close",function(){closePopup()});$(document).on("keydown","#email",function(a){13==a.which&&loadSecurityPanel()});$(document).on("keydown","#q1_ans",function(a){13==a.which&&submitSequrityQuestions()});$(document).on("keydown","#q2_ans",function(a){13==a.which&&submitSequrityQuestions()});$(document).on("keydown","#confirmPwd",function(a){13==a.which&&resetPassword()});$(document).on("keydown","#close",function(a){13==a.which&&(logging("close"),closePopup())});$(document).on("click",".close",function(){closePopup()});$(window).resize(function(){popupPosTop=$(window).height()/2;popupPosLeft=$(window).width()/2;logging("resize");logging("currentWidth/2="+popupPosTop);logging("currentHeight/2="+popupPosLeft);if(!0==isOpened){var a=$(".popup .header").width();$("#popupContainer").css({top:.9*(popupPosTop/2),left:popupPosLeft-a/2})}});$(document).on("keyup","#newPwd",function(){$("#result").html(checkStrength($("#newPwd").val()))});$(document).on("keyup","#resetPassword",function(){$("#setupSeqPasswordFormPanel #result").html(checkStrength($("#resetPassword").val(),"#setupSeqPasswordFormPanel #result"))});$(document).on("close_error","body",function(){logging("Receive error close information");$("#password").val("")});$(document).on("click","#showLogin",function(){$("#loginPanel").css("display","block");var a=getCookie("RememberMef4g");""!=a?($("#username").val(a),$("#remember").attr("checked","checked")):$("#remember").removeAttr("checked");setFocus()});setFocus();$(document).on("click","#loginPanel .overlay",function(){$("#loginPanel").css("display","none")});$(document).on("click","#closeLoginPanel a",function(){$("#loginPanel").css("display","none")});$(document).on("click",".invitationOnly",function(){buildPopup({url:invitationFormPath})});$(document).on("click","#submitSeqPassword",function(){submitSeqPasswordForm()});quotesRotate($(".mainbox-quote"));$(document).on("click","#showContactInfo",function(){buildPopupMsg({content:'<img src="/images/splash/contact_info.png"/>',title:"CONTACT INFO",showOk:!0,closeByOverlay:!0,effect:!0})})});function quotesRotate(b){var a=0,c=b.children(".mainbox-quote-item").length,d=b.children(".mainbox-quote-item");window.setInterval(function(){$(d[a]).fadeOut(1e3,function(){$(d[a]).fadeIn(1e3)});a=(a+1)%c},15e3);d.css("display","none");$(d[0]).css("display","block")}function setFocus(){setTimeout(function(){""!=$("#username").val()?$("#password").focus():$("#username").focus()},100);""!=$("#username").val()?$("#password").focus(function(){this.select()}):$("#username").focus(function(){this.select()})}function loadSecurityPanel(){""==$("#email").val()?($("#nofify_email").html("Please enter your email"),$("#nofify_email").fadeIn()):-1!=$("#email").val().search(" ")?($("#nofify_email").html("It's not an invalid email format"),$("#nofify_email").fadeIn()):loadSecurityQuestionsData()}function checkUserInput(){var b=!0;""==$("#username").val()||$("#username").val()==usernameValue||-1!=$("#username").val().search(" ")?(buildPopupMsg({content:usernameValue,title:"Username can not be empty",onShow:function(){setTimeout(function(){$("#error_button_ok").focus()},100)}}),b=!1):""==$("#password").val()||$("#password").val()==passwordValue?(buildPopupMsg({content:passwordValue,title:"Password can not be empty",onShow:function(){setTimeout(function(){$("#error_button_ok").focus()},100)}}),b=!1):-1!=$("#password").val().search(/\s/g)&&(buildPopupMsg({content:"Please check that there are no spaces in your password",title:"No spaces in password",onShow:function(){setTimeout(function(){$("#error_button_ok").focus()},100)}}),b=!1);return b}function submitSequrityQuestions(){var b=$("#forgotPwd").attr("action");logging("SUBMIT SEQ Q=>"+b);$.ajax({url:b,type:"POST",data:$("#forgotPwd").serialize(),beforeSend:function(){logging("loading "+b)},error:function(a,b,d){logging(this.url+" is "+d);$("#overlay").fadeOut("fast")},success:function(a){logging("loading "+this.url+"complete");!0==a.hasError?($("#notify_questions").html("Security answers entered do not match. Please try again."),$("#notify_questions").fadeIn()):$("#session_security").fadeOut(function(){$("#session_reset_password").fadeIn(function(){setTimeout(function(){$("#newPwd").focus()},100);$("#newPwd").focus(function(){this.select()})})})}})}function resetPassword(){var b=$("#reset_password").attr("action"),a=[];$("#label_new_pwd").removeAttr("style");$("#label_confirm_pwd").removeAttr("style");a=CheckforNull("#newPwd",a,"#label_new_pwd","New Password can not be empty.");a=CheckforContainSpace("#newPwd",a,"#label_new_pwd","Please check that there are no spaces in New Password.");a=CheckforNull("#confirmPwd",a,"#label_confirm_pwd","Confirm Password can not be empty.");a=CheckforContainSpace("#confirmPwd",a,"#label_confirm_pwd","Please check that there are no spaces in Confirm Password.");0<a.length?$("#notify_passw_mismatch").css("color","#000000").show().html(a.join("<br />")):($("#notify_passw_mismatch").removeAttr("style").html(""),$.ajax({url:b,type:"POST",data:$("#reset_password").serialize(),beforeSend:function(){logging("loading "+b)},error:function(a,b,f){logging(this.url+" is "+f);$("#overlay").fadeOut("fast")},success:function(a){logging("loading "+this.url+"complete");!1==a.hasError?$("#session_reset_password").fadeOut(function(){$("#reset_success").fadeIn(function(){setTimeout(function(){$("#close").focus()},100)});$("#loginPanel #password").val("")}):($("#notify_passw_mismatch").html("Your passwords do not match. Please try again."),$("#notify_passw_mismatch").fadeIn())}}))}function loadSecurityQuestionsData(){var b=securityQuestionsUrl+"?userName="+$("#email").val();$.ajax({url:b,beforeSend:function(){logging("loading "+b)},error:function(a,b,d){logging(this.url+" is "+d);$("#overlay").fadeOut("fast")},success:function(a){logging("loading "+this.url+"complete");a&&(logging("result.hasError ->"+a.hasError),!0===a.hasError?a.noSeqSettings?$("#session_forget").fadeOut(function(){$("#reset_temp_password_failed").fadeIn()}):($("#nofify_email").html("Email address entered is invalid. Please try again."),$("#nofify_email").fadeIn()):a.noSeqSettings?$("#session_forget").fadeOut(function(){$("#reset_temp_password").fadeIn()}):($("#q1_id").attr("value",a.Q1Id),$("#q1_val").attr("value",a.Q1val),$("#q2_id").attr("value",a.Q2Id),$("#q2_val").attr("value",a.Q2val),$("#session_forget").fadeOut(function(){$("#session_security").fadeIn(function(){setTimeout(function(){$("#q1_ans").focus()},100);$("#q1_ans").focus(function(){this.select()})})})))}})}function doLogin(){var b=$("#form_login"),a=b.attr("action");logging(b.serialize());var c=new Date;$.ajax({url:a,type:"POST",data:b.serialize()+"&timezoneOffset="+c.getTimezoneOffset(),beforeSend:function(){buildPopupMsg({content:'<span style="color:blue;">Please wait, we will log you in....<span><br /><img src="/images/spinner_small.gif" style="margin-top:30px;"/>',title:"Please Wait",showOk:!1,closeByOverlay:!1,effect:!1})},error:function(a,b,c){logging(this.url+" is "+c);$("#overlay").fadeOut("fast")},success:function(a){logging("loading "+this.url+"complete");if(void 0==a.hasError)$("#overlay").fadeOut(),buildPopupMsg({title:'Information <span style="#C30">!</span>',content:"Sorry, our service is not available.<br />Please try again. Thank you.",showOk:!0});else if(a&&a.hasError){for(var b=[],c=0;c<a.errors.length;c++)"validateUser.auth.failed"==a.errors[c].code&&$("#loginPanel #password").val(""),b.push(a.errors[c].defaultMessage);$("#overlay").fadeOut();buildPopupMsg({title:'Information <span style="#C30">!</span>',content:b.join("<br/>"),showOk:!0})}else{var e;!0===a.termsExpired&&!0===a.membershipExpired&&logging("Do nothing");if(!0===a.needSetupSeqPassword)_gaq.push(["_trackEvent","login","setup security settings","setup security settings"]),closePopupMsg(),buildPopup({url:setupSeqPasswordPath});else if(!0===a.needSetupSeq)closePopupMsg(),buildPopup({url:setupSeqPasswordPath+"?setupSeq=true&setupPwd=false"});else if(!0===a.needSamples)_gaq.push(["_set","hitCallback",function(){clearTimeout(e);location.assign(submitSamplesPath+"?userId="+a.userId)}]),_gaq.push(["_trackEvent","login","examples required","examples required"]),e=setTimeout(function(){location.assign(submitSamplesPath+"?userId="+a.userId)},1e3);else if(!0===a.termsExpired)_gaq.push(["_trackEvent","login","terms and conditions expired","terms and conditions expired"]),closePopupMsg(),displayTermAndConditions(a.termsId);else if(!0===a.membershipExpired)_gaq.push(["_set","hitCallback",function(){clearTimeout(e);location.assign(updateMembershipPath+"?userId="+a.userId)}]),_gaq.push(["_trackEvent","login","membership expired","membership expired"]),e=setTimeout(function(){location.assign(updateMembershipPath+"?userId="+a.userId)},1e3);else{_gaq.push(["_set","hitCallback",function(){clearTimeout(e);$(location).attr("href",g)}]);_gaq.push(["_trackEvent","login","login to user console","login to user console"]);var g=consoleHomeUrl;e=setTimeout(function(){$(location).attr("href",g)},1e3)}}}})}function submitSeqPasswordForm(){var b=[];$("#label_resetPassword").removeAttr("style");$("#label_confirmPassword").removeAttr("style");$("#label_ans_q1").removeAttr("style");$("#label_ans_q2").removeAttr("style");0<$("#form_ans_q1").length&&(b=CheckforNull("#form_ans_q1",b,"#label_ans_q1","Please enter answer for Security Question 1"));0<$("#form_ans_q2").length&&(b=CheckforNull("#form_ans_q2",b,"#label_ans_q2","Please enter answer for Security Question 2"));0<$("#resetPassword").length&&(b=CheckforNull("#resetPassword",b,"#label_resetPassword","Please enter New Password"),b=CheckforContainSpace("#resetPassword",b,"#label_resetPassword","Please check that there are no spaces in New Password"));0<$("#confirmPassword").length&&(b=CheckforNull("#confirmPassword",b,"#label_confirmPassword","Please enter Confirm Password"),b=CheckforContainSpace("#confirmPassword",b,"#label_confirmPassword","Please check that there are no spaces in Confirm Password"));if(0<b.length){for(var a=[],c=0;c<b.length;c++)a.push(b[c]);buildPopupMsg({title:'Information <span style="#C30">!</span>',content:"Please enter data in the mandatory fields as highlighted in the screen and also displayed in the list:<br/>"+a.join("<br/>"),showOk:!0})}else $.ajax({url:$("#seqPasswordForm").attr("action"),type:"POST",data:$("#seqPasswordForm").serialize(),beforeSend:function(){buildPopupMsg({content:'<span style="color:blue;">Please wait...<span><br /><img src="/images/spinner_small.gif" style="margin-top:30px;"/>',title:"Please Wait",showOk:!1,closeByOverlay:!1,effect:!1})},success:function(a){if(a.hasError){for(var b=[],c=0;c<a.errors.length;c++)b.push(a.errors[c].defaultMessage),logging("Error field=>"+a.errors[c].field);$("#overlay").fadeOut("fast");buildPopupMsg({content:b.join("<br/>"),showOk:!0})}else a.setupPwd||void 0==a.setupPwd?(a="Password updated successfully.<br /> Please use the new password to login. Thank you.",$("#loginPanel #password").val("")):a="Your security setting eastblished successfully.<br /> Thank you.",buildPopupMsg({content:'<span style="color:blue;">'+a+"<span>",title:"Update successfully",showOk:!0,closeByOverlay:!0,effect:!0,onOk:function(){closePopup("#popupContainer","#overlay");closePopupMsg()}})},error:function(){buildPopupMsg({content:"Our service is not available, please submit again. Thanks.",showOk:!0})}})}function displayTermAndConditions(b){var a=termsUrl+"?termId="+b;$.ajax({url:a,type:"GET",beforeSend:function(){logging("loading "+a);$.browser.msie&&("8.0"==$.browser.version||"7.0"==$.browser.version)&&$("#overlay").css("filter","alpha(opacity=70)");$("#overlay").fadeIn("fast")},error:function(a,b,f){logging(this.url+" is "+f);$("#overlay").fadeOut("fast")},success:function(a){logging("loading "+this.url+"complete");!a||!a.hasError?($("#popupContainer").html(a),$("#terms_ok").css({"background-color":"#333",cursor:"default"}),showPopup({},function(){$("#termScrollbar").tinyscrollbar();$(".anchor").each(function(a){$(".rightArea .block:nth-child("+(a+1)+")").animate({top:$(this).position().top})})})):$(location).attr("href",consoleHomeUrl)}})}function subimtTermAndConditions(){var b=$("#terms_form"),a=b.attr("action");$.ajax({url:a,type:"POST",data:b.serialize(),beforeSend:function(){logging("loading "+a);$.browser.msie&&("8.0"==$.browser.version||"7.0"==$.browser.version)&&$("#overlay").css("filter","alpha(opacity=70)");$("#overlay").fadeIn("fast")},error:function(a,b,f){logging(this.url+" is "+f);$("#overlay").fadeOut("fast")},success:function(){logging("loading "+this.url+"complete");$(location).attr("href",consoleHomeUrl)}})}function checkStrength(b,a){void 0==a&&(a="#result");void 0==b&&(b=document.getElementById("#form_password").val);var c=0,d=[!1,!1,!1,!1];if(8>b.length)return $(a).removeClass(),$(a).addClass("short"),d[0]=!1,"Password should be at least 8 characters long";7<b.length&&(d[0]=!0,c+=1);b.match(/([A-Z])/)&&(d[1]=!0,c+=1);b.match(/([a-zA-Z])/)&&b.match(/([0-9])/)&&(d[2]=!0,c+=1);b.match(/([!,%,&,@,#,$,^,*,?,_,~,-])/)&&(d[3]=!0,c+=1);b.match(/(.*[!,%,&,@,#,$,^,*,?,_,~,-].*[!,%,&,@,#,$,^,*,?,_,~,-])/)&&(d[3]=!0,c+=1);if(4>c)return c="",$(a).removeClass(),$(a).addClass("weak"),d[1]?d[2]?d[3]||(c+=" 1 special character"):c+=" 1 number":c+=" 1 capital.",""!=c?"Weak. Should contain "+c:"Weak.";if(4==c)return $(a).removeClass(),$(a).addClass("good"),"Good";$(a).removeClass();$(a).addClass("strong");return"Strong"}function browserChecking(){var b=!0;if(basicConfig.browserChecking&&$.browser.msie){var a=$.browser.version.slice(0,$.browser.version.indexOf(".")),c=document.documentMode;logging("document mode=>"+c);a!=c?(buildPopupMsg({content:"ERROR:\nBrowser Mode and Document Mode do not match!\n\nBrowser Mode: IE"+a+".0\nDocument Mode: IE"+c+".0",showOk:!0,title:"Browser Checking Warning",showOverlay:!0}),b=!1):7>=a?(buildPopupMsg({content:"We detect your browser is IE "+a+" or lower. We support IE 8 and above. Thank you.",showOk:!0,title:"Browser Checking Warning",showOverlay:!0}),b=!1):7>=c&&(buildPopupMsg({content:"We detect the document mode of your browser is IE "+a+" or lower. We support the document mode of IE 8 and above. Thank you.",showOk:!0,title:"Browser Checking Warning",showOverlay:!0}),b=!1)}return b}function getCookie(b){b+="=";for(var a=document.cookie.split(";"),c=0;c<a.length;c++){var d=$.trim(a[c]);if(0==d.indexOf(b))return d.substring(b.length,d.length).replace(/"/g,"")}return""}function logging(b,a){void 0==a&&(a="#000");basicConfig.debugMode&&($("#debug").css("display","block"),(void 0==b||""==b)&&$("#debug").append("Undefined or blank <br />"),$("#debug").append('<span style="color:'+a+'">'+b+"</span><br />"),basicConfig.writeLogToConsole&&console.log(b),$("#debug").scrollTop($("#debug")[0].scrollHeight))}